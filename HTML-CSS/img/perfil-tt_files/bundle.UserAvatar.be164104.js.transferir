(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{"0Ki6":function(e,t,n){"use strict";n("i4UL"),n("IAdD");var o=n("1Pcy"),a=n.n(o),i=n("W/Kd"),r=n.n(i),s=n("KEM+"),c=n.n(s),l=n("YRQv"),u=n("ERkP"),h=n("CHgo"),m=n("fs1G"),d=n("7nmT"),p=n.n(d),f=n("rHpw"),_=n("3xO4"),v=n.n(_),g=n("Enqy"),b=l.a(),y={zoom:1,lastX:0,lastY:0,zoomCenter:{x:0,y:0}},w={height:0,width:0,left:0,right:0,top:0,bottom:0},C=function(e,t,n){return Math.min(t,Math.max(e,n))},E=function(e,t){return Math.sqrt(Math.pow(e.clientY-t.clientY,2)+Math.pow(e.clientX-t.clientX,2))},P=function(e){function t(t){var n;return n=e.call(this,t)||this,c()(a()(n),"_itemDimensions",w),c()(a()(n),"_setTouchableNode",(function(e){n._touchableNode=p.a.findDOMNode(e),n._touchableNode&&(n._removeTouchListener=Object(h.a)(n._touchableNode,n._handleTouchMove,!1))})),c()(a()(n),"_handleTouchStart",(function(e){n._zoomable instanceof Element&&(n._zoomedDimensions=n._zoomable.getBoundingClientRect()),n._moved=!1;var t=e.touches.length;2===t?(e.preventDefault(),n._handlePinchStart(e)):1===t&&n._handleTapStart(e)})),c()(a()(n),"_handleTouchMove",(function(e){var t=e.touches.length;2===t?n._handlePinchMove(e):1===t&&(n._moved=!0,n._handlePanMove(e)),e.preventDefault()})),c()(a()(n),"_handleTouchEnd",(function(e){var t=n.props,o=t.maxZoom,a=t.minZoom,i=t.onTap,r=C(a,o,n.state.zoom),s=n.state.zoom;s!==r&&1===r?n.resetZoom():n.setState({lastX:0,lastY:0,zoom:r}),0===e.touches.length?(n._lastTouchTime&&n._lastTouchTime+300>e.timeStamp?(n._clickTimer&&clearTimeout(n._clickTimer),n._handleDoubleTap(e)):s<=1&&!n._moved&&(n._clickTimer=setTimeout(i,300)),n._lastTouchTime=e.timeStamp):e.preventDefault()})),n.state=Object.assign({},y),n._ref=u.createRef(),n}r()(t,e),t.getDerivedStateFromProps=function(e,t){return b&&e.resetZoom?(e.onZoomed(!1),Object.assign({},y)):t};var n=t.prototype;return n.render=function(){var e=this;if(!b)return this.props.children;var t=this.state,n=t.zoom,o=t.zoomCenter,a=this._moved,i={zoom:Object(g.spring)(n),zoomCenterX:Object(g.spring)(o.x),zoomCenterY:Object(g.spring)(o.y)};return u.createElement(v.a,{onTouchEnd:this._handleTouchEnd,onTouchStart:this._handleTouchStart,ref:this._setTouchableNode,style:z.fill},u.createElement(g.Motion,{style:i},(function(t){var n=t.zoom,i=t.zoomCenterX,r=t.zoomCenterY;return u.createElement(v.a,{ref:e._ref,style:[z.fill,{transform:[{scale:n}],transformOrigin:(a?i:o.x)+"px "+(a?r:o.y)+"px"}]},e.props.children)})))},n.componentDidMount=function(){b&&(this._zoomable=p.a.findDOMNode(this._ref.current),this._updateWindowDimensions())},n.componentWillUnmount=function(){this._removeTouchListener&&this._removeTouchListener()},n.resetZoom=function(){this.props.onZoomed(!1),this.setState({zoom:y.zoom})},n._handlePanMove=function(e){if(!(this.state.zoom<=1)&&this._zoomedDimensions&&this._windowDimensions){var t=e.touches[0],n=t.clientX,o=t.clientY;if(this.state.lastX&&this.state.lastY){var a=this.state,i=a.lastX,r=a.lastY,s=a.zoomCenter,c=s.x,l=s.y,u=this._windowDimensions,h=u.height,m=u.width,d=this._zoomedDimensions,p=d.height,f=0,_=0;d.width-m>0&&(f=n-i),p-h>0&&(_=o-r),this.setState({lastX:n,lastY:o,zoomCenter:{x:Math.min(Math.max(c-f,0),m),y:Math.min(Math.max(l-_,0),h)}})}else this.setState({lastX:n,lastY:o})}},n._handlePinchStart=function(e){var t,n,o=e.touches;if(this._updateWindowDimensions(),this._lastDistance=E(o[0],o[1]),1===this.state.zoom){var a=(t=o[0],n=o[1],{x:(t.clientX+n.clientX)/2,y:(t.clientY+n.clientY)/2});this.setState({zoomCenter:this._getZoomCenter(a.x,a.y)}),this.props.onZoomed(!0)}},n._handlePinchMove=function(e){var t=this.state,n=t.zoom,o=t.zoomCenter,a=this.props,i=a.maxZoom,r=a.maxZoomBounce,s=a.minZoom,c=a.minZoomBounce;if(0!==o.x||0!==o.y){var l=E(e.touches[0],e.touches[1]),u=this._lastDistance?l/this._lastDistance:1,h=C(s-c,i+r,n*u);this._lastDistance=l,this.setState({zoom:h})}else 2===e.touches.length&&this._handlePinchStart(e)},n._handleTapStart=function(e){var t=e.touches;this._tapCenter=this._getZoomCenter(t[0].clientX,t[0].clientY)},n._handleDoubleTap=function(e){var t=this.props,n=t.maxZoom,o=t.onZoomed;1!==this.state.zoom?this.resetZoom():(this._updateWindowDimensions(),this.setState({zoom:n,zoomCenter:this._tapCenter||y.zoomCenter}),o(!0))},n._getZoomCenter=function(e,t){this._zoomable instanceof Element&&(this._itemDimensions=this._zoomable.getBoundingClientRect());var n=this._itemDimensions;return{x:e-n.left,y:t-n.top}},n._updateWindowDimensions=function(){this._windowDimensions={height:window.innerHeight,width:window.innerWidth}},t}(u.Component);c()(P,"defaultProps",{maxZoom:2.5,maxZoomBounce:.15,minZoom:1,minZoomBounce:.15,onTap:m.a,onZoomed:m.a,resetZoom:!1});var z=f.a.create((function(e){return{fill:{flex:1}}}));t.a=P},"3Zg8":function(e,t,n){"use strict";n.r(t),n.d(t,"UserAvatarScreen",(function(){return I}));n("2G9S"),n("KqXw"),n("MvUL"),n("uFXj");var o=n("1Pcy"),a=n.n(o),i=n("W/Kd"),r=n.n(i),s=n("KEM+"),c=n.n(s),l=n("ERkP"),u=(n("WNMA"),n("oEGd")),h=n("0KEI"),m=n("hqKg"),d=n("kGix"),p=n("QK5w"),f=n("G6rE"),_=Object(f.g)([f.a]),v=function(e,t){return t.match.params.screenName||void 0},g=Object(m.createSelector)((function(e,t){var n=v(e,t);return n?_(e,n):d.a.LOADING}),v,(function(e,t){var n=v(e,t);return n?f.e.selectByScreenName(e,n):void 0}),p.a,(function(e,t,n,o){return{fetchStatus:e,screenName:t,user:n,canGoBack:o}})),b={createLocalApiErrorHandler:Object(h.d)("USER_AVATAR"),fetchOneUserByScreenNameIfNeeded:f.e.fetchOneByScreenNameIfNeeded},y=Object(u.g)(g,b),w=n("GOQE"),C=n("v//M"),E=n("RCZO"),P=n("UPvq"),z=n("wiP2"),T=n("zCf4"),D=n("ziVO"),S=n("3xO4"),M=n.n(S),O=n("cHvH"),x=n("0Ki6"),Z=n("oSwX"),B=n("rHpw"),I=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,c()(a()(t),"state",{isZoomed:!1}),c()(a()(t),"_renderResponsive",(function(){return l.createElement(O.a,null,t._render)})),c()(a()(t),"_render",(function(e){var n=e.windowWidth,o=e.windowHeight,a=t.props,i=a.screenName,r=a.user,s=t.state.isZoomed,c=Object(E.c)(r),u=Math.min(o,n);return r?l.createElement(P.a,{backgroundColor:c,mediaUrl:r&&r.profile_image_url_https,onCloseButtonPress:t._handleClose},l.createElement(M.a,{style:X.container},l.createElement(D.a,{onDismiss:s?void 0:t._handleClose},l.createElement(x.a,{onZoomed:t._handleZoom},l.createElement(M.a,{onClick:t._handleImagePress},l.createElement(Z.default,{backgroundColor:B.a.theme.colors.transparent,isDownloadable:!0,size:"custom",style:[X.userAvatar,{maxWidth:u,maxHeight:u}],uri:r.profile_image_url_https})))))):l.createElement(T.a,{to:"/"+(i||"404")})})),c()(a()(t),"_handleZoom",(function(e){t.setState({isZoomed:e})})),c()(a()(t),"_handleFetch",(function(){var e=t.props,n=e.createLocalApiErrorHandler,o=e.fetchOneUserByScreenNameIfNeeded,a=e.screenName;a&&o(a).catch(n(w.a))})),c()(a()(t),"_handleClose",(function(){var e=t.props,n=e.canGoBack,o=e.history,a=e.screenName;n?o.goBack():o.replace({pathname:a?"/"+a:"/"})})),c()(a()(t),"_handleImagePress",(function(e){e.stopPropagation()})),t}r()(t,e);var n=t.prototype;return n.componentDidMount=function(){this._handleFetch()},n.render=function(){var e=this.props.fetchStatus;return l.createElement(z.a.Configure,{headerless:!0},l.createElement(C.a,{fetchStatus:e,onRequestRetry:this._handleFetch,render:this._renderResponsive}))},t}(l.Component),X=B.a.create((function(e){return{container:{flexGrow:1,alignItems:"center",justifyContent:"center"},userAvatar:{width:400,height:400,padding:e.spaces.small}}}));t.default=y(I)},UPvq:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));n("2G9S"),n("IAdD");var o=n("1Pcy"),a=n.n(o),i=n("W/Kd"),r=n.n(i),s=n("KEM+"),c=n.n(s),l=n("ERkP"),u=n("RCZO"),h=n("aWzz"),m=n("3XMw"),d=n.n(m),p=n("l2F/"),f=n.n(p),_=n("3xO4"),v=n.n(_),g=n("mw9i"),b=n("cm6r"),y=n("/yvb"),w=n("rHpw"),C=d.a.ia5e7487,E=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,c()(a()(t),"_handleCloseButtonPress",(function(e){e.stopPropagation(),(0,t.props.onCloseButtonPress)()})),c()(a()(t),"_handleBackgroundPress",(function(){var e=t.props.onCloseButtonPress;t.context.isModal&&e()})),t}return r()(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.children,o=t.backgroundColor,a=t.mediaItem,i=t.mediaUrl,r=t.hideButtons,s=t.topRightButton,c=t.footerButtons,h=t.overlayFooter,m=this.context.isModal,d=Object.assign({backgroundColor:o.rgba},u.a),p=Object.assign({backgroundColor:o.rgb},u.a),_=[P.root,m?d:p,{position:m?"relative":"fixed"}];return l.createElement(l.Fragment,null,l.createElement(v.a,{onClick:this._handleBackgroundPress,style:_},n,c?l.createElement(v.a,{pointerEvents:r?"none":void 0,style:[P.footerButtons,h&&d,h&&P.footerButtonsAbsolute,r&&P.fadeOut]},l.createElement(g.a,{withGutter:!0},c)):null),l.createElement(b.a,{accessibilityRole:"none",interactiveStyles:null,onClick:this._handleCloseButtonPress,pointerEvents:r?"none":void 0,style:[P.buttonWrapper,P.buttonWrapperLeft,u.a,r&&P.fadeOut]},(function(t){return l.createElement(y.a,{accessibilityLabel:C,dominantColor:o.rgb,icon:l.createElement(f.a,null),interactivityState:t,onClick:e._handleCloseButtonPress,type:a||i?"onMedia":"invertedPrimary"})})),s?l.createElement(v.a,{pointerEvents:r?"none":void 0,style:[P.buttonWrapper,P.buttonWrapperRight,u.a,r&&P.fadeOut]},s):null)},t}(l.Component);c()(E,"contextTypes",{isModal:h.bool}),c()(E,"defaultProps",{hideButtons:!1});var P=w.a.create((function(e){return{root:{overflowX:"hidden",overflowY:"hidden",height:"100%",width:"100%"},buttonWrapper:{position:"absolute",top:0,padding:e.spaces.xSmall,alignItems:"center",justifyContent:"center",cursor:"pointer"},buttonWrapperLeft:{left:0},buttonWrapperRight:{right:0},fadeOut:{opacity:0},footerButtons:{width:"100%",alignSelf:"center"},footerButtonsAbsolute:{position:"absolute",bottom:0,paddingBottom:w.a.iPhoneOffsetBottom,zIndex:1}}}))},ziVO:function(e,t,n){"use strict";n("2G9S"),n("IAdD");var o=n("1Pcy"),a=n.n(o),i=n("W/Kd"),r=n.n(i),s=n("KEM+"),c=n.n(s),l=n("ERkP"),u=n("3xO4"),h=n.n(u),m={startX:0,startY:0},d=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,c()(a()(t),"_pullDistanceY",0),c()(a()(t),"_pullInfo",Object.assign({},m)),c()(a()(t),"_handleTouchStart",(function(e){t._pullInfo.startX=e.touches[0].clientX,t._pullInfo.startY=e.touches[0].clientY})),c()(a()(t),"_handleTouchMove",(function(e){if("number"==typeof t._pullInfo.startX&&"number"==typeof t._pullInfo.startY){var n=e.touches[0],o=n.clientX-t._pullInfo.startX,a=n.clientY-t._pullInfo.startY;Math.abs(o)>10||(e.preventDefault(),t._updatePullPosition(a))}})),c()(a()(t),"_handleTouchEnd",(function(e){Math.abs(t._pullDistanceY)>50?t._handleDismiss():t._resetPullInfo()})),c()(a()(t),"_updatePullPosition",(function(e){t._pullDistanceY=e})),c()(a()(t),"_handleDismiss",(function(){var e=t.props.onDismiss;e&&e(),t._resetPullInfo()})),c()(a()(t),"_resetPullInfo",(function(){t._updatePullPosition(0),t._pullInfo=Object.assign({},m)})),t}return r()(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.onDismiss,o=e.onLayout,a=e.style,i=!!n;return l.createElement(h.a,{onLayout:o,onTouchEnd:i?this._handleTouchEnd:void 0,onTouchMove:i?this._handleTouchMove:void 0,onTouchStart:i?this._handleTouchStart:void 0,style:a},t)},t}(l.Component);t.a=d}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/web_legacy/bundle.UserAvatar.be164104.js.map