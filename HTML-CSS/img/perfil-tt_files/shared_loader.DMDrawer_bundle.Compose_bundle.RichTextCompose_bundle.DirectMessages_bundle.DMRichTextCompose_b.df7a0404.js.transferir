(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+/sI":function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return f}));n("M+/F"),n("Wd/2");var r=n("W/Kd"),a=n.n(r),i=n("ERkP"),o=n("kd3K"),s=n.n(o),c=n("t62R"),u=n("a6qo"),d=n("rHpw"),l="animated_gif",f="video",p=function(e){function t(){return e.apply(this,arguments)||this}return a()(t,e),t.prototype.render=function(){var e,t=this.props,n=t.durationInMilliseconds,r=t.type;if(r===l||"vine"===r)e=r===l?i.createElement(c.c,{weight:"bold"},"GIF"):i.createElement(s.a,{style:_.icon});else if(r===f&&n){var a=Math.trunc(n/6e4),o=("0"+Math.trunc(n%6e4/1e3)).slice(-2);e=i.createElement(c.c,{color:"white"},a+":"+o)}return e?i.createElement(u.a,{align:"left"},e):null},t}(i.PureComponent),_=d.a.create((function(e){return{icon:{color:e.colors.white}}}));t.c=p},"3A2y":function(e,t,n){"use strict";n("KOtZ"),n("+KXO");var r=n("zrOZ");t.a=function(e,t){var n=Object(r.a)(Array.isArray(t)?t:[t]);return Object.keys(e).reduce((function(t,r){return n.has(r)||(t[r]=e[r]),t}),{})}},"6OUF":function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));n("2G9S"),n("IAdD"),n("Blm6"),n("uFXj");var r=n("97Jx"),a=n.n(r),i=n("LdEA"),o=n.n(i),s=n("1Pcy"),c=n.n(s),u=n("W/Kd"),d=n.n(u),l=n("KEM+"),f=n.n(l),p=(n("aWzz"),n("ERkP")),_=n("t62R"),v=n("/yvb"),m=n("ZL4l"),b=n.n(m),y=n("oQhu"),h=n("rHpw"),E=n("ioan"),O=n("aITJ"),I=n("3xO4"),g=n.n(I),S=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,f()(c()(t),"_blurOnBackspaceKeyUpForKaiOS",!1),f()(c()(t),"state",{isFocused:!1}),f()(c()(t),"getContainerStyle",(function(){var e=t.props,n=e.styleType,r=e.multiline,a=e.invalid,i=t.state.isFocused;return"pill"===n?[!a&&!i&&T.transparent,!i&&D.fadedGrayColor,!r&&A.infinite,D.root,a&&T.invalid,!a&&i&&T.focused,i&&D.transparentColor,r&&A.round]:[T.none,D.root,D.fadedGrayColor]})),f()(c()(t),"_getTextInputStyle",Object(y.a)((function(e){return[C.root,e]}))),f()(c()(t),"_handleBlur",(function(e){var n=t.props.onBlur;t.setState({isFocused:!1}),n&&n(e)})),f()(c()(t),"_handleClear",(function(e){t.props.focusOnClear&&t.focus(),t._textInput&&t._textInput.clear()})),f()(c()(t),"_handleChange",(function(e){var n=t.props.onChange;t.state.isFocused||t.setState({isFocused:!0}),n&&n(e)})),f()(c()(t),"_handleFocus",(function(e){var n=t.props.onFocus;t.setState({isFocused:!0}),n&&n(e)})),f()(c()(t),"_handleKeyPress",(function(e){var n=t.props,r=n.multiline,a=n.onKeyPress,i=n.onSubmitEditing;a&&a(e),e.isDefaultPrevented()||"Enter"!==e.key||e.shiftKey||r||!i||(e.preventDefault(),i(e))})),f()(c()(t),"_handleKeyDown",(function(e){var n=t.props.onKeyDown,r=0===t.getValue().length;O.a.isKaiOS()&&"Backspace"===e.key&&r?t._blurOnBackspaceKeyUpForKaiOS=r:n&&n(e)})),f()(c()(t),"_handleKeyUp",(function(e){var n=t.props.onKeyUp;O.a.isKaiOS()&&"Backspace"===e.key&&t._blurOnBackspaceKeyUpForKaiOS&&(e.preventDefault(),t.blur()),n&&n(e)})),f()(c()(t),"_setTextInputRef",(function(e){t._textInput=e})),f()(c()(t),"_setRichTextInputRef",(function(e){t._richTextInput=e})),t}d()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.appTextSize,n=e.emojiPickerButton,r=e.onLayout,a=e.contentAbove,i=e.contentBelow,o=e.editable,s=e.style,c=e.richTextInputContext,u=e.withClearButton;return p.createElement(g.a,{onBlur:this._handleBlur,onFocus:this._handleFocus,onLayout:r,style:[this.getContainerStyle(),!o&&D.disabled,s]},a,p.createElement(g.a,{style:D.textInput},this._renderIcon(),p.createElement(_.c,{size:t,style:D.appText},c?this._renderRichTextInput():this._renderTextInput()),p.createElement(g.a,{style:[R.root,n&&R.withEmojiPicker]},this._renderCloseButton(),this._renderEmojiPicker(),u&&this._renderClearButton())),i)},n._renderIcon=function(){var e=this.props,t=e.Icon,n=e.iconStyle,r=this.state.isFocused,a=[j.root,r&&j.focused,n];return t?p.createElement(g.a,{style:R.leftIcon},p.createElement(t,{style:a})):null},n._renderTextInput=function(){var e=this.props,t=(e.Icon,e.appTextSize,e.focusOnClear,e.handleReturn,e.iconStyle,e.inputStyle),n=(e.invalid,e.keyCommandHandlers,e.onLayout,e.onSubmitEditing,e.closeButton,e.contentAbove,e.contentBelow,e.emojiPickerButton,e.richTextInputContext,e.style,e.styleType,e.withClearButton,o()(e,["Icon","appTextSize","focusOnClear","handleReturn","iconStyle","inputStyle","invalid","keyCommandHandlers","onLayout","onSubmitEditing","closeButton","contentAbove","contentBelow","emojiPickerButton","richTextInputContext","style","styleType","withClearButton"]));return p.createElement(p.Fragment,null,O.a.isEdge()?p.createElement("style",null,"input[type=text]::-ms-clear { display: none; }"):null,p.createElement(E.a,a()({},n,{onBlur:this._handleBlur,onChange:this._handleChange,onFocus:this._handleFocus,onKeyDown:this._handleKeyDown,onKeyPress:this._handleKeyPress,onKeyUp:this._handleKeyUp,placeholderTextColor:h.a.theme.colors.deepGray,ref:this._setTextInputRef,style:this._getTextInputStyle(t)})))},n._renderRichTextInput=function(){var e=this.props,t=e.ariaAutocomplete,n=e.ariaControls,r=e.ariaActiveDescendant,a=e.autoFocus,i=e.ariaLabel,o=e.inputStyle,s=e.keyCommandHandlers,c=e.numberOfLines,u=e.maxNumberOfLines,d=e.multiline,l=e.onFilesAdded,f=e.placeholder,_=e.positionCursorAtEnd,v=e.richTextInputContext,m=e.handleReturn,b=e.testID,y=v||{},h=y.dismissComposerCommandName,E=y.editorState,O=y.element,I=y.sendTweetCommandName,S=[C.root,C.rich];return O&&E?p.createElement(g.a,{style:[C.richContainer,o]},p.createElement(O,{ariaActiveDescendant:r,ariaAutocomplete:t,ariaControls:n,ariaLabel:i,autoFocus:a,dismissComposerCommandName:h,editorState:E,handleReturn:m,keyCommandHandlers:s,maxNumberOfLines:u,multiline:d,numberOfLines:c,onBlur:this._handleBlur,onChange:this._handleChange,onFilesAdded:l,onFocus:this._handleFocus,onKeyDown:this._handleKeyDown,onKeyPress:this._handleKeyPress,onKeyUp:this._handleKeyUp,placeholder:f,positionCursorAtEnd:_,ref:this._setRichTextInputRef,sendTweetCommandName:I,style:S,testID:b})):null},n._renderClearButton=function(){var e=p.createElement(v.a,{accessible:!1,icon:p.createElement(b.a,{style:x.icon}),onPress:this._handleClear,size:"smallCompact",style:x.root,type:"primary"});return this.getValue()?e:p.createElement(g.a,null)},n._renderEmojiPicker=function(){var e=this.props.emojiPickerButton;return e?p.createElement(g.a,null,e):null},n._renderCloseButton=function(){var e=this.props.closeButton;return e?p.createElement(g.a,{style:R.closeButton},e):null},n.applyFinalValue=function(e){var t=this;this.focus(),window.requestAnimationFrame((function(){t.blur(),e(t.getValue())}))},n.blur=function(){this._richTextInput&&this._richTextInput.blur(),this._textInput&&this._textInput.blur()},n.focus=function(){this._richTextInput&&this._richTextInput.focus(),this._textInput&&this._textInput.focus()},n.getValue=function(){var e=this.props,t=e.richTextInputContext,n=e.value;return t?this._richTextInput&&this._richTextInput.value()||n||"":this._textInput&&this._textInput.getValue()||n||""},n.getTextInputHeight=function(){var e=this.props.richTextInputContext,t=2*parseInt(h.a.theme.spaces.xSmall,10),n=2*parseInt(h.a.theme.borderWidths.small,10);return e?this._richTextInput&&this._richTextInput.getOffsetHeight()+t+n:this._textInput&&this._textInput.getOffsetHeight()+n},t}(p.Component);f()(S,"defaultProps",{appTextSize:"normal",autoComplete:"on",styleType:"pill",autoCorrect:!0,editable:!0,focusOnClear:!0,withClearButton:!1}),S.propTypes={};var A=h.a.create((function(e){return{infinite:{borderRadius:e.borderRadii.infinite},round:{borderRadius:"calc("+e.borderRadii.large+" + "+e.borderWidths.small+" * 2)"},none:{borderRadius:0}}})),T=h.a.create((function(e){return{transparent:{borderColor:e.colors.transparent,borderStyle:"solid",borderWidth:e.borderWidths.small},focused:{borderColor:e.colors.primary,borderStyle:"solid",borderWidth:e.borderWidths.small},invalid:{borderColor:e.colors.red,borderStyle:"solid",borderWidth:e.borderWidths.small},none:{borderWidth:0}}})),C=h.a.create((function(e){return{root:{backgroundColor:"transparent",borderRadius:0,borderWidth:0,boxSizing:"border-box",color:"inherit",outlineStyle:"none",fontFamily:"inherit",fontSize:"inherit",padding:e.spaces.xSmall,textAlign:"inherit"},richContainer:{width:"100%",padding:e.spaces.xSmall},rich:{padding:0}}})),j=h.a.create((function(e){return{root:{color:e.colors.deepGray,minWidth:e.spaces.large,paddingLeft:e.spaces.xSmall},focused:{color:e.colors.primary}}})),x=h.a.create((function(e){return{root:{borderWidth:0,marginRight:e.spaces.xSmall},icon:{width:"10px",height:"10px",color:e.colors.cellBackground}}})),R=h.a.create((function(e){return{root:{display:"flex",justifyContent:"center"},withEmojiPicker:{display:"flex",justifyContent:"flex-end",flexDirection:"column"},closeButton:{flexGrow:1},leftIcon:{display:"flex",justifyContent:"center"}}})),D=h.a.create((function(e){return{root:{flexDirection:"column",flexGrow:1,flexShrink:1,justifyContent:"center"},disabled:{cursor:"default",opacity:.8},fadedGrayColor:{backgroundColor:e.colors.fadedGray},transparentColor:{backgroundColor:"transparent"},textInput:{flexDirection:"row"},appText:{display:"flex",flexGrow:1}}}))},"7myi":function(e,t,n){"use strict";n("2G9S"),n("M+/F");var r=n("1Pcy"),a=n.n(r),i=n("W/Kd"),o=n.n(i),s=n("KEM+"),c=n.n(s),u=n("ERkP"),d=n("oEoC"),l=n("2dXj"),f=n("GZwR"),p=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,c()(a()(t),"_genericWrapperRef",u.createRef()),c()(a()(t),"state",{queryContext:void 0,canShowTypeahead:!1}),c()(a()(t),"render",(function(){var e=t.props,n=e.contextText,r=e.children,a=e.isInline,i=e.onTypeaheadStateChange,o=e.source,s=t.state,c=s.queryContext,d=s.canShowTypeahead&&c?{word:c.word,resultType:c.resultType}:void 0;return u.createElement(l.a,{componentRef:t._genericWrapperRef,contextText:n,isInline:a,onDismiss:t._handleDismiss,onSelectItem:t._handleSelectItem,onTypeaheadStateChange:i,query:d,source:o||f.d.Compose},r(t._handleInputChange))})),c()(a()(t),"_handleSelectItem",(function(e){var n=t.props.onTextUpdated,r=t.state.queryContext;if(r){var a="users"===r.resultType&&"user"===e.type?"@"+e.data.screen_name+" ":(e.data.topic||e.data.text||"")+" ",i=t._replaceToken(a,r),o=i.newCursor,s=i.newTweetText;n({target:{value:s}}),t._updateDOMTextArea(o,s)}t._setQueryContext(void 0)})),c()(a()(t),"_updateDOMTextArea",(function(e,n){t._textAreaRef&&(t._textAreaRef.value=n,t._textAreaRef.selectionStart=e,t._textAreaRef.selectionEnd=e,t._textAreaRef.focus())})),c()(a()(t),"_handleInputChange",(function(e){var n=e&&(e.currentTarget||e.target),r=t.state.queryContext;t._textAreaRef=n;var a=r&&r.word,i=n.value,o=d.c(n.selectionStart,i),s=o.word,c=o.start,u=d.d(s||"","compose");if((null==u?void 0:u.q)!==a)if(t._genericWrapperRef.current&&t._genericWrapperRef.current.resetSelectedItem(),-1===c)t._setQueryContext(void 0);else if(u){var l=u.q,f=u.result_type;t._setQueryContext({word:l,resultType:f,cursorPosition:n.selectionStart,fullText:n.value,startIndex:c})}else t._setQueryContext(void 0)})),c()(a()(t),"_setQueryContext",(function(e){return t.setState({queryContext:e,canShowTypeahead:!!e})})),c()(a()(t),"_handleDismiss",(function(){return t.setState({canShowTypeahead:!1})})),t}return o()(t,e),t.prototype._replaceToken=function(e,t){var n=t.fullText,r=t.startIndex,a=n.slice(0,r),i=t.cursorPosition;return{newTweetText:a+e+n.slice(i),newCursor:a.length+e.length}},t}(u.Component);t.a=p},KqB4:function(e,t,n){"use strict";var r=n("IGGJ");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=[],r=(0,a.default)(e,t),i=0;i<r.length;i++)n.push(r[i].url);return n};var a=r(n("vwfs"));e.exports=t.default},LfYE:function(e,t,n){e.exports=n.p+"twemoji_sprite_high_res.043c66d4.png"},MLl7:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i}));n("vrRf"),n("yH/f"),n("1IsZ");var r=Object.freeze({Composition:"composition",DMComposition:"dm_composition"}),a=function(e){return Object.values(r).indexOf(e)>=0},i=function(e,t){return"boolean"==typeof e?e:t}},VPdC:function(e,t,n){"use strict";n.d(t,"b",(function(){return R}));n("2G9S"),n("7xRU");var r=n("97Jx"),a=n.n(r),i=n("LdEA"),o=n.n(i),s=n("W/Kd"),c=n.n(s),u=n("KEM+"),d=n.n(u),l=n("ERkP"),f=n("3XMw"),p=n.n(f),_=n("04FZ"),v=n.n(_),m="fileInput",b=n("sjK1"),y=n("1Pcy"),h=n.n(y),E=n("/yvb"),O=n("7DT3"),I=n.n(O),g=n("rHpw"),S=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,d()(h()(t),"_handlePress",(function(e){var n=t.props.onPress;n&&n(e),t._fileInput&&t._fileInput.click()})),d()(h()(t),"_handleChange",(function(e){var n=t.props.onChange,r=e.target,a=r.files;a.length&&n&&n(a),r.value=""})),d()(h()(t),"_handleFileInputButtonRef",(function(e){t._fileInput=e})),t}return c()(t,e),t.prototype.render=function(){var e=this.props,t=e.accept,n=e.disabled,r=e.multiple,i=(e.onChange,e.testID),s=o()(e,["accept","disabled","multiple","onChange","testID"]);return l.createElement(l.Fragment,null,l.createElement(E.a,a()({},s,{disabled:n,onPress:this._handlePress})),I()("input",{accept:t,disabled:n,multiple:r,onChange:this._handleChange,ref:this._handleFileInputButtonRef,style:A.input,tabIndex:-1,testID:i,type:"file"}))},t}(l.Component);d()(S,"defaultProps",{disabled:!1,multiple:!1});var A=g.a.create((function(e){return{input:{width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1}}})),T=S,C=n("9HgX"),j=p.a.b9960f31,x=l.createElement(v.a,null),R=function(e){var t=e.acceptGifs,n=e.acceptVideo;return C.b.concat(t?[C.a]:[]).concat(n?b.a:[])},D=function(e){function t(){return e.apply(this,arguments)||this}return c()(t,e),t.prototype.render=function(){var e=this.props,t=e.acceptGifs,n=e.acceptVideo,r=e.style,i=o()(e,["acceptGifs","acceptVideo","style"]),s=R({acceptGifs:t,acceptVideo:n}).join(",");return l.createElement(T,a()({},i,{accept:s,style:[N.root,r],testID:m}))},t}(l.PureComponent);d()(D,"defaultProps",{acceptGifs:!0,acceptVideo:!0,accessibilityLabel:j,icon:x,size:"normal"});var N=g.a.create((function(e){return{root:{margin:"-"+e.spaces.xSmall}}}));t.a=D},VnFT:function(e,t,n){"use strict";n.d(t,"n",(function(){return C})),n.d(t,"m",(function(){return x})),n.d(t,"f",(function(){return D})),n.d(t,"d",(function(){return M})),n.d(t,"g",(function(){return w})),n.d(t,"e",(function(){return L})),n.d(t,"i",(function(){return B})),n.d(t,"j",(function(){return F})),n.d(t,"l",(function(){return k})),n.d(t,"h",(function(){return V})),n.d(t,"k",(function(){return G})),n.d(t,"a",(function(){return q})),n.d(t,"o",(function(){return z})),n.d(t,"b",(function(){return Q})),n.d(t,"c",(function(){return J}));n("2G9S"),n("lTEL"),n("7xRU"),n("IAdD"),n("+KXO"),n("7x/C"),n("1IsZ"),n("JtPf"),n("DZ+c"),n("87if"),n("kYxP");var r,a=n("RhWx"),i=n.n(a),o=n("LdEA"),s=n.n(o),c=n("AspN"),u=n("xPna"),d=n("jxu1"),l=n("oEOe"),f=n("xCUF"),p=n("ude7"),_=n("gpVt"),v=n("Ssj5"),m=n("fEA7"),b=n.n(m),y=n("uKEd"),h=n("lnti"),E=n("/NU0"),O=function(e){return"rweb/multiDraftDMs/"+e},I={};var g=function(e){var t=e.conversation_id,n=e.id,r=e.recipient_ids,a=e.sender_id,i=e.text,o=e.attachment,s=void 0===o?{}:o,c=e.error,u=Date.now().toString();return{conversation_id:t,recipient_ids:r,error:c,id:n,isEmojiOnly:!!(!s.photo&&!s.animated_gif)&&Object(d.a)({text:i}),is_draft:!0,message_data:{attachment:s,sender_id:a,text:i,time:u},type:"message",time:u}},S=O("SEND_MESSAGE_REQUEST"),A=O("SEND_MESSAGE_SUCCESS"),T=O("SEND_MESSAGE_FAILURE"),C=function(e){return function(t,n,r){var a=r.api,o=e||{},d=o.senderId,v=o.cardUrl,m=o.conversationId,O=o.recipients,I=void 0===O?[]:O,C=o.requestId,j=void 0===C?b.a.v1():C,x=o.tweetAttachment,R=o.quickReply,D=s()(o,["senderId","cardUrl","conversationId","recipients","requestId","tweetAttachment","quickReply"]);t($(m));var N=n(),w=U(n(),m),P=(c.g(N,w)[0]||{}).mediaFile,L=I.length>0&&I.join(","),B={};P&&P.isGif?B.extraInitParams="&media_category=dm_gif":P&&P.isVideo&&(B.extraInitParams="&media_category=dm_video");var F=c.k(w,B),k=[t(F)],K=(V(N,m)||{}).found_media_origin,q=G(N,m);return P&&P.isGif&&k.push(Object(p.a)(P)),Promise.all(k).then((function(n){var r=n[0][0],o=n[1],s=q&&Object.keys(q).length&&q[r.id]&&(q[r.id].altText||q[r.id].defaultAltText),p=!!s;return(r&&(K||p)?t(c.i(Object.assign({media_id:r.uploadId,found_media_origin:K},!!p&&{alt_text:{text:s}}))):Promise.resolve()).then((function(){var n=(x||{}).id_str,s={};if(r){var c=r.mediaFile,p=void 0===c?{}:c,b={original_info:{width:p.width,height:p.height},sizes:[{h:p.height,w:p.width,resize:"fit"}]};p.isImage?s.photo=Object.assign({},b,{media_url_https:p.url}):p.isGif?s.animated_gif=Object.assign({},b,{media_url_https:o,type:"animated_gif"}):p.isVideo&&(s.video=Object.assign({},b,{media_url_https:p.url,type:"video"}))}else x&&(s.tweet={status:n});var O=(r||{}).uploadId,I=g({attachment:s,conversation_id:m,id:j,recipient_ids:L,sender_id:d,text:e.text}),C=Object.assign({},D,Object(_.c)(v)&&{card_uri:v},{conversation_id:m,media_id:O,recipient_ids:L,request_id:j,tweet_id:n});R&&(C["quick_reply_response[options][id]"]=R.id,C["quick_reply_response[options][selected_id]"]=R.selected_id);var N=Object(h.a)([te(m),{type:f.c.REQUEST},{type:S},m&&Object(y.b)(m,j,I)]);return t(N),a.DirectMessages.sendMessage(C).then((function(n){var r=n.entities,a=r.entries,o=r.users,s=r.tweets,c=r.cards,d=n.result.conversations;Object(E.a)(w)&&t(J(m,w));var l=Object(h.a)([{type:f.c.SUCCESS}].concat(i()(Object(u.b)({conversations:d,entries:a,users:o,tweets:s,cards:c})),[{type:A},m&&Object(y.j)(m,j,e),M(m)]));return t(l),Promise.resolve(Object.values(n.entities.entries)[0].conversation_id)}),(function(n){var r=g({attachment:s,conversation_id:m,error:!0,id:j,recipient_ids:L,sender_id:d,text:e.text}),a=Object(h.a)([{type:f.c.SUCCESS},{type:T},m&&Object(y.b)(m,j,r)]);return t(a),Object(l.e)(t,n,"ACTION_SEND_DM")}))}),(function(e){return t(re(m)),e.type="metadata",Promise.reject(e)}))}),(function(e){return t(Object(h.a)([Object(E.a)(w)&&J(m,w),re(m)])),Promise.reject(e)}))}},j=function(e,t){return e.multiDraftDMs[t]},x=function(e,t){var n=j(e,t);return n?n.text:null},R=O("SAVE_TEXT"),D=function(e,t){return{type:R,conversationId:e,text:t}},N=O("REMOVE_TEXT"),M=function(e){return{type:N,conversationId:e}},w=function(e,t){var n=j(e,t);return n?n.cardUrl:null},P=O("SAVE_CARD_URL"),L=function(e,t){return{type:P,conversationId:e,cardUrl:t}},U=function(e,t){var n=j(e,t);return n?n.mediaId:null},B=function(e,t){var n=c.g(e,U(e,t));return n.length>0?n[0]:null},F=function(e,t){var n=j(e,t);return!!n&&n.isUploading},k=function(e,t){return c.h(e,U(e,t))},V=function(e,t){var n=j(e,t);return n?n.gifMetadata:null},G=function(e,t){var n=j(e,t);return n?n.mediaMetadata:void 0},K=O("ADD_MEDIA"),q=function(e,t,n,r){return{payload:{isUploading:!1,mediaId:t[0],gifMetadata:n,mediaMetadata:r},type:K,conversationId:e}},W=O("UPDATE_MEDIA_METADATA"),z=function(e,t){return{payload:t,type:W,conversationId:e}},H=O("CANCEL_UPLOAD"),Q=function(e){return{type:H,conversationId:e}},X=O("REMOVE_MEDIA"),Z=function(e){return{type:X,conversationId:e}},J=function(e,t){return function(n){n(c.e(t)),n([Q(e),Z(e)])}},Y=O("UPLOAD_REQUEST"),$=function(e){return{type:Y,conversationId:e}},ee=O("UPLOAD_SUCCESS"),te=function(e){return{type:ee,conversationId:e}},ne=O("UPLOAD_FAILURE"),re=function(e){return{type:ne,conversationId:e}};v.a.register(((r={}).multiDraftDMs=function(e,t){void 0===e&&(e=I);var n=t.conversationId||"new_group";switch(t.type){case W:case K:var r,a=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaMetadata:void 0,mediaId:null,text:null};return Object.assign({},e,((r={})[n]=Object.assign({},a,t.payload),r));case Y:var i,o=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaMetadata:void 0,mediaId:null,text:null};return Object.assign({},e,((i={})[n]=Object.assign({},o,{isUploading:!0}),i));case H:var s,c=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaMetadata:void 0,mediaId:null,text:null};return Object.assign({},e,((s={})[n]=Object.assign({},c,{isUploading:!1}),s));case ne:case ee:case X:var u,d=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaMetadata:void 0,mediaId:null,text:null};return Object.assign({},e,((u={})[n]=Object.assign({},d,{isUploading:!1,mediaId:null,mediaMetadata:void 0,gifMetadata:void 0}),u));case R:var l,f=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaMetadata:void 0,mediaId:null,text:null};return Object.assign({},e,((l={})[n]=Object.assign({},f,{text:t.text}),l));case P:var p,_=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaMetadata:void 0,mediaId:null,text:null};return Object.assign({},e,((p={})[n]=Object.assign({},_,{cardUrl:t.cardUrl}),p));case N:var v,m=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaMetadata:void 0,mediaId:null,text:null};return Object.assign({},e,((v={})[n]=Object.assign({},m,{text:null}),v));default:return e}},r))},WVrH:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n("AQ79"),a=Object(r.c)("RESET"),i=function(){return{type:a}}},ZL4l:function(e,t,n){"use strict";n("IAdD"),t.__esModule=!0,t.default=void 0;var r=o(n("7DT3")),a=o(n("ERkP")),i=o(n("OkZJ"));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){return void 0===e&&(e={}),(0,r.default)("svg",Object.assign({},e,{style:[i.default.root,e.style],viewBox:"0 0 15 15"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M8.914 7.5l5.793-5.793c.39-.39.39-1.023 0-1.414s-1.023-.39-1.414 0L7.5 6.086 1.707.293c-.39-.39-1.023-.39-1.414 0s-.39 1.023 0 1.414L6.086 7.5.293 13.293c-.39.39-.39 1.023 0 1.414.195.195.45.293.707.293s.512-.098.707-.293L7.5 8.914l5.793 5.793c.195.195.45.293.707.293s.512-.098.707-.293c.39-.39.39-1.023 0-1.414L8.914 7.5z"})))};s.metadata={height:15,width:15};var c=s;t.default=c},aLgo:function(e,t,n){n("aokA")("iterator")},aWyx:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return o}));n("yH/f");var r=Object.freeze({ONE_TO_ONE:"ONE_TO_ONE",GROUP:"GROUP_DM"}),a=Object.freeze({AT_END:"AT_END",HAS_MORE:"HAS_MORE"}),i=Object.freeze({CONVERSATION_AVATAR_UPDATE:"conversation_avatar_update",CONVERSATION_NAME_UPDATE:"conversation_name_update",CONVERSATION_PROFILE_INFO_HEADER:"conversation_profile_info_header",CONVERSATION_READ:"conversation_read",DISABLE_NOTIFICATIONS:"disable_notifications",ENABLE_NOTIFICATIONS:"enable_notifications",JOIN_CONVERSATION:"join_conversation",MARK_ALL_AS_READ:"mark_all_as_read",MENTION_NOTIFICATIONS_UPDATE:"mention_notifications_setting_update",MESSAGE:"message",MESSAGE_DELETE:"message_delete",MESSAGE_MARK_AS_NOT_SPAM:"message_unmark_as_spam",MESSAGE_MARK_AS_SPAM:"message_mark_as_spam",PARTICIPANTS_JOIN:"participants_join",PARTICIPANTS_LEAVE:"participants_leave",REACTION_CREATE:"reaction_create",REACTION_DELETE:"reaction_delete",READ_ONLY_INDICATOR:"read_only_indicator",REMOVE_CONVERSATION:"remove_conversation",TRUST_CONVERSATION:"trust_conversation",TYPING_INDICATOR:"typing_indicator",WELCOME_MESSAGE:"welcome_message_create"}),o=Object.freeze({MUTUAL_FRIENDS:"mutual_friends"})},cIoY:function(e,t,n){"use strict";var r=n("ERkP"),a=n("1YZw"),i=n("rxPX"),o=Object(i.a)().propsFromActions((function(){return{addToast:a.b}})),s=(n("ho0z"),n("uFXj"),n("1Pcy")),c=n.n(s),u=n("W/Kd"),d=n.n(u),l=n("KEM+"),f=n.n(l),p=(n("1t7P"),n("jQ/y"),n("2G9S"),n("hBvt"),n("7DT3")),_=n.n(p),v=n("3XMw"),m=n.n(v),b=n("sgih"),y=n("t62R"),h=n("/yvb"),E=n("rHpw"),O=m.a.cfd2f35d,I=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,f()(c()(t),"_handleOnFocus",(function(e){e.currentTarget.select()})),t}return d()(t,e),t.prototype.render=function(){var e=this.props,t=e.cancelButtonLabel,n=e.description,a=e.headerText,i=e.link,o=e.onCancel,s=_()("input",{autoFocus:!0,onFocus:this._handleOnFocus,readOnly:!0,style:g.linkInput,value:i});return r.createElement(b.a,{onMaskClick:o,style:g.container,type:"center",withMask:!0},a&&r.createElement(y.c,{align:"center",color:"normal",style:g.headerText,weight:"bold"},a),n&&r.createElement(y.c,{align:"center",color:"deepGray",style:g.labelText},n),s,r.createElement(h.a,{onPress:o,size:"normalLarge",style:g.cancelButton,type:"text"},t))},t}(r.Component);f()(I,"defaultProps",{cancelButtonLabel:O});var g=E.a.create((function(e){return{container:{alignItems:"center",backgroundColor:e.colors.cellBackground,paddingVertical:e.spaces.large,paddingHorizontal:e.spaces.xSmall,position:"relative"},headerText:{marginBottom:e.spaces.small},labelText:{marginBottom:e.spaces.small,width:"100%"},linkInput:{backgroundColor:e.colors.faintGray,borderColor:"transparent",color:e.colors.deepGray,fontSize:e.fontSizes.normal,marginBottom:e.spaces.xSmall,paddingVertical:e.spaces.xSmall,paddingHorizontal:e.spaces.medium},cancelButton:{width:"100%"}}})),S=I,A=n("Uwiv"),T=n.n(A),C=n("mjJ+"),j=n("cm6r"),x=n("8aq1"),R=n.n(x),D=n("D4le"),N=n.n(D),M=m.a.e05c00b4,w=m.a.eabf2209,P=m.a.a613e72f,L=m.a.f88553c8,U={riffsy:"https://abs.twimg.com/a/1501527574/img/t1/icon_riffsy.png",giphy:"https://abs.twimg.com/a/1501527574/img/t1/icon_giphy.png"},B=function(e){function t(t){var n;return n=e.call(this,t)||this,f()(c()(n),"_renderMenu",(function(e){return r.createElement(C.a,{items:[{text:P,Icon:T.a,onClick:n._handleCopyGifLinkButtonClick}],onCloseRequested:e})})),f()(c()(n),"_handleCopyGifLinkButtonClick",(function(e){var t=n.props,r=t.addToast,a=t.gifUrl;R.a.isAvailable()?(R.a.setString(a),r({text:L})):n.setState({showCopyLinkSheet:!0}),e&&e()})),f()(c()(n),"_handleCopyLinkSheetCancel",(function(){n.setState({showCopyLinkSheet:!1})})),n.state={showCopyLinkSheet:!1},n}d()(t,e);var n=t.prototype;return n.render=function(){var e=this.state.showCopyLinkSheet,t=this.props,n=t.provider,a=t.gifUrl,i=n.display_name,o=n.name,s=U[o];return s?r.createElement(r.Fragment,null,e?r.createElement(S,{description:w({providerName:i}),headerText:M,link:a,onCancel:this._handleCopyLinkSheetCancel}):null,r.createElement(y.c,{align:"center",color:"deepGray",style:F.root},r.createElement(m.a.I18NFormatMessage,{$i18n:"e2e6ea0d"},this._renderAttribution(i,s)))):null},n._renderAttribution=function(e,t){return r.createElement(j.a,{interactiveStyles:null,renderMenu:this._renderMenu},r.createElement(y.c,{weight:"bold",withInteractiveStyling:!0},r.createElement(N.a,{source:{uri:t},style:F.image}),r.createElement(y.c,{color:"normal"},e.toUpperCase())))},t}(r.PureComponent),F=E.a.create((function(e){return{button:{marginLeft:e.spaces.xSmall},image:{display:"inline-block",height:e.spaces.small,marginHorizontal:e.spaces.xxSmall,width:e.spaces.small},root:{marginHorizontal:e.spaces.xSmall}}})),k=B,V=o((function(e){var t=e.addToast,n=e.provider,a=e.gifUrl;return r.createElement(k,{addToast:t,gifUrl:a,provider:n})}));t.a=V},gpVt:function(e,t,n){"use strict";n.d(t,"b",(function(){return P})),n.d(t,"c",(function(){return L}));n("jwue"),n("z84I"),n("ho0z"),n("+oxZ");var r=n("1Pcy"),a=n.n(r),i=n("W/Kd"),o=n.n(i),s=n("KEM+"),c=n.n(s),u=n("ERkP"),d=(n("1t7P"),n("jQ/y"),n("aLgo"),n("hCOa"),n("lTEL"),n("M+/F"),n("7x/C"),n("DZ+c"),n("87if"),n("kYxP"),n("ge3j")),l=n("VnFT"),f=n("vjRr"),p=n("rxPX");function _(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=function(e,t){for(var n,r,a=_(t.urls);!(r=a()).done;){var i=r.value;if(n=f.a.select(e,i))break}return n},b=Object(p.a)().propsFromState((function(){return{card:m}})).propsFromActions((function(){return{fetchCardPreviewIfNeeded:f.a.fetchCardPreviewIfNeeded,updateDMComposer:l.e,updateTweetComposer:d.w}})),y=n("KqB4"),h=n.n(y),E=n("NnR4"),O=n("3XMw"),I=n.n(O),g=n("l2F/"),S=n.n(g),A=n("v6aA"),T=n("cnVF"),C=n("3xO4"),j=n.n(C),x=n("/yvb"),R=n("rHpw"),D=n("VY6S"),N=n("mN6z"),M=I.a.f6fec9f6,w=/^https?:\/\//i,P=function(e){var t=h()(e);if(t.length)return t.map((function(e){return!w.test(e)&&"http://"+e||e}))},L=function(e){return e===T.t},U=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,c()(a()(r),"_fetchCardPreviewIfNeeded",(function(){var e=r.props,t=e.fetchCardPreviewIfNeeded;e.urls.forEach((function(e){t(e)}))})),c()(a()(r),"_handleCardPreviewDismissal",(function(e){return r._updateSingleComposer({cardUrl:T.t})})),c()(a()(r),"_updateSingleComposer",(function(e){var t=r.props,n=t.conversationId,a=t.index,i=t.updateDMComposer,o=t.updateTweetComposer,s=(e||{}).cardUrl;r._isDMComposer?n&&i(n,s):o({updates:{cardUrl:s},index:a})})),r._debouncedFetchCardPreview=Object(D.a)(r._fetchCardPreviewIfNeeded,1e3),r._isDMComposer=!!t.conversationId,r}o()(t,e);var n=t.prototype;return n.componentDidMount=function(){this._debouncedFetchCardPreview()},n.componentDidUpdate=function(e){var t,n=this.props,r=n.card,a=n.urls;Object(N.a)(e.urls,a)||this._debouncedFetchCardPreview(),(null===(t=e.card)||void 0===t?void 0:t.url)===(null==r?void 0:r.url)||this._isDMComposer||this._updateSingleComposer({cardUrl:null==r?void 0:r.url})},n.componentWillUnmount=function(){this._updateSingleComposer()},n.render=function(){var e=this.props,t=e.card,n=e.isCardPreviewTombstoned,r=e.style,a=this.context.loggedInUserId;return t&&!n?u.createElement(j.a,{style:r},u.createElement(E.a,{card:{name:t.name,url:t.url,binding_values:t.hw_card_binding_values||{}},cardContext:{tweetUserId:a},isInteractive:!1}),u.createElement(x.a,{accessibilityLabel:M,icon:u.createElement(S.a,null),onPress:this._handleCardPreviewDismissal,size:"small",style:B.closeButton,type:"onMedia"})):null},t}(u.Component);c()(U,"contextType",A.a);var B=R.a.create((function(e){return{closeButton:{position:"absolute",top:e.spaces.xxSmall,left:e.spaces.xxSmall}}})),F=b(U);t.a=F},jtO7:function(e,t,n){"use strict";n("uFXj");var r=n("97Jx"),a=n.n(r),i=n("LdEA"),o=n.n(i),s=n("ERkP"),c=n("t62R"),u=n("I4+6"),d=n("cm6r"),l=n("rHpw"),f=n("3xO4"),p=n.n(f),_=l.a.create((function(e){return{container:{backgroundColor:e.colors.cellBackground},root:{justifyContent:"center",minHeight:e.spaces.xxLarge,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.small},bottomBorder:{borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:1}}}));t.a=function(e){var t=e.align,n=void 0===t?"center":t,r=e.color,i=e.label,f=e.withBottomBorder,v=void 0===f||f,m=o()(e,["align","color","label","withBottomBorder"]),b=u.a.generate({backgroundColor:l.a.theme.colors.transparent,color:l.a.theme.colors[r],insetFocusRing:!0}),y=[_.root,v&&_.bottomBorder];return s.createElement(p.a,{style:_.container},s.createElement(d.a,a()({},m,{interactiveStyles:b,style:y}),s.createElement(c.c,{align:n,color:r},i)))}},kIAd:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n("0vv5"),a=500,i={scoper:[{type:"dmUserSearch",regexp:/^[@＠]?(.*)|^$/,srcInputs:["compose_message"],scope:{result_type:"users",count:20}},{type:"username",regexp:/^[@＠](\w{1,20})/,srcInputs:["compose"],scope:{result_type:"users",count:20}},{type:"hashtag",regexp:n.n(r).a,srcInputs:["compose"],scope:{result_type:"topics",count:20}},{type:"topic",regexp:/(.+)/,srcInputs:["search_box"],scope:{result_type:"all"}},{type:"ttt",regexp:/(.+)/,srcInputs:["welcome_flow"],scope:{count:10,result_type:"topics,ttt"}}],WordBoundary:/[!'%&'()*+,\\\-./:;<=>?[\]^{|}~\s]|$/,WordEnd:/[^!'%&'()*+,\\\-./:;<=>?[\]^{|}~\s]+$/}},krmn:function(e,t,n){"use strict";var r=n("ERkP"),a=(n("7x/C"),n("JtPf"),n("zb92")),i=n("RuTB"),o=n("3XMw"),s=n.n(o),c=Object(a.a)({loader:function(){return s.a.emoji.then((function(){return Promise.all([n.e(2),n.e(14),n.e(211)]).then(n.bind(null,"5RdJ"))}))},renderPlaceholder:function(e,t){return r.createElement(i.a,{error:e,onRetry:t})}}),u=n("rrSi"),d=n.n(u),l=n("LfYE"),f=n.n(l),p=n("rHpw"),_=n("D4le"),v=n.n(_),m=n("S9L7"),b=n.n(m),y=n("3xO4"),h=n.n(y),E=p.a.create((function(e){return{content:{backgroundColor:e.colors.cellBackground},dimensions:{height:"400px",borderRadius:e.borderRadii.large,minWidth:"calc("+e.spaces.large+" * 9 + 2 * "+e.spaces.xSmall+")"},hidden:{display:"none"}}})),O=function(e){var t=e.partialRender,n=e.onSelect,a=b.a.get()>1?f.a:d.a;return r.createElement(r.Fragment,null,r.createElement(h.a,{style:[E.content,E.dimensions]},r.createElement(c,{onSelect:n,partialRender:t,rowSize:9,spriteUrl:a})),r.createElement(v.a,{source:a,style:E.hidden}))},I=n("EvIa"),g=n.n(I),S=n("2ZFc"),A=n("OiMc"),T=n("/yvb"),C=s.a.d4a4842d,j=r.createElement(g.a,null),x=function(e){var t=e.disabled,n=e.onEmojiSelect,a=e.onPress,i=e.size,o=e.style,s=e.textInputRef,u=r.useState(!0),d=u[0],l=u[1];r.useEffect((function(){setTimeout((function(){c.preload(),S.a.get("emojiPicker2")}),5e3)}),[]);return r.createElement(A.a,{enableEnterKeyToggle:!0,onAnimateComplete:function(){return l(!1)},onDismiss:function(){return l(!0)},onHoverCardUnmount:function(){window.requestAnimationFrame((function(){return s&&s.focus()}))},renderContent:function(){return r.createElement(O,{onSelect:n,partialRender:d})},withArrow:!0},r.createElement(T.a,{accessibilityLabel:C,"aria-haspopup":"true",disabled:t,icon:j,onPress:function(e){return a&&a(e)},size:i,style:o,type:"text"}))};x.defaultProps={disabled:!1,size:"small"};t.a=x},lRnM:function(e,t,n){"use strict";n.d(t,"f",(function(){return k})),n.d(t,"t",(function(){return G})),n.d(t,"x",(function(){return K})),n.d(t,"y",(function(){return q})),n.d(t,"B",(function(){return z})),n.d(t,"A",(function(){return H})),n.d(t,"z",(function(){return Q})),n.d(t,"u",(function(){return X})),n.d(t,"v",(function(){return Z})),n.d(t,"w",(function(){return J})),n.d(t,"d",(function(){return Y})),n.d(t,"k",(function(){return $})),n.d(t,"l",(function(){return ee})),n.d(t,"n",(function(){return te})),n.d(t,"m",(function(){return ne})),n.d(t,"a",(function(){return re})),n.d(t,"o",(function(){return ae})),n.d(t,"c",(function(){return oe})),n.d(t,"p",(function(){return ce})),n.d(t,"q",(function(){return ue})),n.d(t,"I",(function(){return de})),n.d(t,"s",(function(){return fe})),n.d(t,"D",(function(){return _e})),n.d(t,"h",(function(){return ve})),n.d(t,"j",(function(){return me})),n.d(t,"g",(function(){return be})),n.d(t,"i",(function(){return ye})),n.d(t,"J",(function(){return he})),n.d(t,"G",(function(){return Ee})),n.d(t,"H",(function(){return Oe})),n.d(t,"F",(function(){return ge})),n.d(t,"b",(function(){return Ae})),n.d(t,"r",(function(){return Ce})),n.d(t,"E",(function(){return xe})),n.d(t,"C",(function(){return Re})),n.d(t,"e",(function(){return De}));n("1t7P"),n("jQ/y"),n("gqY9"),n("2G9S"),n("lTEL"),n("7xRU"),n("z84I"),n("KOtZ"),n("HUPx"),n("ho0z"),n("6U7i"),n("IAdD"),n("ZVkB"),n("+KXO"),n("7x/C"),n("1IsZ"),n("JtPf"),n("kYxP");var r=n("LdEA"),a=n.n(r),i=n("RhWx"),o=n.n(i),s=n("oEOe"),c=n("AspN"),u=n("RqPI"),d=n("AQ79"),l=n("/kEJ"),f=n("xPna"),p=n("pXBW"),_=n("hqKg"),v=n("k49u"),m=n("/NU0"),b=n("aWyx"),y=n("WVrH"),h=n("uKEd"),E=n("k6jb"),O=n("kGix"),I=n("t0aI");function g(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var S=s.a(d.b,"ACCEPT_CONVERSATION"),A=s.a(d.b,"ADD_PARTICIPANTS"),T=s.a(d.b,"FETCH_CONVERSATION"),C=s.a(d.b,"FETCH_CONVERSATION_FROM_PARTICIPANTS"),j=s.a(d.b,"LEAVE_CONVERSATION"),x=s.a(d.b,"MARK_CONVERSATION_READ"),R=s.a(d.b,"DISABLE_MENTION_CONVERSATION_NOTIFICATIONS"),D=s.a(d.b,"DISABLE_CONVERSATION_NOTIFICATIONS"),N=s.a(d.b,"ENABLE_MENTION_CONVERSATION_NOTIFICATIONS"),M=s.a(d.b,"ENABLE_CONVERSATION_NOTIFICATIONS"),w=s.a(d.b,"UPDATE_CONVERSATION_NAME"),P=s.a(d.b,"UPLOAD_MEDIA"),L=s.a(d.b,"UPDATE_GROUP_AVATAR"),U=function(e){return(new Date).getTime()+36e5*e},B=[void 0,U(1),U(8),U(168)],F={};function k(e,t){var n,r,i,s,c,u,d,l,f,p,_,v,m;switch(void 0===e&&(e=F),t.type){case S.SUCCESS:var b,h=t.meta.conversationId,C=e[h];return Object.assign({},e,((b={})[h]=Object.assign({},C,{data:Object.assign({},C.data,{trusted:!0})}),b));case ie:var L=Object.entries(t.payload||{}).reduce((function(t,n){var r,a=n[0],i=n[1];return t[a]=Object.assign({},V(e[a],i),{fetchStatus:(r={},r[E.a]=O.a.LOADED,r[E.b]=O.a.LOADED,r)}),t}),{});return Object.assign({},e,L);case A.REQUEST:var U,k,G=t.meta.conversationId,K=e[G];return Object.assign({},e,((k={})[G]=Object.assign({},K,{fetchStatus:Object.assign({},K.fetchStatus,(U={},U[E.b]=O.a.LOADING,U))}),k));case A.FAILURE:var q,W,z=t.meta.conversationId,H=e[z];return Object.assign({},e,((W={})[z]=Object.assign({},H,{fetchStatus:Object.assign({},H.fetchStatus,(q={},q[E.b]=O.a.FAILED,q))}),W));case A.SUCCESS:var Q,X,Z=t.meta.conversationId,J=e[Z],Y=J.data.participants,$=t.payload.entities.entries?Object.values(t.payload.entities.entries)[0].participants:[];return Object.assign({},e,((X={})[Z]=Object.assign({},J,{fetchStatus:Object.assign({},J.fetchStatus,(Q={},Q[E.b]=O.a.LOADED,Q)),data:Object.assign({},J.data,{participants:[].concat(o()(Y),o()($))})}),X));case T.REQUEST:var ee,te,ne=t.meta,re=ne.conversationId,ae=ne.direction,oe=void 0===ae?E.a:ae,ce=e[re];return Object.assign({},e,((te={})[re]=Object.assign({},ce,{fetchStatus:Object.assign({},ce&&ce.fetchStatus||{},(ee={},ee[oe]=O.a.LOADING,ee))}),te));case T.FAILURE:var ue,de,fe=t.meta,_e=fe.conversationId,ve=fe.direction,me=void 0===ve?E.a:ve,be=e[_e];return Object.assign({},e,((de={})[_e]=Object.assign({},be,{fetchStatus:Object.assign({},be&&be.fetchStatus||{},(ue={},ue[me]=O.a.FAILED,ue)),error:t.payload}),de));case T.SUCCESS:var ye,he,Ee=t.meta,Oe=Ee.conversationId,ge=Ee.direction,Ae=void 0===ge?E.a:ge;return Object.assign({},e,((he={})[Oe]=Object.assign({},e[Oe],{fetchStatus:Object.assign({},e[Oe]&&e[Oe].fetchStatus||{},(ye={},ye[Ae]=O.a.LOADED,ye))}),he));case se:return Object.entries(e).reduce((function(n,r){var a=r[0];r[1];return n[a]=V(e[a],{last_read_event_id:t.payload}),n}),{});case x.REQUEST:return Object.assign({},e,((n={})[t.meta.conversationId]=V(e[t.meta.conversationId],{last_read_event_id:t.meta.lastReadEventId}),n));case le:var Ce=e,xe=t.payload;Ce[xe];return a()(Ce,[xe].map(g));case j.REQUEST:return Object.assign({},e,((r={})[t.meta.conversationId]=Object.assign({},e[t.meta.conversationId],{isDeleted:!0}),r));case pe:return Object.assign({},e,((i={})[t.meta.conversationId]=V(e[t.meta.conversationId],{notifications_disabled:!t.payload}),i));case D.REQUEST:return Object.assign({},e,((s={})[t.meta.conversationId]=V(e[t.meta.conversationId],{notifications_disabled:!0,mute_expiration_time:B[t.meta.duration]}),s));case R.REQUEST:return Object.assign({},e,((c={})[t.meta.conversationId]=V(e[t.meta.conversationId],{mention_notifications_disabled:!0}),c));case M.REQUEST:return Object.assign({},e,((u={})[t.meta.conversationId]=V(e[t.meta.conversationId],{notifications_disabled:!1}),u));case N.REQUEST:return Object.assign({},e,((d={})[t.meta.conversationId]=V(e[t.meta.conversationId],{mention_notifications_disabled:!1}),d));case je:return Object.assign({},e,((l={})[t.meta.conversationId]=V(e[t.meta.conversationId],{avatar_image_https:t.payload}),l));case w.REQUEST:case w.SUCCESS:return Object.assign({},e,((f={})[t.meta.conversationId]=V(e[t.meta.conversationId],{name:t.meta.name}),f));case Ie:var Re,De=e[t.meta.conversationId],Ne=De&&De.data&&De.data.max_entry_id||"0";return Object(I.b)(t.payload,Ne)?Object.assign({},e,((Re={})[t.meta.conversationId]=V(e[t.meta.conversationId],{max_entry_id:t.payload}),Re)):e;case P.REQUEST:return Object.assign({},e,((p={})[t.meta.conversationId]=V(e[t.meta.conversationId],{isUploading:!0}),p));case P.FAILURE:case P.SUCCESS:return Object.assign({},e,((_={})[t.meta.conversationId]=V(e[t.meta.conversationId],{isUploading:!1}),_));case Se:return Object.assign({},e,((v={})[t.meta.conversationId]=V(e[t.meta.conversationId],{avatarMediaId:t.payload}),v));case Te:return Object.assign({},e,((m={})[t.meta.conversationId]=V(e[t.meta.conversationId],{avatarMediaId:null}),m));case y.a:return F;default:return e}}var V=function(e,t,n){void 0===e&&(e={}),void 0===t&&(t={}),void 0===n&&(n=[]);var r,i,o=e,s=(o.error,a()(o,["error"])),c=(Object(m.a)(t.avatarMediaId)?t:s).avatarMediaId,u=void 0===c?null:c,d=t.isUploading,l=void 0!==d&&d,f=t,p=(f.avatarMediaId,f.isUploading,f.max_entry_id),_=a()(f,["avatarMediaId","isUploading","max_entry_id"]),v=Object.assign({},s&&s.data,_);return p&&(v.max_entry_id=(r=p,i=s&&s.data&&s.data.max_entry_id,Object(I.c)(r,i)?r:i)),Object.assign({},s,{avatarMediaId:u,data:v,isUploading:l})},G=function(e,t){return e[d.a].conversations[t]},K=function(e,t){var n=G(e,t);return n?Object(O.b)(n.fetchStatus,n.data):O.a.LOADED},q=function(e,t){var n=G(e,t);return!!n&&Object(O.b)(n.fetchStatus,n.data)===O.a.LOADED},W=function(e,t){var n=G(e,t);return!!n&&n.fetchStatus[E.a]===O.a.LOADING},z=Object(_.createSelector)((function(e){return e[d.a].conversations}),(function(e){return Object.entries(e).reduce((function(e,t){var n=t[0],r=t[1];return r.data&&(e[n]=r),e}),{})})),H=function(e,t){var n=((G(e,t)||{}).data||{}).sort_event_id;if(n){var r=u.g(e),a=Object(h.n)(e,n)||{},i=a.message_data,o=a.by_user_id,s=a.id,c=a.sender_id;if(c&&c!==r||i&&i.sender_id!==r||o&&o!==r)return s}return null},Q=function(e,t){var n=H(e,t),r=(G(e,t)||{}).data;return!n||!!(r&&r.last_read_event_id&&Object(I.c)(r.last_read_event_id,n))},X=function(e,t){return(G(e,t)||{}).avatarMediaId},Z=function(e,t){return(G(e,t)||{}).isUploading},J=function(e,t){return c.h(e,X(e,t))},Y=function(e,t){return function(n,r,a){var i=a.api,o=t.join(",");return s.b(n,{params:{conversationId:e,joinedParticipantIds:o},request:i.DirectMessages.addParticipants})({actionTypes:A,context:"ACTION_DM_ADD_PARTICIPANTS",meta:{conversationId:e,participantIds:t}},(function(e){if(e){var t=e.entities;return[t.entries&&Object(h.a)(t.entries),Object(l.c)(t)]}})).then((function(e){var t=e.result.failed_participants;if(!t)return Promise.resolve(e);var n=Object.keys(t),r=1===n.length?t[n[0]]:v.a.DefaultApiError,a=new p.a("addParticpants URL",500,e.headers,[{code:r}]);return a.context.action="ACTION_DM_ADD_PARTICIPANTS",Promise.reject(a)}))}},$=function(e){return void 0===e&&(e={}),function(t,n,r){var a=r.api,i=e,o=i.conversationId,c=i.context;return s.b(t,{params:e,request:a.DirectMessages.fetchConversation})({actionTypes:T,context:c,meta:{conversationId:o,direction:Object(E.c)(e)}},(function(e){if(e){var t=e.entities,n=t.cards,r=t.entries,a=t.tweets,i=t.users,o=e.result.conversation_timeline,s=function(e,t){return void 0===e&&(e={}),Object.entries(e).reduce((function(e,n){var r,a=n[0],i=n[1];return Object.assign({},e,((r={})[a]=Object.assign({},i,t),r))}),{})}(o.conversations,{max_entry_id:o.max_entry_id,min_entry_id:o.min_entry_id,status:o.status});return Object(f.b)({conversations:s,entries:r,users:i,tweets:a,cards:n})}}))}},ee=function(e){return function(t,n,r){var a=r.api;return s.b(t,{params:{participantIds:e},request:a.DirectMessages.fetchConversationFromParticipants})({actionTypes:C,meta:{participantIds:e}})}},te=function(e){return void 0===e&&(e={}),function(t,n){var r=n(),a=e.conversationId,i=(G(r,a)||{}).data,o=void 0===i?{}:i,s=W(r,a);return(!o.status||o.status===b.c.HAS_MORE)&&!s?t($({conversationId:a,context:"FETCH_DM_CONVERSATION"})):Promise.resolve()}},ne=function(e){return void 0===e&&(e={}),function(t,n){var r=n(),a=e.conversationId,i=(G(r,a)||{}).data||{},o=i.status,s=i.min_entry_id,c=W(r,a);return o!==b.c.HAS_MORE||c?Promise.resolve():t($(Object.assign({},e,{max_id:s,context:"FETCH_DM_CONVERSATION_HISTORY"})))}},re=function(e){return function(t,n,r){var a=r.api;return s.b(t,{params:{conversationId:e},request:a.DirectMessages.acceptConversation})({actionTypes:S,meta:{conversationId:e}})}},ae=function(e){return void 0===e&&(e={}),function(t,n,r){var a=r.api,i=e.conversationId;return s.c(t,{params:e,request:a.DirectMessages.leaveConversation})({actionTypes:j,context:"ACTION_LEAVE_CONVERSATION",meta:{conversationId:i}})}},ie=d.c("ADD_CONVERSATIONS"),oe=function(e){return{payload:e,type:ie}},se=d.c("MARK_ALL_AS_READ"),ce=function(e){return{payload:e,type:se}},ue=function(e,t){return{type:x.REQUEST,meta:{conversationId:e,lastReadEventId:t}}},de=function(e){return function(t,n,r){var a=r.api,i=n(),o=(G(i,e)||{}).data,c=(void 0===o?{}:o).sort_event_id,u=!Q(i,e);return e&&c&&u?s.c(t,{params:{conversationId:e,last_read_event_id:c},request:a.DirectMessages.markRead})({actionTypes:x,bypassFailureOnErrors:function(){return!0},context:"APP_DM_UPDATE_CONVERSATION_READ_STATE",meta:{conversationId:e,lastReadEventId:c}}):Promise.resolve()}},le=d.c("REMOVE_CONVERSATION"),fe=function(e){return[{payload:e,type:le},Object(h.i)(e)]},pe=d.c("TOGGLE_CONVERSATION_NOTIFICATIONS"),_e=function(e,t){return{meta:{conversationId:e},payload:t,type:pe}},ve=function(e){return void 0===e&&(e={}),function(t,n,r){var a=r.api,i=e,o=i.conversationId,c=i.duration;return s.c(t,{params:e,request:a.DirectMessages.disableNotifications})({actionTypes:D,context:"ACTION_DISABLE_NOTIFICATIONS",meta:{conversationId:o,duration:c}})}},me=function(e){return void 0===e&&(e={}),function(t,n,r){var a=r.api,i=e.conversationId;return s.c(t,{params:e,request:a.DirectMessages.enableNotifications})({actionTypes:M,context:"ACTION_ENABLE_NOTIFICATIONS",meta:{conversationId:i}})}},be=function(e){return void 0===e&&(e={}),function(t,n,r){var a=r.api,i=e.conversationId,o=Object.assign({mention_notifications_disabled:!0},e);return s.c(t,{params:o,request:a.DirectMessages.updateMentionNotificationsSetting})({actionTypes:R,context:"ACTION_DISABLE_DM_MENTION_NOTIFICATIONS",meta:{conversationId:i}})}},ye=function(e){return void 0===e&&(e={}),function(t,n,r){var a=r.api,i=e.conversationId,o=Object.assign({mention_notifications_disabled:!1},e);return s.c(t,{params:o,request:a.DirectMessages.updateMentionNotificationsSetting})({actionTypes:N,context:"ACTION_ENABLE_DM_MENTION_NOTIFICATIONS",meta:{conversationId:i}})}},he=function(e){return void 0===e&&(e={}),function(t,n,r){return r.api.DirectMessages.updateTyping(e)}},Ee=function(e){return void 0===e&&(e={}),function(t,n,r){var a=r.api,i=e,o=i.conversationId,c=i.name;return s.c(t,{params:e,request:a.DirectMessages.updateConversationName})({actionTypes:w,context:"ACTION_UPDATE_CONVERSATION_NAME",meta:{conversationId:o,name:c}})}},Oe=function(e){return{type:w.SUCCESS,meta:{conversationId:e.conversation_id,name:e.conversation_name}}},Ie=d.c("UPDATE_CONVERSATION_MAX_ENTRY_ID"),ge=function(e,t){return{meta:{conversationId:e},payload:t,type:Ie}},Se=d.c("ADD_AVATAR_MEDIA"),Ae=function(e,t){return{meta:{conversationId:e},payload:t,type:Se}},Te=d.c("REMOVE_AVATAR_MEDIA"),Ce=function(e,t){return{meta:{conversationId:e},payload:t,type:Te}},je=d.c("UPDATE_CONVERSATION_AVATAR"),xe=function(e,t){return{meta:{conversationId:e},payload:t,type:je}},Re=function(e){return function(t,n,r){var a=r.api;t({meta:{conversationId:e},type:P.REQUEST});var i=X(n(),e),o=c.k(i);return t(o).then((function(n){var r=n[0];return t({meta:{conversationId:e},type:P.SUCCESS}),s.b(t,{params:{conversationId:e,avatar_id:r.uploadId},request:a.DirectMessages.updateConversationAvatar})({actionTypes:L,context:"APP_DM_UPDATE_CONVERSATION_AVATAR"})}),(function(n){var r={errors:n,context:"APP_DM_UPDATE_CONVERSATION_AVATAR"};return t({meta:{conversationId:e},type:P.FAILURE}),Promise.reject(r)}))}},De=function(e,t){return function(n,r,a){var i=a.api;return s.d(n,{params:{conversation_id:e,welcome_message_id:t},request:i.DirectMessages.addWelcomeMessageToConversation})("ADD_WELCOME_MESSAGE_TO_CONVERSATION")}}},oEoC:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return d}));n("2G9S"),n("LW0h"),n("hBpG"),n("jwue"),n("vrRf"),n("z84I"),n("M+/F"),n("IAdD"),n("KqXw"),n("WNMA"),n("LJOr"),n("tVqn"),n("+oxZ");var r=n("RhWx"),a=n.n(r),i=n("kIAd");function o(e,t){var n,r=i.b.scoper.find((function(r){if(-1!==r.srcInputs.indexOf(t))return n=e.match(r.regexp)})),a="";return n&&(a=n&&(1===n.length?n[0]:n[1])),r?Object.assign({},r.scope,{src:t,q:a}):null}function s(e,t){var n=t.slice(0,e),r=t.slice(e,t.length),a=n.search(i.b.WordEnd),o=(a>=0?n.slice(a):"")+r.slice(0,r.search(i.b.WordBoundary));return o.trim()?{start:a,word:o}:{start:-1,word:""}}function c(){return"typeaheadFocus-"+Math.random()}function u(e){var t=e.altKey,n=e.ctrlKey,r=e.metaKey;return!(t||n||r)}function d(e,t){var n=[];e.forEach((function(e){var r=t.find((function(t){return t.id===e.id}));r&&r.data&&r.data.result_context?n.push(r):n.push(e)}));var r=n.map((function(e){return e.id})),i=t.filter((function(e){return r.indexOf(e.id)<0}));return[].concat(n,a()(i))}},pKoL:function(e,t,n){"use strict";n("2G9S");var r=n("1Pcy"),a=n.n(r),i=n("W/Kd"),o=n.n(i),s=n("KEM+"),c=n.n(s),u=n("ERkP"),d=n("HPNB"),l=n("9HgX"),f=n("3XMw"),p=n.n(f),_=n("l2F/"),v=n.n(_),m=n("ur9R"),b=n.n(m),y=n("mN6z"),h=(n("AxOO"),n("Qwev")),E=n("rHpw"),O=(n("aWzz"),n("1auM")),I=n("ude7"),g=n("D4le"),S=n.n(g),A=n("3xO4"),T=n.n(A),C=p.a.gff1f69e,j=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,c()(a()(t),"state",{imagePreviewUrl:null}),c()(a()(t),"_getImageSrc",(function(){var e=t.props,n=e.mediaItem,r=e.enableGif,a=t.state.imagePreviewUrl;if(n&&n.mediaFile)return n.mediaFile.isGif&&!r?a:n.mediaFile.url})),t}o()(t,e);var n=t.prototype;return n.componentDidUpdate=function(){var e=this,t=this.props,n=t.enableGif,r=t.mediaItem.mediaFile,a=this.state.imagePreviewUrl;n||a||r instanceof O.a&&r.isGif&&Object(I.a)(r).then((function(t){e.setState({imagePreviewUrl:t})}))},n.shouldComponentUpdate=function(e,t){return!Object(y.a)(e,this.props)||!Object(y.a)(t,this.state)},n.render=function(){var e=this.props,t=e.borderRadius,n=e.enableGif,r=e.mediaItem,a=e.onClick,i=(this.state||{}).imagePreviewUrl,o=r.mediaFile&&r.mediaFile.isGif&&!n&&!i,s=r.needsProcessing||o,c=[R.root,x[t],s&&R.loadingBorder],d=this._getImageSrc();return u.createElement(T.a,{onClick:a,style:c},s||!d?u.createElement(h.a,{accessibilityLabel:C,style:R.activityIndicator}):u.createElement(S.a,{resizeMode:"cover",source:d,style:R.image}))},t}(u.Component);c()(j,"defaultProps",{borderRadius:"none",enableGif:!0});var x=E.a.create((function(e){return{infinite:{borderRadius:e.borderRadii.infinite},medium:{borderRadius:e.borderRadii.medium},none:{borderRadius:0}}})),R=E.a.create((function(e){return{root:{borderRadius:e.borderRadii.large,borderStyle:"solid",borderWidth:0,borderColor:"transparent",maxWidth:"100%",height:"100%",overflow:"hidden"},image:{display:"block",height:"100%",width:"100%"},loadingBorder:{borderColor:e.colors.mediumGray},activityIndicator:{height:"100%"}}})),D=j,N=(n("z84I"),n("IAdD"),n("LdEA")),M=n.n(N),w=n("7DT3"),P=n.n(w),L=n("eXeu"),U=n("iOGT"),B=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,c()(a()(t),"_setVideoRef",(function(e){var n=t.props.getVideoRef;n&&n(e)})),t}return o()(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.dataSaverMode,r=(e.getVideoRef,e.style),a=e.variants,i=M()(e,["children","dataSaverMode","getVideoRef","style","variants"]),o=Object(U.c)(a,n?U.a.MEDIUM:U.a.HIGH)||[],s=Object(L.e)(o.map((function(e){return{src:e.url,type:e.content_type}})));return P()("video",Object.assign({},i,{children:[s.map((function(e){return u.createElement("source",{key:e.src,src:e.src,type:e.type})})),t],ref:this._setVideoRef,style:r}))},t}(u.Component);c()(B,"defaultProps",{dataSaverMode:!1,variants:[]});var F=n("sjK1"),k=n("cHvH"),V=n("mXq/"),G=n("/yvb"),K=n("a6qo"),q=n("+/sI"),W=p.a.gd80afba,z=p.a.abd845fd,H=p.a.df1b0707,Q=p.a.cd959e5b,X=p.a.add55c97,Z=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,c()(a()(t),"state",{isVideoPaused:!0,playGif:!1}),c()(a()(t),"_handleGifClick",(function(){t.setState({playGif:!t.state.playGif})})),c()(a()(t),"_handleMediaPreviewLayout",(function(e){var n=t.props,r=n.mediaItem,a=n.resizeIfNeeded,i=r.mediaFile||r.externalMediaDetails;if(i){var o=e.nativeEvent.layout,s=o.height,c=o.width,u=i.height,d=i.width/u;Math.abs(d-c/s)>.05&&t._mediaContainer&&("width"===a?t._mediaContainer.setNativeProps({style:{width:s*d}}):"height"===a&&t._mediaContainer.setNativeProps({style:{height:c/d}}))}})),c()(a()(t),"_handleVideoOnPlay",(function(e){t.setState({isVideoPaused:!1})})),c()(a()(t),"_handleVideoOnPause",(function(e){t.setState({isVideoPaused:!0})})),c()(a()(t),"_setMediaContainerRef",(function(e){t._mediaContainer=e})),c()(a()(t),"_setVideoRef",(function(e){t._video=e})),c()(a()(t),"_playVideo",(function(){if(t._video){var e=t._video.play();void 0!==e&&e.then((function(e){t._handleVideoOnPlay()})).catch()}})),c()(a()(t),"_pauseVideo",(function(){t._video&&(t._video.pause(),t._handleVideoOnPause())})),t}o()(t,e);var n=t.prototype;return n.render=function(){var e=this,t=this.props,n=t.accessibilityLabel,r=t.accessibilityRole,a=t.enableGif,i=t.mediaItem,o=t.onEdit,s=t.onRemove,c=t.style,f=t.withAltTextLabel,p=t.withCloseButton,_=t.withEditButton,m=this.state.playGif,y=i.externalMediaDetails&&i.externalMediaDetails.mediaType===l.a,h=y||a&&i.mediaFile&&i.mediaFile.isGif;return u.createElement(k.a,null,(function(t){var a=t.windowWidth,i=d.a.isTwoColumnLayout(a);return u.createElement(T.a,{accessibilityLabel:n||X,accessibilityRole:r,onLayout:e._handleMediaPreviewLayout,ref:e._setMediaContainerRef,style:[c,J.cursor,y&&J.gifPlayButton]},e._renderPreview(),y&&!m&&u.createElement(V.a,{accessibilityLabel:H,onPress:e._handleGifClick,size:"small"}),p?u.createElement(G.a,{accessibilityLabel:Q,icon:u.createElement(v.a,null),onPress:s,size:"small",style:J.close,type:"onMedia"}):null,h?u.createElement(q.c,{type:q.a}):null,f?u.createElement(K.a,{align:"left",bold:!0},"ALT"):null,_?u.createElement(G.a,{accessibilityLabel:W,icon:i?void 0:u.createElement(b.a,null),onPress:o,size:i?"normalCompact":"small",style:J.edit,type:"onMedia"},i&&z):null)}))},n._renderPreview=function(){var e=this.props.mediaItem;if(e.externalMediaDetails){var t=e.externalMediaDetails.previewUrl,n=e.externalMediaDetails.stillMediaUrl;return this._renderGifPreview(t,n)}if(e.mediaFile&&e.mediaFile.isVideo){var r=[{content_type:e.mediaFile.type,url:e.mediaFile.url}];return this._renderVideoPreview(r)}return u.createElement(T.a,{style:E.a.absoluteFill},this._renderImagePreview())},n._renderGifPreview=function(e,t){var n={uri:this.state.playGif?e:t};return u.createElement(T.a,{onClick:this._handleGifClick,style:E.a.absoluteFill},u.createElement(S.a,{resizeMode:"cover",source:n,style:J.video}))},n._renderImagePreview=function(){var e=this.props,t=e.borderRadius,n=e.enableGif,r=e.mediaItem,a=e.onClick;return u.createElement(D,{borderRadius:t,enableGif:n,mediaItem:r,onClick:a})},n._renderVideoPreview=function(e){var t=this.props.mediaItem.mediaFile;return u.createElement(B,{autoPlay:!1,controls:!0,getVideoRef:this._setVideoRef,loop:!0,muted:!0,onPause:this._handleVideoOnPause,onPlay:this._handleVideoOnPlay,playsInline:!0,poster:t instanceof F.c?t.thumbnail:"",style:J.video,variants:e})},t}(u.Component);c()(Z,"defaultProps",{enableGif:!0,withCloseButton:!0,withAltTextLabel:!1,withEditButton:!1});var J=E.a.create((function(e){return{close:{position:"absolute",left:e.spaces.xxSmall,top:e.spaces.xxSmall},cursor:{cursor:"pointer"},edit:{position:"absolute",right:e.spaces.xxSmall,top:e.spaces.xxSmall},gifPlayButton:{alignItems:"center",justifyContent:"center"},video:{height:"100%",width:"100%"}}}));t.a=Z},rFBM:function(e,t,n){"use strict";n("2G9S"),n("hCOa"),n("87if");var r=n("1Pcy"),a=n.n(r),i=n("W/Kd"),o=n.n(i),s=n("KEM+"),c=n.n(s),u=n("ERkP"),d=n("rHpw"),l=n("7DT3"),f=n.n(l),p=n("3xO4"),_=n.n(p),v=function(e){return f()("div",e)},m=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,c()(a()(t),"_dragEnterCount",0),c()(a()(t),"state",{active:!1}),c()(a()(t),"_handleDragDrop",(function(e){var n=t.props.onFilesAdded;e.preventDefault(),n(Array.from(e&&e.dataTransfer.files)),t._updateDragCount(0)})),c()(a()(t),"_handleDragEnter",(function(e){var n=t.props.onDragEnter;e.preventDefault(),n&&n(),t._updateDragCount(t._dragEnterCount+1)})),c()(a()(t),"_handleDragLeave",(function(e){e.preventDefault(),t._updateDragCount(t._dragEnterCount-1)})),c()(a()(t),"_handleDragOver",(function(e){e.preventDefault()})),t}o()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.allowDragDrop,n=e.children,r=e.style,a=this.state.active,i=t?b.dragBorderValid:b.dragBorderInvalid;return u.createElement(v,{onDragEnter:this._handleDragEnter,onDragLeave:this._handleDragLeave,onDragOver:this._handleDragOver,onDrop:this._handleDragDrop,style:[b.root,r,a&&i]},u.createElement(_.a,{style:b.inner},"function"==typeof n?n(a):n))},n._updateDragCount=function(e){this._dragEnterCount=e,0===this._dragEnterCount?this.setState({active:!1}):this._dragEnterCount>0&&this.setState({active:!0})},t}(u.Component);c()(m,"defaultProps",{allowDragDrop:!0});var b=d.a.create((function(e){return{root:{display:"flex",flexDirection:"column"},dragBorderValid:{borderStyle:"dashed",borderWidth:e.spaces.micro,borderColor:e.colors.primary},dragBorderInvalid:{borderStyle:"dashed",borderWidth:e.spaces.micro,borderColor:e.colors.red},inner:{flexGrow:1}}}));t.a=m},rrSi:function(e,t,n){e.exports=n.p+"twemoji_sprite.6faba594.png"},uKEd:function(e,t,n){"use strict";n.d(t,"e",(function(){return T})),n.d(t,"a",(function(){return R})),n.d(t,"f",(function(){return D})),n.d(t,"d",(function(){return N})),n.d(t,"k",(function(){return M})),n.d(t,"i",(function(){return P})),n.d(t,"r",(function(){return L})),n.d(t,"h",(function(){return U})),n.d(t,"b",(function(){return F})),n.d(t,"j",(function(){return V})),n.d(t,"c",(function(){return K})),n.d(t,"g",(function(){return W})),n.d(t,"l",(function(){return z})),n.d(t,"n",(function(){return H})),n.d(t,"o",(function(){return Q})),n.d(t,"m",(function(){return X})),n.d(t,"p",(function(){return Z})),n.d(t,"q",(function(){return J}));n("2G9S"),n("LW0h"),n("hBpG"),n("jwue"),n("lTEL"),n("z84I"),n("KOtZ"),n("tQbP"),n("IAdD"),n("+KXO"),n("7x/C"),n("1IsZ"),n("DZ+c"),n("+oxZ"),n("kYxP");var r=n("LdEA"),a=n.n(r),i=n("RhWx"),o=n.n(i),s=n("t0aI"),c=n("aWyx"),u=n("SrIh"),d=n("WVrH"),l=n("fEA7"),f=n.n(l),p=n("AQ79"),_=n("3A2y"),v=n("J4ZH"),m=n("4FGy"),b=n("s1N3"),y=n("lnti"),h=n("oEOe"),E=Object(h.a)(p.b,"DELETE_MESSAGE"),O=Object(h.a)(p.b,"REACTION_CREATE"),I=Object(h.a)(p.b,"REACTION_DELETE"),g=Object(h.a)(p.b,"MARK_ENTRIES_AS_SPAM"),S=Object(h.a)(p.b,"MARK_ENTRIES_AS_NOT_SPAM"),A={entries:{},entryIdsByConversationId:{},reactionsByMessageId:{}};function T(e,t){void 0===e&&(e=A);var n=t.meta||{},r=n.conversationId,a=n.requestId;switch(t.type){case B:var i,s,l=t.payload.id,f=Object.assign({},e.entries,((i={})[l]=C(e.entries[l],{data:t.payload}),i));return Object.assign({},e,{entries:f,entryIdsByConversationId:Object.assign({},e.entryIdsByConversationId,(s={},s[r]=j([].concat(o()(e.entryIdsByConversationId[r]||[]),[l]),f),s))});case x:var p=Object.values(t.payload).filter((function(e){return e.type!==c.b.CONVERSATION_READ})).reduce((function(t,n){var r=n.id,a=Object(_.a)(n,"message_reactions");return t.allEntries[r]=C(e.entries[r],{data:a,isLoading:!1,isLoaded:!0}),n.message_reactions&&(n.message_reactions.forEach((function(r){var a=Object.assign({},r,{affects_sort:!0,message_id:n.id,type:c.b.REACTION_CREATE});t.allEntries[a.id]=C(e.entries[a.id],{data:a,isLoading:!1,isLoaded:!0})})),t.embeddedReactionsByMessageId[r]=j([].concat(o()(e.reactionsByMessageId[r]||[]),o()(n.message_reactions.map((function(e){return e.id})))),Object.assign({},e.entries,t.allEntries))),t}),{allEntries:{},embeddedReactionsByMessageId:{}}),b=Object.assign({},e.entries,p.allEntries),y=Object(v.a)(Object.values(p.allEntries),(function(e){return e.data.conversation_id})),h=Object.keys(y).reduce((function(t,n){var r=y[n].map((function(e){return e.data.id}));return t[n]=j([].concat(o()(e.entryIdsByConversationId[n]||[]),o()(r)),b),t}),{});return Object.assign({},e,{entries:b,entryIdsByConversationId:Object.assign({},e.entryIdsByConversationId,h),reactionsByMessageId:Object.assign({},e.reactionsByMessageId,p.embeddedReactionsByMessageId)});case g.REQUEST:case S.REQUEST:var O=t.type===g.REQUEST,T=t.payload.reduce((function(t,n){var r,a=e.entries[n]&&e.entries[n].data;return Object.assign({},t,((r={})[n]=Object.assign({},e.entries[n],{data:Object.assign({},a,{marked_as_spam:O})}),r))}),{});return Object.assign({},e,{entries:Object.assign({},e.entries,T)});case E.REQUEST:case w:var R,D=t.type===w&&!Array.isArray(t.payload),N=e.entryIdsByConversationId[r]||[],M=t.type===w?D?N:t.payload:[t.payload].concat(o()(e.reactionsByMessageId[t.payload]||[]));return Object.assign({},e,{entries:Object(_.a)(e.entries,M),entryIdsByConversationId:Object.assign({},Object(_.a)(e.entryIdsByConversationId,r),D?{}:(R={},R[r]=Object(m.a)(N,M),R)),reactionsByMessageId:Object(_.a)(e.reactionsByMessageId,M)});case k:var P,L=t.payload.id||a,U=Object.assign({},Object(_.a)(e.entries,L)),F=j((e.entryIdsByConversationId[r]||[]).filter((function(e){return e!==L})),U),V=F?((P={})[r]=F,P):{};return Object.assign({},e,{entries:U,entryIdsByConversationId:Object.assign({},Object(_.a)(e.entryIdsByConversationId,r),V),reactionsByMessageId:Object(_.a)(e.reactionsByMessageId,L)});case G:var K,W=t.payload,z=[].concat(o()(e.reactionsByMessageId[W.message_id]||[]),[W.id]),H=z.filter((function(t){return e.entries[t]}));z.length!==H.length&&Object(u.a)("DM add reaction is missing a backing entry",{extra:{filteredMessageReactionIds:H,messageReactionIds:z,currentId:W.id}});var Q=j(H,e.entries);return Object.assign({},e,{reactionsByMessageId:Object.assign({},e.reactionsByMessageId,(K={},K[W.message_id]=Q,K))});case I.REQUEST:case q:var X,Z,J=t.payload,Y=(e.reactionsByMessageId[J.message_id]||[]).find((function(t){return e.entries[t].data.sender_id===J.sender_id}));if(!Y)return e;var $=Object(m.a)(e.entryIdsByConversationId[J.conversation_id],Y),ee=Object(m.a)(e.reactionsByMessageId[J.message_id],Y);return Object.assign({},e,{entries:Object(_.a)(e.entries,Y),entryIdsByConversationId:Object.assign({},e.entryIdsByConversationId,(X={},X[J.conversation_id]=$,X)),reactionsByMessageId:Object.assign({},e.reactionsByMessageId,(Z={},Z[J.message_id]=ee,Z))});case d.a:return A;default:return e}}var C=function(e,t){var n=e||{},r=(n.error,n.isLoaded,n.isLoading,a()(n,["error","isLoaded","isLoading"])),i=t||{},o=i.data,s=a()(i,["data"]);return Object.assign({},r,{data:Object.assign({},r&&r.data,o)},s)},j=function(e,t){void 0===e&&(e=[]);var n=Object(b.a)(e).sort((function(e,n){var r=Object(s.a)(t[e].data.time,t[n].data.time);return 0===r?Object(s.a)(t[e].id,t[n].id):r}));return n.length?n:void 0},x=Object(p.c)("ADD_ENTRIES"),R=function(e){return{payload:e,type:x}},D=function(e){return function(t,n,r){var i=r.api,o=e||{},s=o.id,c=o.conversationId,u=o.requestId,d=void 0===u?f.a.v1():u,l=a()(o,["id","conversationId","requestId"]),p=Object.assign({},l,{id:s,request_id:d});return Object(h.c)(t,{params:p,request:i.DirectMessages.deleteMessage})({actionTypes:E,context:"ACTION_DELETE_DM",payload:s,meta:{conversationId:c}})}},N=function(e){return function(t,n,r){var a,i,o,s,u,d=r.api,l=(i=(a=e).reaction_key,o=a.conversation_id,s=a.dm_id,u=a.perspective,{id:f.a.v1(),time:(new Date).getTime().toString(),reaction_key:i,conversation_id:o,message_id:s,sender_id:u,type:c.b.REACTION_CREATE});t([F(l.conversation_id,l.id,l),W(l),K(l)]);return Object(h.b)(t,{params:Object(_.a)(e,"perspective"),request:d.DirectMessages.addReaction})({actionTypes:O,context:"ACTION_REACTION_CREATE"},(function(e,t){if(t)return[W(l)]}))}},M=function(e){return function(t,n,r){var i=r.api,o=e.perspective,s=a()(e,["perspective"]);return Object(h.c)(t,{params:s,request:i.DirectMessages.deleteReaction})({actionTypes:I,context:"ACTION_REACTION_DELETE",payload:{conversation_id:e.conversation_id,message_id:e.dm_id,sender_id:o}})}},w="rweb/dm/REMOVE_CONVERSATION_ENTRIES",P=function(e,t){return{meta:{conversationId:e},payload:t,type:w}},L=function(e,t){return{payload:e,type:t?g.REQUEST:S.REQUEST}},U=function(e){var t=e.conversationId,n=e.dmId,r=e.markSpam;return function(e,a,i){var o=i.api;return Object(h.c)(e,{params:{dm_id:n,report_as:r?"spam":"not_spam"},request:o.DirectMessages.reportSpam})({actionTypes:r?E:S,payload:r?n:[n],meta:{conversationId:t}})}},B=Object(p.c)("ADD_ENTRY"),F=function(e,t,n){return{meta:{conversationId:e,requestId:t},payload:n,type:B}},k=Object(p.c)("REMOVE_ENTRY"),V=function(e,t,n){return{meta:{conversationId:e,requestId:t},payload:n,type:k}},G=Object(p.c)("ADD_REACTION"),K=function(e){return{payload:e,type:G}},q=Object(p.c)("DELETE_REACTION"),W=function(e){return{payload:e,type:q}},z=function(e){return e[p.a].entries},H=function(e,t){var n=z(e).entries[t];return n&&n.data},Q=function(e,t){return e[p.a].entries.entryIdsByConversationId[t]},X=function(e,t){var n=Q(e,t);return n?Object(y.a)(n.map((function(t){return H(e,t)}))):[]},Z=function(e,t){return z(e).reactionsByMessageId[t]},J=function(e,t){return(Z(e,t)||[]).map((function(t){return H(e,t).sender_id}))}},ude7:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n("7x/C"),n("JtPf");var r=n("A0bJ"),a=n("hJBK"),i=n("1auM"),o=1,s=2,c=3,u=function(e){if(Object(i.b)(e)){if(e.isGif){var t=e.img,n=e.width,u=e.height,d=e.orientation;return Object(a.b)(t,n,u,d).then((function(e){return Object(a.a)(e)}),(function(e){throw new r.a("Gif preview could not be generated",c)}))}var l=new r.a("The provided image must be a gif",s);return Promise.reject(l)}var f=new r.a("The provided file is not a valid image",o);return Promise.reject(f)}},ur9R:function(e,t,n){"use strict";n("IAdD"),t.__esModule=!0,t.default=void 0;var r=o(n("7DT3")),a=o(n("ERkP")),i=o(n("OkZJ"));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){return void 0===e&&(e={}),(0,r.default)("svg",Object.assign({},e,{style:[i.default.root,e.style],viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M21.592 5.576c.877-.967.882-2.298.006-3.174-.877-.877-2.208-.87-3.174.006 0 0-.003 0-.004.002l-.006.006-.005.004s-.002 0-.002.002L8.398 11.27c-1.716-.214-3.424.31-4.534 1.42-3.872 3.874-1.523 9.616-1.422 9.858.1.24.32.41.577.45.037.007.075.01.113.01.218 0 .428-.095.57-.265 1.83-2.15 3.043-2.023 4.328-1.89 1.164.122 2.477.258 3.834-1.282.975-1.106 1.302-2.585.922-4.03l8.792-9.948h.002l.004-.006.006-.006.002-.004zm-1.055-2.113c.305.305.28.74-.06 1.11-.003.003-.004.007-.006.01 0 0-.003 0-.004.003l-5.662 6.406-1.796-1.796 6.406-5.662c.002 0 .002-.003.004-.005.002-.003.006-.004.008-.006.37-.34.807-.365 1.11-.06zm-8.62 10.797L9.74 12.084l2.142-1.894 1.927 1.927-1.894 2.143zm-1.178 4.32c-.848.96-1.488.895-2.552.78-1.27-.13-2.808-.293-4.722 1.463-.415-1.673-.784-4.83 1.457-7.072.807-.805 2.086-1.168 3.377-.983l2.977 2.976c.333 1.03.15 2.057-.538 2.836z"})))};s.metadata={height:24,width:24};var c=s;t.default=c},w3n3:function(e,t,n){"use strict";var r=n("ERkP"),a=n("/yvb"),i=(n("MLl7"),n("3XMw")),o=n.n(i),s=n("9In0"),c=n.n(s),u=n("Irs7"),d=o.a.a4993fa1,l=r.createElement(c.a,null);t.a=function(e){var t=e.dmConversationId,n=e.enabled,i=void 0===n||n,o=e.gifSearchKeySource,s=e.history,c=e.style,f=e.onPress,p=Object(u.b)(),_=r.useCallback((function(){f&&f(),p.scribe({element:"found_media_button",action:"click"}),s.push({pathname:"/i/foundmedia/search",state:{gifSearchKeySource:o,dmConversationId:t}})}),[t,p,o,s,f]);return r.createElement(a.a,{accessibilityLabel:d,disabled:!i,icon:l,onPress:_,size:"normal",style:[c],type:"text"})}},wpu3:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return p}));n("2G9S"),n("DfhM"),n("LW0h"),n("jwue"),n("z84I"),n("5BYb"),n("ho0z"),n("+oxZ");var r=n("RhWx"),a=n.n(r),i=n("SMZj"),o=n("1auM"),s=n("Olyj"),c=(n("S1qy"),n("s1N3")),u=n("lnti"),d=function(e){var t,n=e.inReplyToStatus,r=e.loggedInUserId,i=e.excludeReplyUser,o=n.retweeted_status,d=(o||n).entities,f=(n.retweeted_status||n).user,p=o?o.user:{},_=o?n.user:{},v=d.user_mentions||[],m=Object(s.a)(d.media||[]),b=l(o||n)||{},y=((t={})[p.id_str]=p,t[_.id_str]=_,t[f.id_str]=f,t[b.id_str]=b,t);v.forEach((function(e){y[e.id_str]=e})),m.forEach((function(e){var t=e.user_id,n=e.name,r=e.screen_name;y[t]={id_str:t,name:n,screen_name:r}}));var h=Object(c.a)(Object(u.a)([p.id_str,_.id_str,f.id_str].concat(a()(v.map((function(e){return e.id_str}))),a()(m.map((function(e){return e.user_id})))))).filter((function(e){return e!==r})),E=r&&f.id_str===r?[r].concat(a()(h)):h;return i&&(E=E.filter((function(e){return e!==f.id_str}))),E.map((function(e){return y[e]}))},l=function(e){var t=e.card,n=null;if(t){var r=i.f(t.binding_values,"site");r&&t.users&&(n=t.users[r.id_str])}return n},f=function(e){var t=e.maxNumberOfPhotos;return function(e){if(0===e.length)return!0;var n=e.some((function(e){return!!e.externalMediaDetails})),r=!n&&e.some((function(e){return e.mediaFile&&e.mediaFile.isGif})),a=e.some((function(e){return e.mediaFile&&!(e.mediaFile instanceof o.a)&&e.mediaFile.isVideo}));if(r||n||a)return 1===e.length;var i=e.length<=t,s=e.every((function(e){return e.mediaFile&&e.mediaFile.isImage}));return i&&s}},p=f({maxNumberOfPhotos:4})},xCUF:function(e,t,n){"use strict";n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return E})),n.d(t,"f",(function(){return I})),n.d(t,"e",(function(){return T}));n("2G9S"),n("LW0h"),n("lTEL"),n("KOtZ"),n("tQbP"),n("IAdD"),n("7x/C"),n("1IsZ"),n("JtPf"),n("kYxP");var r=n("RhWx"),a=n.n(r),i=n("LdEA"),o=n.n(i),s=n("oEOe"),c=n("aWyx"),u=n("k6jb"),d=n("P1r1"),l=n("AQ79"),f=n("uKEd"),p=n("xPna"),_=n("lRnM"),v=n("WVrH"),m=s.a(l.b,"FETCH_UPDATES"),b={isLoaded:!1,isLoading:!1};function y(e,t){switch(void 0===e&&(e=b),t.type){case m.REQUEST:return Object.assign({},e,{isLoading:!0});case m.FAILURE:return Object.assign({},e,{error:t.payload,isLoaded:!1,isLoading:!1});case m.SUCCESS:var n=e,r=(n.error,o()(n,["error"]));return Object.assign({},r,{isLoaded:!0,isLoading:!1});case O:return Object.assign({},e,{cursor:t.payload});case g:return Object.assign({},e,{tertiaryInboxStatus:t.payload});case v.a:return b;default:return e}}var h=function(e){return function(t,n,r){var i=r.api,c=n().directMessages,l=void 0===c?{}:c,f=(l.updates||{}).cursor,_=e||{},b=_.polling,y=o()(_,["polling"]),h=(l.updates||{}).tertiaryInboxStatus,E=!1,O=b?{"x-twitter-polling":"true"}:{},I=Object(d.p)(n())?"on":"off";h?h!==I&&(f=null,E=!0):E=!0;var g=Object(p.i)(Object.assign({},y,{cursor:f}),n());return s.b(t,{params:g,headers:O,request:i.DirectMessages.fetchUserUpdates})({actionTypes:m,context:"FETCH_DM_USER_UPDATES",meta:{direction:Object(u.c)(e)}},(function(e){if(e){var t=e.entities,n=t.entries,r=t.tweets,i=t.users,o=t.cards,s=e.result,c=s.user_events,u=s.inbox_initial_state;return[u&&Object(v.b)()].concat(a()(Object(p.b)(Object.assign({},c||u,{entries:n,users:i,tweets:r,cards:o}))),a()(c?A(Object.values(n||[])):[]),[E&&S(I)])}}))}},E=function(e){return function(t,n){return C(n())?Promise.resolve():t(h(e))}},O=Object(l.c)("UPDATE_CURSOR"),I=function(e){return{payload:e,type:O}},g=Object(l.c)("UPDATE_TERTIARY_INBOX_STATUS"),S=function(e){return{payload:e,type:g}},A=function(e){return void 0===e&&(e=[]),e.sort((function(e,t){return e.id-t.id})).reduce((function(e,t){switch(t.type){case c.b.CONVERSATION_AVATAR_UPDATE:return[].concat(a()(e),[Object(_.E)(t.conversation_id,t.conversation_avatar_image_https),Object(_.F)(t.conversation_id,t.id)]).filter((function(e){return e}));case c.b.CONVERSATION_NAME_UPDATE:return[].concat(a()(e),[Object(_.H)(t),Object(_.F)(t.conversation_id,t.id)]).filter((function(e){return e}));case c.b.CONVERSATION_READ:return[].concat(a()(e),[Object(_.q)(t.conversation_id,t.last_read_event_id)]);case c.b.DISABLE_NOTIFICATIONS:case c.b.ENABLE_NOTIFICATIONS:var n=t.type===c.b.ENABLE_NOTIFICATIONS;return[].concat(a()(e),[Object(_.D)(t.conversation_id,n)]);case c.b.MARK_ALL_AS_READ:return[].concat(a()(e),[Object(_.p)(t.last_read_event_id)]);case c.b.MESSAGE_DELETE:return[].concat(a()(e),[Object(f.i)(t.conversation_id,t.messages.reduce((function(e,t){return[].concat(a()(e),a()(Object.values(t)))}),[]))]);case c.b.MESSAGE_MARK_AS_NOT_SPAM:case c.b.MESSAGE_MARK_AS_SPAM:var r=t.type===c.b.MESSAGE_MARK_AS_SPAM;return[].concat(a()(e),[Object(f.r)(t.messages.reduce((function(e,t){return[].concat(a()(e),a()(Object.values(t)))}),[]),r)]);case c.b.REMOVE_CONVERSATION:return[].concat(a()(e),a()(Object(_.s)(t.conversation_id)));case c.b.JOIN_CONVERSATION:case c.b.PARTICIPANTS_JOIN:case c.b.PARTICIPANTS_LEAVE:return[].concat(a()(e),[Object(_.F)(t.conversation_id,t.id)]);case c.b.REACTION_CREATE:return[].concat(a()(e),[Object(f.g)(t),Object(f.c)(t),Object(_.F)(t.conversation_id,t.id)]);case c.b.REACTION_DELETE:return[].concat(a()(e),[Object(f.g)(t)]);case c.b.MESSAGE:return[].concat(a()(e),[Object(_.F)(t.conversation_id,t.id)]).filter((function(e){return e}));default:return e}}),[])},T=function(e){return e[l.a].updates},C=function(e){return T(e).isLoading}},xPna:function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"c",(function(){return T})),n.d(t,"i",(function(){return x})),n.d(t,"p",(function(){return R})),n.d(t,"s",(function(){return M})),n.d(t,"n",(function(){return w})),n.d(t,"m",(function(){return P})),n.d(t,"v",(function(){return L})),n.d(t,"x",(function(){return U})),n.d(t,"o",(function(){return B})),n.d(t,"r",(function(){return F})),n.d(t,"q",(function(){return k})),n.d(t,"t",(function(){return V})),n.d(t,"y",(function(){return G})),n.d(t,"u",(function(){return K})),n.d(t,"w",(function(){return q})),n.d(t,"d",(function(){return z})),n.d(t,"e",(function(){return H})),n.d(t,"g",(function(){return X})),n.d(t,"h",(function(){return Z})),n.d(t,"f",(function(){return J})),n.d(t,"b",(function(){return ee})),n.d(t,"C",(function(){return te})),n.d(t,"D",(function(){return ne})),n.d(t,"B",(function(){return re})),n.d(t,"l",(function(){return ie})),n.d(t,"A",(function(){return ce})),n.d(t,"k",(function(){return ue})),n.d(t,"z",(function(){return fe})),n.d(t,"j",(function(){return pe}));n("LW0h"),n("lTEL"),n("KOtZ"),n("IAdD"),n("yH/f"),n("7x/C"),n("1IsZ"),n("JtPf"),n("kYxP");var r,a=n("LdEA"),i=n.n(a),o=n("oEOe"),s=n("/kEJ"),c=n("uKEd"),u=n("kGix"),d=n("YeIG"),l=n("aWyx"),f=n("WVrH"),p=n("xCUF"),_=n("AQ79"),v=n("lRnM"),m=n("t0aI"),b=n("P1r1"),y=o.a(_.b,"FETCH_INBOX"),h=o.a(_.b,"UPDATE_LAST_SEEN_EVENT_ID"),E="inbox",O="trusted",I="untrusted",g="untrusted_low_quality",S=Object.freeze({CLOSED:"closed",COLLAPSED:"collapsed",EXPANDED:"expanded"}),A={cursors:(r={},r[E]={fetchStatus:u.a.NONE},r[O]={fetchStatus:u.a.NONE},r[I]={fetchStatus:u.a.NONE},r[g]={fetchStatus:u.a.NONE},r),lastSeenEventIds:{},poppedOutConversationId:null,drawerVisibility:S.COLLAPSED,drawerExperimentEnabled:!1};function T(e,t){switch(void 0===e&&(e=A),t.type){case y.REQUEST:var n,r=t.meta.timelineType;return Object.assign({},e,{cursors:Object.assign({},e.cursors,(n={},n[r]=Object.assign({},e.cursors[r],{fetchStatus:u.a.LOADING}),n))});case y.FAILURE:var a,i=t.meta.timelineType;return Object.assign({},e,{cursors:Object.assign({},e.cursors,(a={},a[i]=Object.assign({},e.cursors[i],{error:t.payload,fetchStatus:u.a.FAILED}),a))});case y.SUCCESS:var o,s=t.meta.timelineType;return Object.assign({},e,{cursors:Object.assign({},e.cursors,(o={},o[s]=Object.assign({},e.cursors[s],{error:void 0,fetchStatus:u.a.LOADED}),o))});case Y:return Object.assign({},e,{cursors:Object.assign({},e.cursors,t.payload.cursors),lastSeenEventIds:C(e.lastSeenEventIds,t.payload.lastSeenEventIds)});case h.REQUEST:return Object.assign({},e,{lastSeenEventIds:Object.assign({},e.lastSeenEventIds,t.meta.lastSeenEventIds)});case f.a:return Object.assign({},A,{cursors:Object.assign({},A.cursors,{inbox:e.cursors.inbox})});case ae:return Object.assign({},e,{poppedOutConversationId:t.conversationId,drawerVisibility:S.EXPANDED});case oe:return Object.assign({},e,{drawerVisibility:t.visibility});case de:return Object.assign({},e,{drawerExperimentEnabled:t.enabled});default:return e}}var C=function(e,t){return{last_seen_event_id:j(e.last_seen_event_id,t.last_seen_event_id),trusted_last_seen_event_id:j(e.trusted_last_seen_event_id,t.trusted_last_seen_event_id),untrusted_last_seen_event_id:j(e.untrusted_last_seen_event_id,t.untrusted_last_seen_event_id)}},j=function(e,t){return Object(m.c)(e,t)?e:t},x=function(e,t,n){void 0===n&&(n="all");var r=Object(b.o)(t);return Object(b.p)(t)?Object.assign({},e,{filter_low_quality:r,include_quality:n}):Object.assign({},e,{filter_low_quality:r})},R=function(e){return e[_.a].inbox},D=function(e){return R(e).cursors},N=function(e){return R(e).lastSeenEventIds},M=function(e){return R(e).poppedOutConversationId},w=function(e){return R(e).drawerVisibility},P=function(e){return R(e).drawerExperimentEnabled},L=function(e){return D(e)[I]},U=function(e){return D(e)[g]},B=function(e){return function(e){return D(e)[E]}(e).fetchStatus},F=function(e){return B(e)===u.a.LOADING},k=function(e){return B(e)===u.a.LOADED},V=function(e){var t=Object(b.p)(e),n=Object.values(Object(v.B)(e)),r=t?n.filter((function(e){var t=e.data,n=t.low_quality;return t.trusted||!n})):n,a=N(e).last_seen_event_id;return W(e,r,a)},G=function(e){var t=Object(b.p)(e),n=N(e).untrusted_last_seen_event_id,r=Object.values(Object(v.B)(e)),a=t?r.filter((function(e){var t=e.data,n=t.trusted,r=t.low_quality;return!n&&!r})):r.filter((function(e){return!e.data.trusted}));return W(e,a,n)},K=function(e){return Object.values(Object(v.B)(e)).filter((function(e){return!e.data.trusted})).length},q=function(e){return Object.values(Object(v.B)(e)).filter((function(e){var t=e.data,n=t.trusted,r=t.low_quality;return!n&&r})).length},W=function(e,t,n){return n?t.reduce((function(t,r){var a=r.data.conversation_id,i=Object(v.A)(e,a),o=Object(v.z)(e,a);return i&&Object(m.b)(i,n)&&!o?t+1:t}),0):0},z=function(e){return void 0===e&&(e={}),function(t,n,r){var a=r.api,i=x(e,n());return o.b(t,{params:i,request:a.DirectMessages.fetchUserInbox})({actionTypes:y,context:"FETCH_DM_INBOX",meta:{timelineType:E}},(function(e){if(e){var t=e.entities,n=t.entries,r=t.users,a=t.tweets,i=t.cards;return ee(Object.assign({},e.result.inbox_initial_state,{entries:n,users:r,tweets:a,cards:i}))}}))}},H=function(e){return void 0===e&&(e={}),function(t,n){var r=n(),a=B(r);return a!==u.a.LOADED&&a!==u.a.LOADING?t(z(e)):Promise.resolve()}},Q=function(e,t){return function(n,r,a){var i=a.api,s=D(r())[e],c=s.status,u=s.min_entry_id,d=e===g?I:e,f=Object.assign({},t,{max_id:u,timelineType:d});if(c!==l.c.HAS_MORE)return Promise.resolve();return o.b(n,{params:f,request:i.DirectMessages.fetchInboxHistory})({actionTypes:y,context:"FETCH_DM_INBOX_HISTORY",meta:{timelineType:e}},(function(t){if(t){var n,r=t.entities,a=r.entries,i=r.users,o=r.tweets,s=r.cards,c=t.result.inbox_timeline;return ee({conversations:c.conversations,inbox_timelines:(n={},n[e]=c,n),entries:a,users:i,tweets:o,cards:s})}}))}},X=function(e){return function(t,n){var r=x(e,n(),"high");return t(Q(I,r))}},Z=function(e){return function(t,n){var r=x(e,n(),"low");return t(Q(g,r))}},J=function(e){return function(t,n){var r=x(e,n());return t(Q(O,r))}},Y=Object(_.c)("UPDATE_INBOX"),$=function(e){return{payload:{cursors:e.inbox_timelines,lastSeenEventIds:i()(e,["inbox_timelines"])},type:Y}},ee=function(e){void 0===e&&(e={});var t=e,n=t.conversations,r=t.entries,a=t.users,o=t.tweets,u=t.cards,l=t.cursor,f=i()(t,["conversations","entries","users","tweets","cards","cursor"]);return[Object(s.c)({cards:u,tweets:o,users:a}),!Object(d.a)(n)&&Object(v.c)(n),!Object(d.a)(r)&&Object(c.a)(r),!Object(d.a)(l)&&Object(p.f)(l),!Object(d.a)(f)&&$(f)].filter((function(e){return e}))},te=function(){return function(e){return e(re({withTrusted:!0}))}},ne=function(){return function(e){return e(re({withUntrusted:!0}))}},re=function(e){var t=void 0===e?{}:e,n=t.withTrusted,r=t.withUntrusted;return function(e,t,a){var i=a.api,s=t(),c=Object(v.B)(s),u=N(s),d=u.last_seen_event_id,l=u.trusted_last_seen_event_id,f=u.untrusted_last_seen_event_id,p=Object.values(c).reduce((function(e,t){var n=t.data,r=n.sort_event_id,a=n.trusted;return e.last_seen_event_id=j(e.last_seen_event_id,r),e.trusted_last_seen_event_id=a?j(e.trusted_last_seen_event_id,r):e.trusted_last_seen_event_id,e.untrusted_last_seen_event_id=a?e.untrusted_last_seen_event_id:j(e.untrusted_last_seen_event_id,r),e}),Object.assign({},u));return Object(m.b)(p.last_seen_event_id,d)||n&&Object(m.b)(p.trusted_last_seen_event_id,l)||r&&Object(m.b)(p.untrusted_last_seen_event_id,f)?(n||delete p.trusted_last_seen_event_id,r||delete p.untrusted_last_seen_event_id,o.c(e,{params:p,request:i.DirectMessages.updateLastSeenEventId})({actionTypes:h,context:"APP_DM_UPDATE_LAST_SEEN",meta:{lastSeenEventIds:p}})):Promise.resolve()}},ae=Object(_.c)("POP_OUT_CONVERSATION"),ie=function(e){return function(t){return t({conversationId:e,type:ae})}},oe=Object(_.c)("SET_DRAWER_VISIBILITY"),se=function(e){return{visibility:e,type:oe}},ce=function(e){return function(t,n,r){return r.userPersistence.set("rweb.dmDrawerVisibility",{visibility:e}),e===S.CLOSED&&t({type:ae}),t(se(e))}},ue=function(){return function(e,t,n){return n.userPersistence.get("rweb.dmDrawerVisibility").then((function(t){t&&e(se(t.visibility))}))}},de=Object(_.c)("SET_DRAWER_EXPERIMENT_ENABLED"),le=function(e){return{enabled:e,type:de}},fe=function(e){return function(t,n,r){return r.userPersistence.set("rweb.dmQuickAccessEnabled",{enabled:e}),t(le(e))}},pe=function(){return function(e,t,n){return n.userPersistence.get("rweb.dmQuickAccessEnabled").then((function(t){t&&e(le(t.enabled))}))}}}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/web_legacy/shared~loader.DMDrawer~bundle.Compose~bundle.RichTextCompose~bundle.DirectMessages~bundle.DMRichTextCompose~b.df7a0404.js.map