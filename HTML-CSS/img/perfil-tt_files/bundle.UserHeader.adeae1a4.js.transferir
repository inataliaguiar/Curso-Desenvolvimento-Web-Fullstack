(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{"0Ki6":function(e,t,n){"use strict";n("i4UL"),n("IAdD");var o=n("1Pcy"),a=n.n(o),i=n("W/Kd"),r=n.n(i),s=n("KEM+"),c=n.n(s),l=n("YRQv"),u=n("ERkP"),h=n("CHgo"),m=n("fs1G"),d=n("7nmT"),p=n.n(d),f=n("rHpw"),_=n("3xO4"),v=n.n(_),b=n("Enqy"),g=l.a(),y={zoom:1,lastX:0,lastY:0,zoomCenter:{x:0,y:0}},E={height:0,width:0,left:0,right:0,top:0,bottom:0},C=function(e,t,n){return Math.min(t,Math.max(e,n))},w=function(e,t){return Math.sqrt(Math.pow(e.clientY-t.clientY,2)+Math.pow(e.clientX-t.clientX,2))},P=function(e){function t(t){var n;return n=e.call(this,t)||this,c()(a()(n),"_itemDimensions",E),c()(a()(n),"_setTouchableNode",(function(e){n._touchableNode=p.a.findDOMNode(e),n._touchableNode&&(n._removeTouchListener=Object(h.a)(n._touchableNode,n._handleTouchMove,!1))})),c()(a()(n),"_handleTouchStart",(function(e){n._zoomable instanceof Element&&(n._zoomedDimensions=n._zoomable.getBoundingClientRect()),n._moved=!1;var t=e.touches.length;2===t?(e.preventDefault(),n._handlePinchStart(e)):1===t&&n._handleTapStart(e)})),c()(a()(n),"_handleTouchMove",(function(e){var t=e.touches.length;2===t?n._handlePinchMove(e):1===t&&(n._moved=!0,n._handlePanMove(e)),e.preventDefault()})),c()(a()(n),"_handleTouchEnd",(function(e){var t=n.props,o=t.maxZoom,a=t.minZoom,i=t.onTap,r=C(a,o,n.state.zoom),s=n.state.zoom;s!==r&&1===r?n.resetZoom():n.setState({lastX:0,lastY:0,zoom:r}),0===e.touches.length?(n._lastTouchTime&&n._lastTouchTime+300>e.timeStamp?(n._clickTimer&&clearTimeout(n._clickTimer),n._handleDoubleTap(e)):s<=1&&!n._moved&&(n._clickTimer=setTimeout(i,300)),n._lastTouchTime=e.timeStamp):e.preventDefault()})),n.state=Object.assign({},y),n._ref=u.createRef(),n}r()(t,e),t.getDerivedStateFromProps=function(e,t){return g&&e.resetZoom?(e.onZoomed(!1),Object.assign({},y)):t};var n=t.prototype;return n.render=function(){var e=this;if(!g)return this.props.children;var t=this.state,n=t.zoom,o=t.zoomCenter,a=this._moved,i={zoom:Object(b.spring)(n),zoomCenterX:Object(b.spring)(o.x),zoomCenterY:Object(b.spring)(o.y)};return u.createElement(v.a,{onTouchEnd:this._handleTouchEnd,onTouchStart:this._handleTouchStart,ref:this._setTouchableNode,style:z.fill},u.createElement(b.Motion,{style:i},(function(t){var n=t.zoom,i=t.zoomCenterX,r=t.zoomCenterY;return u.createElement(v.a,{ref:e._ref,style:[z.fill,{transform:[{scale:n}],transformOrigin:(a?i:o.x)+"px "+(a?r:o.y)+"px"}]},e.props.children)})))},n.componentDidMount=function(){g&&(this._zoomable=p.a.findDOMNode(this._ref.current),this._updateWindowDimensions())},n.componentWillUnmount=function(){this._removeTouchListener&&this._removeTouchListener()},n.resetZoom=function(){this.props.onZoomed(!1),this.setState({zoom:y.zoom})},n._handlePanMove=function(e){if(!(this.state.zoom<=1)&&this._zoomedDimensions&&this._windowDimensions){var t=e.touches[0],n=t.clientX,o=t.clientY;if(this.state.lastX&&this.state.lastY){var a=this.state,i=a.lastX,r=a.lastY,s=a.zoomCenter,c=s.x,l=s.y,u=this._windowDimensions,h=u.height,m=u.width,d=this._zoomedDimensions,p=d.height,f=0,_=0;d.width-m>0&&(f=n-i),p-h>0&&(_=o-r),this.setState({lastX:n,lastY:o,zoomCenter:{x:Math.min(Math.max(c-f,0),m),y:Math.min(Math.max(l-_,0),h)}})}else this.setState({lastX:n,lastY:o})}},n._handlePinchStart=function(e){var t,n,o=e.touches;if(this._updateWindowDimensions(),this._lastDistance=w(o[0],o[1]),1===this.state.zoom){var a=(t=o[0],n=o[1],{x:(t.clientX+n.clientX)/2,y:(t.clientY+n.clientY)/2});this.setState({zoomCenter:this._getZoomCenter(a.x,a.y)}),this.props.onZoomed(!0)}},n._handlePinchMove=function(e){var t=this.state,n=t.zoom,o=t.zoomCenter,a=this.props,i=a.maxZoom,r=a.maxZoomBounce,s=a.minZoom,c=a.minZoomBounce;if(0!==o.x||0!==o.y){var l=w(e.touches[0],e.touches[1]),u=this._lastDistance?l/this._lastDistance:1,h=C(s-c,i+r,n*u);this._lastDistance=l,this.setState({zoom:h})}else 2===e.touches.length&&this._handlePinchStart(e)},n._handleTapStart=function(e){var t=e.touches;this._tapCenter=this._getZoomCenter(t[0].clientX,t[0].clientY)},n._handleDoubleTap=function(e){var t=this.props,n=t.maxZoom,o=t.onZoomed;1!==this.state.zoom?this.resetZoom():(this._updateWindowDimensions(),this.setState({zoom:n,zoomCenter:this._tapCenter||y.zoomCenter}),o(!0))},n._getZoomCenter=function(e,t){this._zoomable instanceof Element&&(this._itemDimensions=this._zoomable.getBoundingClientRect());var n=this._itemDimensions;return{x:e-n.left,y:t-n.top}},n._updateWindowDimensions=function(){this._windowDimensions={height:window.innerHeight,width:window.innerWidth}},t}(u.Component);c()(P,"defaultProps",{maxZoom:2.5,maxZoomBounce:.15,minZoom:1,minZoomBounce:.15,onTap:m.a,onZoomed:m.a,resetZoom:!1});var z=f.a.create((function(e){return{fill:{flex:1}}}));t.a=P},UPvq:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));n("2G9S"),n("IAdD");var o=n("1Pcy"),a=n.n(o),i=n("W/Kd"),r=n.n(i),s=n("KEM+"),c=n.n(s),l=n("ERkP"),u=n("RCZO"),h=n("aWzz"),m=n("3XMw"),d=n.n(m),p=n("l2F/"),f=n.n(p),_=n("3xO4"),v=n.n(_),b=n("mw9i"),g=n("cm6r"),y=n("/yvb"),E=n("rHpw"),C=d.a.ia5e7487,w=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,c()(a()(t),"_handleCloseButtonPress",(function(e){e.stopPropagation(),(0,t.props.onCloseButtonPress)()})),c()(a()(t),"_handleBackgroundPress",(function(){var e=t.props.onCloseButtonPress;t.context.isModal&&e()})),t}return r()(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.children,o=t.backgroundColor,a=t.mediaItem,i=t.mediaUrl,r=t.hideButtons,s=t.topRightButton,c=t.footerButtons,h=t.overlayFooter,m=this.context.isModal,d=Object.assign({backgroundColor:o.rgba},u.a),p=Object.assign({backgroundColor:o.rgb},u.a),_=[P.root,m?d:p,{position:m?"relative":"fixed"}];return l.createElement(l.Fragment,null,l.createElement(v.a,{onClick:this._handleBackgroundPress,style:_},n,c?l.createElement(v.a,{pointerEvents:r?"none":void 0,style:[P.footerButtons,h&&d,h&&P.footerButtonsAbsolute,r&&P.fadeOut]},l.createElement(b.a,{withGutter:!0},c)):null),l.createElement(g.a,{accessibilityRole:"none",interactiveStyles:null,onClick:this._handleCloseButtonPress,pointerEvents:r?"none":void 0,style:[P.buttonWrapper,P.buttonWrapperLeft,u.a,r&&P.fadeOut]},(function(t){return l.createElement(y.a,{accessibilityLabel:C,dominantColor:o.rgb,icon:l.createElement(f.a,null),interactivityState:t,onClick:e._handleCloseButtonPress,type:a||i?"onMedia":"invertedPrimary"})})),s?l.createElement(v.a,{pointerEvents:r?"none":void 0,style:[P.buttonWrapper,P.buttonWrapperRight,u.a,r&&P.fadeOut]},s):null)},t}(l.Component);c()(w,"contextTypes",{isModal:h.bool}),c()(w,"defaultProps",{hideButtons:!1});var P=E.a.create((function(e){return{root:{overflowX:"hidden",overflowY:"hidden",height:"100%",width:"100%"},buttonWrapper:{position:"absolute",top:0,padding:e.spaces.xSmall,alignItems:"center",justifyContent:"center",cursor:"pointer"},buttonWrapperLeft:{left:0},buttonWrapperRight:{right:0},fadeOut:{opacity:0},footerButtons:{width:"100%",alignSelf:"center"},footerButtonsAbsolute:{position:"absolute",bottom:0,paddingBottom:E.a.iPhoneOffsetBottom,zIndex:1}}}))},ac3p:function(e,t,n){"use strict";n.r(t),n.d(t,"UserHeaderScreen",(function(){return Y}));n("2G9S"),n("KqXw"),n("MvUL");var o=n("1Pcy"),a=n.n(o),i=n("W/Kd"),r=n.n(i),s=n("KEM+"),c=n.n(s),l=n("ERkP"),u=n("aWzz"),h=(n("WNMA"),n("oEGd")),m=n("0KEI"),d=n("hqKg"),p=n("QK5w"),f=n("G6rE"),_=Object(f.g)([f.a]),v=function(e,t){return t.match.params.screenName},b=Object(d.createSelector)((function(e,t){return _(e,v(e,t))}),v,(function(e,t){return f.e.selectByScreenName(e,v(e,t))}),p.a,(function(e,t,n,o){return{fetchStatus:e,screenName:t,user:n,canGoBack:o}})),g={createLocalApiErrorHandler:Object(m.d)("USER_HEADER"),fetchOneUserByScreenNameIfNeeded:f.e.fetchOneByScreenNameIfNeeded},y=Object(h.g)(b,g),E=n("GOQE"),C=n("v//M"),w=n("RCZO"),P=n("UPvq"),z=n("wiP2"),T=n("zCf4"),M=n("ziVO"),D=n("3xO4"),S=n.n(D),x=n("0Ki6"),O=n("TIdA"),B=n("A91F"),Z=n("rHpw"),Y=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,c()(a()(t),"state",{isZoomed:!1}),c()(a()(t),"_render",(function(){var e=t.props,n=e.screenName,o=e.user,a=t.state.isZoomed;return o?l.createElement(M.a,{onDismiss:a?void 0:t._handleClose},l.createElement(x.a,{onZoomed:t._handleZoom},l.createElement(S.a,{onClick:t._handleImagePress},l.createElement(O.a,{accessibilityLabel:"",aspectMode:B.a.exact(Z.a.theme.aspectRatios.profileBanner),backgroundColor:Z.a.theme.colors.lightGray,image:o.profile_banner_url})))):l.createElement(T.a,{to:"/"+(n||"404")})})),c()(a()(t),"_handleZoom",(function(e){t.setState({isZoomed:e})})),c()(a()(t),"_handleFetch",(function(){var e=t.props,n=e.createLocalApiErrorHandler;(0,e.fetchOneUserByScreenNameIfNeeded)(e.screenName).catch(n(E.a))})),c()(a()(t),"_handleClose",(function(){var e=t.props,n=e.canGoBack,o=e.history,a=e.screenName;n?o.goBack():o.replace({pathname:"/"+a})})),c()(a()(t),"_handleImagePress",(function(e){e.stopPropagation()})),t}r()(t,e);var n=t.prototype;return n.componentDidMount=function(){this._handleFetch()},n.render=function(){var e=this.props,t=e.fetchStatus,n=e.user,o=Object(w.d)(n);return l.createElement(z.a.Configure,{headerless:!0},l.createElement(P.a,{backgroundColor:o,mediaUrl:n&&n.profile_banner_url,onCloseButtonPress:this._handleClose},l.createElement(S.a,{style:[I.root,this.context.isModal&&I.rootModal]},l.createElement(C.a,{fetchStatus:t,onRequestRetry:this._handleFetch,render:this._render}))))},t}(l.Component);c()(Y,"contextTypes",{isModal:u.bool});var I=Z.a.create((function(e){return{root:{width:"inherit",height:"100%",flexGrow:1,justifyContent:"center"},rootModal:{minWidth:"50vw",width:"100vw"}}}));t.default=y(Y)},ziVO:function(e,t,n){"use strict";n("2G9S"),n("IAdD");var o=n("1Pcy"),a=n.n(o),i=n("W/Kd"),r=n.n(i),s=n("KEM+"),c=n.n(s),l=n("ERkP"),u=n("3xO4"),h=n.n(u),m={startX:0,startY:0},d=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,c()(a()(t),"_pullDistanceY",0),c()(a()(t),"_pullInfo",Object.assign({},m)),c()(a()(t),"_handleTouchStart",(function(e){t._pullInfo.startX=e.touches[0].clientX,t._pullInfo.startY=e.touches[0].clientY})),c()(a()(t),"_handleTouchMove",(function(e){if("number"==typeof t._pullInfo.startX&&"number"==typeof t._pullInfo.startY){var n=e.touches[0],o=n.clientX-t._pullInfo.startX,a=n.clientY-t._pullInfo.startY;Math.abs(o)>10||(e.preventDefault(),t._updatePullPosition(a))}})),c()(a()(t),"_handleTouchEnd",(function(e){Math.abs(t._pullDistanceY)>50?t._handleDismiss():t._resetPullInfo()})),c()(a()(t),"_updatePullPosition",(function(e){t._pullDistanceY=e})),c()(a()(t),"_handleDismiss",(function(){var e=t.props.onDismiss;e&&e(),t._resetPullInfo()})),c()(a()(t),"_resetPullInfo",(function(){t._updatePullPosition(0),t._pullInfo=Object.assign({},m)})),t}return r()(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.onDismiss,o=e.onLayout,a=e.style,i=!!n;return l.createElement(h.a,{onLayout:o,onTouchEnd:i?this._handleTouchEnd:void 0,onTouchMove:i?this._handleTouchMove:void 0,onTouchStart:i?this._handleTouchStart:void 0,style:a},t)},t}(l.Component);t.a=d}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/web_legacy/bundle.UserHeader.adeae1a4.js.map