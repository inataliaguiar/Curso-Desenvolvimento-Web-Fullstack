(window.webpackJsonp=window.webpackJsonp||[]).push([[213],{"+/OB":function(t,e,i){i("ax0f")({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},5878:function(t,e,i){i("ax0f")({target:"Function",proto:!0},{bind:i("zh11")})},IC1n:function(t,e,i){var n=i("fjNU"),a=i("X/SR");t.exports=function(t,e,i){var r=e&&i||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||n)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var s=0;s<16;++s)e[r+s]=o[s];return e||a(o)}},QHXq:function(t,e,i){"use strict";i.r(e),i.d(e,"InlinePlayerContainer",(function(){return Si}));i("hBpG"),i("IAdD");var n,a,r,o,s,c=i("97Jx"),l=i.n(c),u=i("LdEA"),d=i.n(u),h=i("1Pcy"),p=i.n(h),v=i("W/Kd"),y=i.n(v),f=i("KEM+"),_=i.n(f),m=i("ERkP"),g=i("rxPX"),b=i("0KEI"),P=i("6rlp"),T=i("H9MA"),E=i("RqPI"),w=i("yr4d"),M=i("XOJV"),S=i("eXeu"),I=function(){return function(t,e,i){return i.api.getHttpClient()}},A=function(t,e){var i=e.source&&e.source.videoId;return i&&"tweet"===i.type?i.id:void 0},C=Object(g.a)().propsFromState((function(){return{dataSaverMode:T.c,language:E.f,sourceTweet:M.a.createHydratedTweetSelector(A)}})).adjustStateProps((function(t){var e=t.dataSaverMode,i=t.language,n=t.sourceTweet;return{dataSaverMode:e,language:i,mediaAvailability:n&&Object(S.b)(n)||void 0,publisherId:n?Object(S.c)(n):void 0}})).propsFromActions((function(){return{createLocalApiErrorHandler:Object(b.d)("INLINE_PLAYER_CONTAINER"),getTwitterAuthedHttpClient:I,logPromotedVideoEvent:P.b,tweetAdProvider:w.b}})).withAnalytics(),k=i("wrlS"),L=(i("z84I"),i("aWzz")),R=i("6v1f"),O=i("rHpw"),V=i("3xO4"),N=i.n(V),D=function(t){t.preventDefault(),t.stopPropagation()},x=function(t){var e=t.children;return m.createElement(N.a,{onClick:D,style:O.a.absoluteFill},e)},F=i("epkG"),W=i("3XMw"),H=i.n(W),U=i("mN6z"),B=i("/NU0"),j=(i("u+Xj"),i("ylrv")),z=function(){function t(t,e,i){this.placement=t,this.obstructions=e,this.layerId=i}var e=t.prototype;return e.getPositionData=function(){return{percentVisible:this.visibleFraction(),percentOfViewportOccupied:this.placement.viewportOccupiedFraction(),sizesInfo:{viewportSize:this.placement.viewport,mediaSize:this.placement.item}}},e.visibleFraction=function(){var t=this.placement.visiblePart();if(!t)return 0;var e=Object(B.a)(this.layerId)?this.obstructions.getObstructionAboveLayer(this.layerId,t):this.obstructions.getTotalObstruction(t),i=j.a.area(this.placement.item),n=(1-e)*j.a.area(t);return i>0?n/i:0},e.top=function(){return this.placement.item.top},e.distanceToCenter=function(){return this.placement.verticalDistanceToViewportCenter()},e.distanceToTop=function(){return this.placement.verticalDistanceToViewportTop()},e.scrollY=function(){return this.placement.scrollY},t}(),G=i("7nmT"),K=i.n(G),Y=i("zHh/"),q=i("aITJ"),X=(i("1t7P"),i("jQ/y"),i("aLgo"),i("jwue"),i("hCOa"),i("vrRf"),i("plBw"),i("lTEL"),i("KOtZ"),i("M+/F"),i("+/OB"),i("cARO"),i("5878"),i("ho0z"),i("6U7i"),i("ssvU"),i("kH1Z"),i("+KXO"),i("7x/C"),i("JtPf"),i("KqXw"),i("DZ+c"),i("87if"),i("+oxZ"),i("kYxP"),i("sVFb"),i("RhWx")),J=i.n(X),Z=i("r2q8"),Q=i.n(Z),$=i("fN3Q"),tt=i.n($);function et(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return it(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return it(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function it(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var nt="AD_SKIP_EVENT",at="CONFIG_LOADED_EVENT",rt="CTA_CLICK_EVENT",ot="CTA_IMPRESSION_EVENT",st="ERROR_EVENT",ct="FULL_SCREEN_EVENT",lt="GROUPM_VIEW_EVENT",ut="HEARTBEAT_EVENT",dt="HEARTBEAT_START_EVENT",ht="INITIAL_CTA_IMPRESSION_EVENT",pt="INITIAL_INTEND_TO_PLAY_EVENT",vt="INTEND_TO_PLAY_EVENT",yt="LOOP_EVENT",ft="MRC_AUDIBLE_VIEW_EVENT",_t="MRC_VIEW_EVENT",mt="MUTE_EVENT",gt="ONE_SEC_VIEW_EVENT",bt="SIX_SEC_VIEW_EVENT",Pt="PAUSE_EVENT",Tt="PLAY_EVENT",Et="PLAY_FROM_TAP_EVENT",wt="PLAYBACK_25_EVENT",Mt="PLAYBACK_50_EVENT",St="PLAYBACK_75_EVENT",It="PLAYBACK_95_EVENT",At="PLAYBACK_COMPLETE_EVENT",Ct="PLAYBACK_ERROR_EVENT",kt="PLAYBACK_LAPSE_EVENT",Lt="PLAYBACK_START_EVENT",Rt="REPLAY_EVENT",Ot="REWIND_EVENT",Vt="SHRINK_EVENT",Nt="STARTUP_ERROR_EVENT",Dt="TEARDOWN_EVENT",xt="TICK_EVENT",Ft="TRACK_FINISHED_EVENT",Wt="UNMUTE_EVENT",Ht="VIDEO_SESSION_EVENT",Ut="VIDEO_QUALITY_VIEW_EVENT",Bt="VIDEO_VIEW_EVENT",jt="VIEW_THRESHOLD_EVENT",zt="ad",Gt="content",Kt="broadcast",Yt="gif",qt="live",Xt="media_entity",Jt="partner_video",Zt="periscope",Qt="vine",$t="vmap",te=Object.assign({},{event:"url",visit:"url",url:"url",image:"url",watch:"url"},{watch_now:"watch",visit_site:"url",shop:"url",see_more:"url",go_to:"url"});function ee(t){return ne(t,t.source.trackId)}function ie(t){return ne(t,t.currentTrackId)}function ne(t,e){return t.tracks.find((function(t){return e===t.id}))}function ae(t){return t.tracks.find((function(t){return zt===t.displayType}))}function re(t){return Boolean(t)&&t.isPlaying&&!t.isScrubbing&&!t.isMuted}var oe=((n={})[Bt]="creativeView",n[wt]="firstQuartile",n[Mt]="midpoint",n[St]="thirdQuartile",n[At]="complete",n[Tt]="resume",n[Pt]="pause",n[Ot]="rewind",n[st]="adError",n),se=function(){function t(t){var e=this;Object.keys(oe).forEach((function(i){t.on(i,(function(t){e.fireBeacon(oe[i],t)}))})),t.on(Lt,this.onPlaybackStart.bind(this))}var e=t.prototype;return e.onPlaybackStart=function(t){this.fireBeacon("start",t),this.fireBeacon("adImpression",t)},e.fireBeacon=function(t,e){var i=ie(e);if(void 0!==i&&void 0!==i.beacons&&void 0!==i.beacons[t])for(var n,a=et(i.beacons[t]);!(n=a()).done;){var r=n.value;(new window.Image).src=r}},t}(),ce=function(){function t(t){this.analytics=t,this.hasFiredOnTrackMap={},this.analytics.on(ot,this.onCtaImpressionEvent.bind(this))}return t.prototype.onCtaImpressionEvent=function(t){var e=t.currentTrackId;this.hasFiredOnTrackMap[e]||(this.hasFiredOnTrackMap[e]=!0,this.analytics.emit(ht,t))},t}(),le=function(){function t(t){this.analytics=t,this.hasStarted=!1,this.hasFired=!1,this.analytics.on(Lt,this.onPlaybackStartEvent.bind(this)),this.analytics.on(vt,this.onShowEvent.bind(this)),this.analytics.on(st,this.onErrorEvent.bind(this))}var e=t.prototype;return e.onPlaybackStartEvent=function(){this.hasStarted=!0},e.onShowEvent=function(){this.intentToPlayTime=new Date},e.onErrorEvent=function(t,e){var i=this.constructClientMediaEventError(t,e);if(!this.hasStarted&&!this.hasFired){var n,a=void 0!==this.intentToPlayTime?new Date-this.intentToPlayTime:void 0;i&&(n={latency_millis:a,error:i}),this.analytics.emit(Nt,t,Object.assign({latency:a},e),n),this.hasFired=!0}this.analytics.emit(Ct,t,e,i)},e.constructClientMediaEventError=function(t,e){var i=e&&e.media_details&&e.media_details.media_error||{};return{is_fatal:i.is_fatal,category:i.category,message:i.message,retry_count:i.retry_count}},t}(),ue=function(){function t(t){this.bufferingCount=0,this.bufferingDurationMs=0,this.bufferingBeginTimeMs=void 0,t.on(xt,this.onTickEvent.bind(this)),t.on(dt,this.onHeartbeatStart.bind(this)),t.on(ut,this.onHeartbeat.bind(this))}var e=t.prototype;return e.onHeartbeat=function(t){this.reset(t)},e.onHeartbeatStart=function(t){this.reset(t)},e.onTickEvent=function(t){var e=ie(t);void 0!==e&&(e.isBuffering&&null==this.bufferingBeginTimeMs?(this.bufferingBeginTimeMs=Date.now(),this.bufferingCount++):e.isBuffering||null==this.bufferingBeginTimeMs||(this.bufferingDurationMs+=Date.now()-this.bufferingBeginTimeMs,this.bufferingBeginTimeMs=void 0))},e.getBufferTime=function(t){var e=ie(t);if(void 0!==e){var i=this.bufferingDurationMs;return e.isBuffering&&null!=this.bufferingBeginTimeMs&&(i+=Date.now()-this.bufferingBeginTimeMs),i}},e.reset=function(t){var e=ie(t);void 0!==e&&(this.bufferingBeginTimeMs=e.isBuffering?Date.now():void 0,this.bufferingCount=e.isBuffering?1:0,this.bufferingDurationMs=0)},t}();function de(t){return"number"!=typeof t||Number.isNaN(t)||t===1/0||t===-1/0?"string"==typeof t?t:void 0:t.toString()}var he=function(){function t(t){this.analytics=t,this.bufferingDurationListener=new ue(t),this.lastKnownDataUsageBytes=0,this.audibleDuration=0,this.bitrateHistory=[],this.latencyHistory=[],this.previousTickTimestamp,this.analytics.on(xt,this.onTickEvent.bind(this)),this.analytics.on(Tt,this.onPlayEvent.bind(this)),this.analytics.on(Lt,this.onPlaybackStartEvent.bind(this)),this.analytics.on(Ft,this.onTrackFinishedEvent.bind(this)),this.analytics.on(st,this.onErrorEvent.bind(this)),this.analytics.on(Pt,this.onPauseEvent.bind(this)),this.analytics.on(Dt,this.onTeardownEvent.bind(this)),this.analytics.on(yt,this.onLoopEvent.bind(this)),this.analytics.on(nt,this.onAdSkip.bind(this))}var e=t.prototype;return e.onTickEvent=function(t){var e=ie(t);if(void 0!==e){if(this.updateTimesOnTick(e,t),this.updatePerfMetrics(e),t.isScrubbing?this.stopPolling():t.isPlaying&&this.startPolling(t),void 0!==this.lastKnownPlayerState){var i=this.lastKnownPlayerState.percentVisible,n=t.percentVisible;(i>0&&0===n||0===i&&n>0)&&(this.stopPolling(),this.startPolling(t))}this.lastKnownPlayerState=t,this.previousTickTimestamp=Date.now()}},e.onPlayEvent=function(t){this.hasPlaybackStarted&&this.startPolling(t),this.lastKnownPlayerState=t},e.onPlaybackStartEvent=function(t){this.startPolling(t),this.lastKnownPlayerState=t,this.hasPlaybackStarted=!0},e.onTrackFinishedEvent=function(t){this.hasPlaybackStarted=!1,void 0!==ie(t)&&(this.stopPolling(),this.lastKnownPlayerState=t)},e.onErrorEvent=function(t,e){e&&e.media_details&&e.media_details.media_error&&e.media_details.media_error.is_fatal&&(this.stopPolling(),this.lastKnownPlayerState=t)},e.onPauseEvent=function(t,e){this.stopPolling(),this.lastKnownPlayerState=t},e.onTeardownEvent=function(t,e){this.stopPolling(!0),this.lastKnownPlayerState=t},e.onLoopEvent=function(t){this.startPolling(t)},e.onAdSkip=function(){this.stopPolling()},e.updateTimesOnTick=function(t,e){var i;void 0!==(i=t.contentType===Kt||t.contentType===qt||t.contentType===Zt?t.absoluteTimeMs:t.currentTimeMs)&&(re(e)&&void 0!==this.lastTimeMs&&(this.audibleDuration+=i-this.lastTimeMs),this.lastTimeMs=i,void 0===this.startTimeMs&&(this.startTimeMs=i))},e.startPolling=function(t){var e=ee(t);void 0===this.intervalId&&void 0!==e&&e.contentType!==Qt&&(this.analytics.emit(dt,t),this.onHeartbeatStart(t))},e.stopPolling=function(t){(this.intervalId||t)&&(this.onHeartbeat(),this.lastTimeMs=void 0,this.startTimeMs=void 0),void 0!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0)},e.onHeartbeatStart=function(t){this.intervalId=setInterval(this.onHeartbeat.bind(this),t.heartbeatIntervalMs||5e3),this.lastTimeMs=void 0,this.startTimeMs=void 0,this.bitrateHistory=[],this.latencyHistory=[]},e.updatePerfMetrics=function(t){if(this.previousTickTimestamp){var e=Date.now()-this.previousTickTimestamp;t.currentBitrate&&this.bitrateHistory.push({value:t.currentBitrate,weight:e}),t.liveLatencyMs&&this.latencyHistory.push({value:t.liveLatencyMs,weight:e})}},e.onHeartbeat=function(){var t=this.lastKnownPlayerState;if(t){var e=ie(t),i=this.getProgramDateTimeMs();if(void 0!==i&&void 0!==e){var n=e.currentBitrate?{sampled_bitrate:e.currentBitrate}:{},a=0;t.dataUsageBytes&&(a=t.dataUsageBytes-this.lastKnownDataUsageBytes,this.lastKnownDataUsageBytes=t.dataUsageBytes);var r,o,s={data_usage_bytes:a},c=this.bufferingDurationListener.bufferingCount,l=this.bufferingDurationListener.getBufferTime(t),u=Math.floor(100*t.percentVisible),d=Object.assign({buffering_duration_millis:l,video_visibility:u},{start_program_date_time_millis:i.start_program_date_time_millis,end_program_date_time_millis:i.end_program_date_time_millis},n,s),h={buffering_duration_millis:de(l),buffering_count:c,percent_in_view:u,sampled_bits_per_second:e.currentBitrate,data_usage_bytes:de(s.data_usage_bytes),start_program_date_time_millis:de(i.start_program_date_time_millis),end_program_date_time_millis:de(i.end_program_date_time_millis),audible_duration_millis:de(i.audible_duration_millis),bandwidth_estimate_bps:de(t.bandwidthEstimateBps),bitrate_metrics:(r=this.bitrateHistory,o=ve(r),o&&{min_bps:Math.round(o.min),max_bps:Math.round(o.max),avg_bps:Math.round(o.avg)}),live_or_non_live_heartbeat_metrics:pe(e.isLive,this.latencyHistory)};this.analytics.emit(ut,t,d,h)}}},e.getProgramDateTimeMs=function(){if(void 0!==this.startTimeMs&&void 0!==this.lastTimeMs){var t=this.startTimeMs,e=this.lastTimeMs,i=this.audibleDuration;return this.startTimeMs=this.lastTimeMs,this.audibleDuration=0,{start_program_date_time_millis:Math.round(t),end_program_date_time_millis:Math.round(e),audible_duration_millis:Math.round(i)}}return{}},t}();function pe(t,e){var i=ve(e);return t?{live_heartbeat_metrics:{latency_metrics:i&&{min_ms:Math.round(i.min),max_ms:Math.round(i.max),avg_ms:Math.round(i.avg)}}}:{non_live_heartbeat_metrics:{}}}function ve(t){if(t&&t.length){var e=t.map((function(t){return t.value}));return{min:Math.min.apply(Math,J()(e)),max:Math.max.apply(Math,J()(e)),avg:function(t){var e=t.reduce((function(t,e){return t+e.weight}),0);return t.reduce((function(t,e){return t+e.value*e.weight}),0)/e}(t)}}}var ye=function(){function t(t){this.analytics=t,this.hasFiredOnTrackMap={},this.analytics.on(vt,this.onIntendToPlayEvent.bind(this)),this.analytics.on(Rt,this.onIntendToPlayEvent.bind(this)),this.analytics.on(Ft,this.onTrackFinishedEvent.bind(this))}var e=t.prototype;return e.onIntendToPlayEvent=function(t){this.hasFiredOnTrackMap[t.currentTrackId]||(this.hasFiredOnTrackMap[t.currentTrackId]=!0,this.analytics.emit(pt,t))},e.onTrackFinishedEvent=function(t){var e=ie(t);e&&(e.shouldLoop||(this.hasFiredOnTrackMap[t.currentTrackId]=!1))},t}(),fe=function(){function t(t){this.analytics=t,this.analytics.on(Ft,this.onTrackFinishedEvent.bind(this))}return t.prototype.onTrackFinishedEvent=function(t){var e=ie(t);void 0!==e&&e.shouldLoop&&this.analytics.emit(yt,t)},t}(),_e={home:"HomeTimeline",list:"Lists",live_broadcast:"BroadcastPage",live_event_timeline:"EventPage",me:"UserTimeline",moments:"Moments",permalink:"TweetCard",profile:"UserTimeline",search:"Search"},me=function(t){return"/api/v2/"+t},ge="videoStartWatchingLive",be="videoPingLive",Pe="videoStopWatchingLive",Te=((a={})[ge]={method:"GET",path:me("startPublic")},a[be]={method:"GET",path:me("pingPublic")},a[Pe]={method:"GET",path:me("stopPublic")},a.videoStartWatchingReplay={method:"GET",path:me("replayViewedPublic")},a.videoPingReplay={method:"GET",path:me("pingReplayViewedPublic")},a.videoStopWatchingReplay={method:"GET",path:me("endReplayViewedPublic")},a),Ee=function(){function t(t,e){if(this.httpClient=t,this.idempotenceId=Date.now()+"--"+tt()(),e){var i=e.scribeContext,n=e.periscopeComponent;this.pageContext=this.getPageContext(i),this.componentContext=n}}var e=t.prototype;return e.getPageContext=function(t){var e=t.page;return"permalink_overlay"===t.section?"TweetCard":_e[e]||""},e.call=function(t,e){var i={"X-Idempotence":this.idempotenceId},n=Te[t],a=n.method,r=n.path;return this.httpClient.dispatch({headers:i,host:"https://proxsee.pscp.tv",method:a,path:r,params:e})},e.videoStartWatching=function(t,e,i){var n=this;return new Promise((function(a,r){("string"!=typeof t||t.length<1)&&r(new Error("Cannot videoStartWatching. lifecycleToken not valid, lifecycleToken="+t));var o=e?"videoStartWatchingReplay":ge,s={life_cycle_token:t,auto_play:!!i};n.pageContext&&(s.page=n.pageContext),n.componentContext&&(s.component=n.componentContext),n.call(o,s).then((function(t){var e=JSON.parse(t.body).session;e?a(e):r("No valid Session")}),r)}))},e.videoPingWatching=function(t,e){var i=this;return new Promise((function(n,a){("string"!=typeof t||t.length<1)&&a(new Error("Cannot videoPingWatching. session not valid, session="+t));var r=e?"videoPingReplay":be;i.call(r,{session:t}).then((function(t){JSON.parse(t.body).success?n():a("Ping request failed")}),a)}))},e.videoStopWatching=function(t,e){var i=this;return new Promise((function(n,a){("string"!=typeof t||t.length<1)&&a(new Error("Cannot videoStopWatching. session not valid, session="+t));var r=e?"videoStopWatchingReplay":Pe;i.call(r,{session:t}).then((function(t){JSON.parse(t.body).success?n():a("StopWatching request failed")}),a)}))},t}();var we=function(){function t(t){this.api=t,this.handleStartWatching=this.handleStartWatching.bind(this),this.updateSession=this.updateSession.bind(this),this.startPingWatching=this.startPingWatching.bind(this),this.isVideoPreview=!1,this.isReplay=!0}var e=t.prototype;return e.updateSession=function(t){this.session=t},e.setStartWatchingTimer=function(){this.startWatchingTimer=setTimeout(this.handleStartWatching,3e3)},e.clearStartWatchingTimer=function(){this.startWatchingTimer&&clearTimeout(this.startWatchingTimer)},e.handleStartWatching=function(){if(!this.isWatching){this.stopPingWatching();var t=this.api.videoStartWatching(this.lifecycleToken,this.isReplay,this.isVideoPreview).then(this.updateSession).then(this.startPingWatching);return this.isWatching=!0,t}},e.startPingWatching=function(){var t=this;this.stopPingWatching(),this.pingWatchingTimer=setInterval((function(){t.isWatching?t.api.videoPingWatching(t.session,t.isReplay):t.stopPingWatching()}),3e4)},e.stopPingWatching=function(){clearInterval(this.pingWatchingTimer)},e.updateLifecycleToken=function(t){void 0!==t&&t!==this.lifecycleToken&&(this.lifecycleToken=t,this.isWatching&&(this.stopWatching(),this.handleStartWatching()))},e.updateIsReplay=function(t){void 0!==t&&t!==this.isReplay&&(this.isReplay=t)},e.startWatching=function(){return this.isVideoPreview=!1,this.handleStartWatching()},e.startWatchingPreview=function(){this.isVideoPreview=!0,this.clearStartWatchingTimer(),this.setStartWatchingTimer()},e.stopWatching=function(){this.isWatching&&(this.stopPingWatching(),this.session&&this.api.videoStopWatching(this.session,this.isReplay),this.isWatching=!1)},e.destroy=function(){this.stopWatching(),this.clearStartWatchingTimer(),this.isVideoPreview=void 0,this.lifecycleToken=void 0,this.session=void 0,this.isReplay=void 0,this.isWatching=void 0,this.pingWatchingTimer=void 0},t}(),Me=[at,Tt,Pt,Ft,Dt],Se=function(){function t(t,e){var i=this;this.analytics=t,this.lifecycleController=e,Me.map((function(t){return i.analytics.on(t,i.possiblyHandleEvent.bind(i,t))}))}var e=t.prototype;return e.possiblyHandleEvent=function(t,e){if(this.shouldSendPeriscopeAnalytics(e)){var i=ie(e);switch(t){case at:this.updateLifecycleToken(e),this.updateReplayState(!i.isLive);break;case Tt:this.handleStartWatching(e);break;case Pt:this.handleStopWatching(e);break;case Ft:this.handleStopWatching(e),this.updateReplayState(!0);break;case Dt:this.teardownPeriscopeLifecycle()}}},e.shouldSendPeriscopeAnalytics=function(t){var e=ie(t);return void 0!==e&&(e.contentType===Zt||e.contentType===Kt)},e.getLifecycleToken=function(t){return ie(t).lifecycleToken},e.updateLifecycleToken=function(t){var e=this.getLifecycleToken(t);this.lifecycleController.updateLifecycleToken(e)},e.updateReplayState=function(t){this.lifecycleController.updateIsReplay(t)},e.handleStartWatching=function(t){this.getLifecycleToken(t)&&(t.isPreview?this.lifecycleController.startWatchingPreview():this.lifecycleController.startWatching())},e.handleStopWatching=function(t){this.getLifecycleToken(t)&&this.lifecycleController.stopWatching()},e.teardownPeriscopeLifecycle=function(){this.lifecycleController.destroy(),this.lifecycleController=null},t}(),Ie=function(){function t(t){this.analytics=t,this.lapseMap={},this.analytics.on(xt,this.onTickEvent.bind(this)),this.analytics.on(Ft,this.onTrackFinishedEvent.bind(this)),this.analytics.on(nt,this.onAdSkipEvent.bind(this)),this.analytics.on(Bt,this.onVideoViewEvent.bind(this))}var e=t.prototype;return e.onTrackFinishedEvent=function(t){var e=ie(t);if(void 0!==e){var i=this.lapseMap[e.id];if(void 0!==i){i.timePlayedToMs=0;var n=ee(t);n&&n.contentType!==Yt&&!e.shouldLoop&&(this.emit(i,t),i.viewFired=!1)}}},e.onAdSkipEvent=function(t){this.onTickEvent(t);var e=ie(t);if(void 0!==e){var i=this.lapseMap[e.id];this.emit(i,t)}},e.onVideoViewEvent=function(t){var e=ie(t);if(void 0!==e){var i=this.lapseMap[e.id];void 0===i&&(i=this.initializeLapseMapForTrack(e),this.lapseMap[e.id]=i),i.viewFired=!0}},e.onTickEvent=function(t){var e=ie(t);if(void 0!==e){var i=this.lapseMap[e.id];void 0===i&&(i=this.initializeLapseMapForTrack(e),this.lapseMap[e.id]=i),t.isScrubbing?i.timePlayedToMs=e.currentTimeMs:(this.updateTimingData(e,i),this.checkPlaybackLapse(i,t))}},e.initializeLapseMapForTrack=function(t){return{timePlayedMs:0,timePlayedToMs:t.currentTimeMs,viewFired:!1}},e.updateTimingData=function(t,e){var i=t.currentTimeMs-e.timePlayedToMs;e.timePlayedToMs=t.currentTimeMs,e.timePlayedMs+=i},e.checkPlaybackLapse=function(t,e){t.timePlayedMs>1e4&&this.emit(t,e)},e.emit=function(t,e){var i=ee(e),n=t.viewFired,a=t.timePlayedMs;n&&a>0&&i&&i.contentType!==qt&&(this.analytics.emit(kt,e,{playback_lapse_ms:Math.round(a)}),t.timePlayedMs=0)},t}(),Ae=function(t){return e="AD_CTA_TO_ENGAGEMENT_MAPPING_ERROR",(i=new Error("Unable to map CTA type to engagement type for: "+t)).name=e,i;var e,i},Ce=function(){function t(){}return t.set=function(e){t.report=e},t}();_()(Ce,"report",(function(t){}));var ke=((r={})[Lt]="playback_start",r[wt]="playback_25",r[Mt]="playback_50",r[St]="playback_75",r[It]="playback_95",r[At]="playback_complete",r[_t]="mrc_view",r[lt]="groupm_view",r[gt]="1sec_view",r[bt]="6sec_view",r[Bt]="view",r[Et]="play_from_tap",r[jt]="view_threshold",r),Le=function(){function t(t,e){var i=this;this.promotedLogHandler=e,Object.keys(ke).forEach((function(e){t.on(e,(function(t,n){var a=ie(t);void 0!==a&&i.log(i.buildEventName(e,a),t,n)}))})),t.on(Lt,this.logImpression.bind(this)),t.on(rt,this.onCtaClickEvent.bind(this)),t.on(Ht,this.onVideoSessionEvent.bind(this))}var e=t.prototype;return e.buildEventName=function(t,e){var i=ke[t];return"video_"+e.displayType+"_"+i},e.log=function(t,e,i,n){void 0===i&&(i={});var a=ie(e),r=this.getPromotedEventData(e,a);if(void 0!==r.impression_id){var o=this.getAmplifyDetailsData(e,a,i),s=JSON.stringify({amplify_details:o}),c=n&&JSON.stringify(n),l=Object.assign(r,o,{event:t,card_event:s,engagement_metadata:c});this.promotedLogHandler.log(l)}},e.logImpression=function(t){var e=ie(t);this.isPromotedTrack(t,e)&&this.log("impression",t)},e.onCtaClickEvent=function(t){var e=ie(t);if(void 0!==e){var i=e.cta;if(void 0!==i)if(e.displayType===zt){var n=te[i.type];n?this.log("video_"+e.displayType+"_cta_"+n+"_click",t):Ce.report(Ae(i.type))}else this.log("video_cta_"+i.type+"_click",t)}},e.onVideoSessionEvent=function(t,e){void 0!==e&&this.log("video_session",t,{},e)},e.isPromotedTrack=function(t,e){return e&&e.impressionId&&e.disclosureType},e.getPromotedEventData=function(t,e){var i=e.disclosureType||t.disclosureType;return{impression_id:e.impressionId||t.impressionId,earned:"earned"===i}},e.getAmplifyDetailsData=function(t,e,i){var n=ee(t),a=ae(t)||{};return Object.assign({content_id:n.contentId,dynamic_preroll_type:a.dynamicPrerollType,preroll_uuid:a.contentId,preroll_owner_id:a.publisherId,video_uuid:e.contentId,video_type:e.displayType===Gt?"video":"ad",video_is_muted:t.isMuted,video_visibility:Math.floor(100*t.percentVisible)},i)},t}(),Re=function(){function t(t){this.analytics=t,this.analytics.on(xt,this.onTickEvent.bind(this))}return t.prototype.onTickEvent=function(t){var e=ie(t);void 0!==e&&(t.isScrubbing&&void 0===this.scrubbingStartTime?this.scrubbingStartTime=e.currentTimeMs:t.isScrubbing||void 0===this.scrubbingStartTime||(e.currentTimeMs<this.scrubbingStartTime&&this.analytics.emit(Ot,t),this.scrubbingStartTime=void 0))},t}(),Oe=((o={})[Bt]="video_view",o[Et]="play_from_tap",o[jt]="view_threshold",o[ft]="video_mrc_audible_view",o[_t]="video_mrc_view",o[bt]="video_6sec_view",o[Lt]="playback_start",o[wt]="playback_25",o[Mt]="playback_50",o[St]="playback_75",o[It]="playback_95",o[At]="playback_complete",o[pt]="intent_to_play",o[Tt]="play",o[Pt]="pause",o[Rt]="replay",o[yt]="loop",o[mt]="mute",o[Wt]="unmute",o[ct]="full_screen",o[Vt]="shrink",o[kt]="playback_lapse",o[Ct]="error",o[Nt]="playback_startup_error",o[Ut]="video_quality_view",o[nt]="video_ad_skip",o),Ve=["playback_lapse","video_1sec_view","shrink","full_screen"].reduce((function(t,e){return t[e]=!0,t}),{}),Ne="tweet",De="client_event",xe="live_video_heartbeat_event",Fe=7,We=13,He=16,Ue=26,Be=28,je=1,ze=2,Ge=1,Ke=2,Ye=["appplayer","poll2choice_video","poll3choice_video","poll4choice_video","promo_video_convo","promo_video_website","video_direct_message"],qe=/^([0-9]{1,2})_([0-9]+)$/,Xe=function(){function t(t,e,i){var n=this;this.scribeHandler=e,this.context=i||{},this.isAdFormatsCard=-1!==Ye.indexOf(this.context.cardType),Object.keys(Oe).forEach((function(e){t.on(e,(function(t,i,a){n.scribe(Oe[e],t,i,a)}))})),t.on(rt,this.onCtaClickEvent.bind(this)),t.on(ht,this.onCtaImpressionEvent.bind(this)),t.on(ut,this.onHeartbeatEvent.bind(this))}var e=t.prototype;return e.onCtaClickEvent=function(t){var e=ie(t).cta;e&&e.type&&this.scribe("cta_"+e.type+"_click",t)},e.onCtaImpressionEvent=function(t){var e=ie(t).cta;e&&e.type&&this.scribe("cta_"+e.type+"_impression",t)},e.onHeartbeatEvent=function(t,e,i){var n=ee(t);if(void 0!==n){var a;switch(n.contentType){case qt:case Kt:a=xe;break;default:a=De}this.scribe("heartbeat",t,e,i,a)}},e.scribe=function(t,e,i,n,a){void 0===i&&(i={}),void 0===n&&(n={}),void 0===a&&(a=De);var r,o,s=ee(e)||{},c=ie(e)||{},l=ae(e)||{},u=e.session||{},d=(e.features||{}).isLiveTimecodeEnabled&&c.requestedTimecode>0?1e3*c.requestedTimecode:void 0;this.isActionSupportedInClientMediaEvent(t)&&(r={media_client_event_type:(o={},o[t]=n,o),session_state:{session_id:u.id,content_video_identifier:Ze(this.getContentIdentifier(s),this.context.scribeContext),video_ads_passthrough_data:e.videoAnalyticsScribePassthrough,live_event_identifier:this.getLiveEventIdentifier(e,s.contentType),tweet_id:this.getTweetId(e.source,s.contentType)},playing_media_state:{video_type:c.displayType===Gt?ze:je,media_asset_url:this.getVariantUrl(c),media_timecode_millis:de(d),media_metadata:{broadcast_id:c.broadcastId,twitter_publisher_id:de(c.publisherId),publisher_identifier:Qe(c.publisherId,c.periscopePublisherId,this.context.scribeContext)},broadcast_media_state:$e(c.contentType,c.isLive)},player_state:{is_muted:e.isMuted}});var h=Object.assign({},this.getBaseItem(e.source,e.eventId),{media_asset_url:this.getVariantUrl(c),video_uuid:c.contentId,video_owner_id:c.publisherId,video_type:c.displayType===Gt?"video":"ad",promoted_id:c.impressionId||e.impressionId,content_id:s.contentId,dynamic_preroll_type:l.dynamicPrerollType,preroll_uuid:l.contentId,preroll_owner_id:l.publisherId,publisher_id:s.publisherId,media_session_id:u.id,video_analytics_scribe_passthrough:e.videoAnalyticsScribePassthrough,client_media_event:r,media_timecode_millis:d,disclosure_type:c.disclosureType||e.disclosureType},i,this.getLexMetadata(e,s));this.scribeHandler.log({namespace:{element:this.getScribeElement(s),action:t},category:a,data:{items:[h]}})},e.getContentIdentifier=function(t){var e=t.contentId,i=this.parseMediaKeyString(e);if(i)return{media_platform_identifier:i};switch(t.contentType){case Xt:case Yt:case qt:case Kt:return this.getMediaPlatformIdentifierUsingDefaultCategory(t);case $t:return this.isAdFormatsCard?{media_platform_identifier:{media_category:this.getMediaEntityCategoryUsingPlaybackUrl(t),media_id:e}}:{amplify_card_identifier:{vmap_url:t.vmapUrl,content_id:e}};case Qt:case Zt:case Jt:default:return{unknown_identifier:{content_id:e}}}},e.parseMediaKeyString=function(t){var e=qe.exec(t)||[],i=e[1],n=e[2],a=+i;if(a&&n)return{media_category:a,media_id:n}},e.getMediaPlatformIdentifierUsingDefaultCategory=function(t){var e=this.defaultMediaCategory(t);return e?{media_platform_identifier:{media_category:e,media_id:t.contentId}}:{unknown_identifier:{content_id:t.contentId}}},e.getMediaEntityCategoryUsingPlaybackUrl=function(t){var e=this.getVariantUrl(t);if(e){if(-1!==e.indexOf("amplify_video"))return We;if(-1!==e.indexOf("ext_tw_video"))return Fe}},e.defaultMediaCategory=function(t){switch(t.contentType){case Yt:return He;case qt:return Ue;case Kt:return Be;case Xt:return this.getMediaEntityCategoryUsingPlaybackUrl(t);default:return}},e.getLiveEventIdentifier=function(t,e){return t.eventId?{lex_event_identifier:{lex_event_id:t.eventId}}:e===qt?{legacy_live_event_identifier:{legacy_live_event_id:t.source.id}}:void 0},e.getTweetId=function(t,e){return e===Kt||e===qt?t.tweetId:t.type===Ne?t.id:void 0},e.getScribeElement=function(t){switch(t.contentType){case Qt:return"vine_player";case Yt:return"gif_player";case $t:return"platform_amplify_card";case qt:case Kt:return"live_video_player";case Jt:return"partner_video_player";case Zt:return"periscope_player";case Xt:default:return"video_player"}},e.getBaseItem=function(t,e){var i=this.context.baseScribeItem;return i||(t.type===Ne?{id:t.id,item_type:"0"}:t.tweetId?{id:t.tweetId,item_type:"0"}:e?{id:e,item_type:"28"}:void 0)},e.getLexMetadata=function(t,e){var i=this.context.scribeContext||{},n={},a={};return e.broadcastId&&(n.is_replay_broadcast=!e.isLive,a.tweet_id=t.source.tweetId,"live_event_timeline"===i.page&&"tweet"!==i.component?n.host_broadcast_id=e.broadcastId:n.target_broadcast_id=e.broadcastId),t.eventId&&("live_event_timeline"===i.page&&"tweet"!==i.component?a.host_event_id=t.eventId:a.target_event_id=t.eventId),{live_broadcast_details:n,live_video_event_details:a}},e.getVariantUrl=function(t){var e=t.variants&&t.variants[t.currentVariantIndex];return e&&e.src},e.isActionSupportedInClientMediaEvent=function(t){return!Ve[t]},t}();function Je(t){return t&&"messages"===t.page}function Ze(t,e){return Je(e)?{scrubbed_identifier:{}}:t}function Qe(t,e,i){return Je(i)?{scrubbed_publisher_identifier:{}}:t&&e?{twitter_periscope_publisher_identifier:{twitter_id:de(t),periscope_id:e}}:t?{twitter_publisher_identifier:{id:de(t)}}:e?{periscope_publisher_identifier:{id:e}}:{unknown_publisher_identifier:{}}}function $e(t,e){if(t===Kt||t===qt||t===Zt)return{broadcast_state:e?Ge:Ke}}var ti=function(){function t(t){this.analytics=t,this.analytics.on(Rt,this.onReplayEvent.bind(this)),this.analytics.on(Ft,this.onTrackFinishedEvent.bind(this)),this.analytics.on(pt,this.onInitialIntendToPlayEvent.bind(this))}var e=t.prototype;return e.onInitialIntendToPlayEvent=function(t){this.resetLatencyStartDate(t.intentToPlayTime)},e.onReplayEvent=function(){this.resetLatencyStartDate()},e.onTrackFinishedEvent=function(t){this.resetLatencyStartDate(),this.trackId!==t.currentTrackId&&(this.trackId=t.currentTrackId)},e.resetLatencyStartDate=function(t){this.latencyStartDate=t||new Date},e.getLatencyData=function(){if(void 0!==this.latencyStartDate)return{latency:new Date-this.latencyStartDate}},t}(),ei=[{progress:.25,event:wt},{progress:.5,event:Mt},{progress:.75,event:St},{progress:.95,event:It},{progress:1,event:At}],ii=function(){function t(t){this.analytics=t,this.eventMap={},this.playbackLatencyListener=new ti(t),this.analytics.on(Ft,this.onTrackFinishedEvent.bind(this)),this.analytics.on(xt,this.onTickEvent.bind(this))}var e=t.prototype;return e.onTrackFinishedEvent=function(t){var e=ie(t);void 0!==e&&(e.shouldLoop||(this.eventMap[t.currentTrackId]={}))},e.onTickEvent=function(t){var e=ie(t);if(void 0!==e&&e.durationMs){var i=this.eventMap[e.id];void 0===i&&(i={},this.eventMap[e.id]=i),this.checkAllTentpoles(e,i,t)}},e.checkAllTentpoles=function(t,e,i){if(i.isPlaying){var n=t.durationMs,a=t.currentTimeMs,r=this.playbackLatencyListener.getLatencyData()||{},o={latency_millis:r.latency,cache_info:{notCached:{}}};this.emitOnce(Lt,e,i,r,o),t.isLive||this.checkProgressTentpoles(n,a,e,i)}},e.checkProgressTentpoles=function(t,e,i,n){var a=this;ei.forEach((function(r){var o=r.progress*t;e>=o-1e3&&e<=o+1e3&&a.emitOnce(r.event,i,n)}))},e.emitOnce=function(t,e,i,n,a){e[t]||(this.analytics.emit(t,i,n,a),e[t]=!0)},t}(),ni=[0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100],ai=((s={})[Qt]=2,s[Yt]=3,s[$t]=1,s[Xt]=1,s[qt]=1,s[Zt]=5,s[Kt]=1,s),ri=function(){function t(t){this.analytics=t,this.sessionDataStore={},this.analytics.on(xt,this.onTickEvent.bind(this)),this.analytics.on(ct,this.onFullscreenEvent.bind(this)),this.analytics.on(Vt,this.onShrinkEvent.bind(this)),this.analytics.on(Ft,this.onTrackFinishedEvent.bind(this)),this.analytics.on(nt,this.onTrackInterrupt.bind(this)),this.analytics.on(Dt,this.onTrackInterrupt.bind(this))}var e=t.prototype;return e.onTickEvent=function(t){var e=ie(t);if(void 0!==e){var i=this.getOrCreateNewSessionDataForTrack(e,t);t.isScrubbing?i.currentTimeMs=e.currentTimeMs:this.updateViewData(e,i,t)}},e.onFullscreenEvent=function(t){var e=ie(t);void 0!==e&&(this.getOrCreateNewSessionDataForTrack(e,t).isFullscreenMode=!0)},e.onShrinkEvent=function(t){var e=ie(t);void 0!==e&&(this.getOrCreateNewSessionDataForTrack(e,t).isFullscreenMode=!1)},e.onTrackFinishedEvent=function(t){var e=ie(t);if(void 0!==e){var i=this.sessionDataStore[e.id];if(void 0!==i)if(e.shouldLoop)i.currentTimeMs=0;else{if(i.timeWatchedMs>0){var n=this.constructVideoSessionDetails(i,e);this.emitVideoSessionEvent(t,n)}this.sessionDataStore[e.id]=void 0}}},e.onTrackInterrupt=function(t){var e=ie(t);if(void 0!==e){var i=this.sessionDataStore[e.id];if(void 0!==i){if(i.timeWatchedMs>0){var n=this.constructVideoSessionDetails(i,e);this.emitVideoSessionEvent(t,n)}this.sessionDataStore[e.id]=void 0}}},e.getOrCreateNewSessionDataForTrack=function(t,e){var i=this.sessionDataStore[t.id];return void 0===i&&(i={sizesInfoAtTheStart:e.sizesInfo,currentTimeMs:t.currentTimeMs,isFullscreenMode:!1,timeWatchedMs:0,timeWatchedFullscreenMs:0,timeWatchedWithAudioMs:0,timeWatchedFullscreenWithAudioMs:0,watchedMsByInViewPct:this.generateNewAggregateHistogram(),watchedWithAudioMsByInViewPct:this.generateNewAggregateHistogram(),watchedMsByViewportPct:this.generateNewAggregateHistogram(),maxContinuousWatchedMsByInViewPct:this.generateNewMaxContinuousHistogram(),maxContinuousWatchedWithAudioMsByInViewPct:this.generateNewMaxContinuousHistogram()},this.sessionDataStore[t.id]=i),i},e.generateNewAggregateHistogram=function(){for(var t,e={},i=et(ni);!(t=i()).done;){e[t.value]=0}return e},e.generateNewMaxContinuousHistogram=function(){for(var t,e={},i=et(ni);!(t=i()).done;){e[t.value]={current:0,max:0}}return e},e.resetContinuousViewDataForHistogram=function(t){for(var e,i=et(ni);!(e=i()).done;){var n=e.value;this.resetContinuousViewDataForBucket(t[n])}},e.resetContinuousViewDataForBucket=function(t){t.max=Math.max(t.current,t.max),t.current=0},e.updateViewData=function(t,e,i){var n=t.currentTimeMs-e.currentTimeMs,a=e.isFullscreenMode?1:i.percentVisible,r=e.isFullscreenMode?1:i.percentOfViewportOccupied;e.currentTimeMs=t.currentTimeMs,n<0||(e.timeWatchedMs+=n,this.updateAggregateHistogram(e.watchedMsByInViewPct,a,n),this.updateAggregateHistogram(e.watchedMsByViewportPct,r,n),this.updateMaxContinuousHistogram(e.maxContinuousWatchedMsByInViewPct,a,n),i.isMuted?this.resetContinuousViewDataForHistogram(e.maxContinuousWatchedWithAudioMsByInViewPct):(e.timeWatchedWithAudioMs+=n,this.updateAggregateHistogram(e.watchedWithAudioMsByInViewPct,a,n),this.updateMaxContinuousHistogram(e.maxContinuousWatchedWithAudioMsByInViewPct,a,n)),e.isFullscreenMode&&(e.timeWatchedFullscreenMs+=n,i.isMuted||(e.timeWatchedFullscreenWithAudioMs+=n)))},e.updateAggregateHistogram=function(t,e,i){if(0!==e)for(var n,a=100*e,r=et(ni);!(n=r()).done;){var o=n.value;a>=o&&(t[o]+=i)}},e.updateMaxContinuousHistogram=function(t,e,i){if(0!==e)for(var n,a=100*e,r=et(ni);!(n=r()).done;){var o=n.value;a>=o?t[o].current+=i:t[o].current>0&&this.resetContinuousViewDataForBucket(t[o])}else this.resetContinuousViewDataForHistogram(t)},e.constructVideoSessionDetails=function(t,e){return{video_details:{is_preroll_video:e.displayType===zt,video_length:Math.round(e.durationMs),time_watched:Math.round(t.timeWatchedMs),time_watched_fullscreen:Math.round(t.timeWatchedFullscreenMs),time_watched_with_audio:Math.round(t.timeWatchedWithAudioMs),time_watched_fullscreen_with_audio:Math.round(t.timeWatchedFullscreenWithAudioMs),time_watched_100_with_audio:Math.round(t.watchedWithAudioMsByInViewPct[100]),video_type:ai[e.contentType],watched_ms_by_in_view_pct:this.constructAggregateHistogramPayload(t.watchedMsByInViewPct),watched_with_audio_ms_by_in_view_pct:this.constructAggregateHistogramPayload(t.watchedWithAudioMsByInViewPct),watched_ms_by_viewport_pct:this.constructAggregateHistogramPayload(t.watchedMsByViewportPct),max_continuous_watched_ms_by_in_view_pct:this.constructMaxContinuousHistogramPayload(t.maxContinuousWatchedMsByInViewPct),max_continuous_watched_with_audio_ms_by_in_view_pct:this.constructMaxContinuousHistogramPayload(t.maxContinuousWatchedWithAudioMsByInViewPct),sizes_info_at_the_start:{viewport_size:t.sizesInfoAtTheStart.viewportSize,ad_size:t.sizesInfoAtTheStart.mediaSize}}}},e.constructAggregateHistogramPayload=function(t){for(var e,i={},n=et(ni);!(e=n()).done;){var a=e.value;i[a]=Math.round(t[a])}return{histogram:i}},e.constructMaxContinuousHistogramPayload=function(t){for(var e,i={},n=et(ni);!(e=n()).done;){var a=e.value,r=t[a];i[a]=Math.round(Math.max(r.current,r.max))}return{histogram:i}},e.emitVideoSessionEvent=function(t,e){this.analytics.emit(Ht,t,e)},t}(),oi=[Bt,Et,jt,gt,lt,ft,_t,Ut,bt],si=[gt,ft,_t,Ut],ci=function(){function t(t){this.analytics=t,this.eventMap={},this.analytics.on(xt,this.onTickEvent.bind(this)),this.analytics.on(Ft,this.onTrackFinishedEvent.bind(this)),this.analytics.on(Pt,this.onPauseEvent.bind(this))}var e=t.prototype;return e.onTrackFinishedEvent=function(t){var e=ie(t);if(void 0!==e){var i=this.eventMap[e.id];void 0!==i&&(e.shouldLoop?i.timePlayedToMs=0:this.eventMap[e.id]=void 0)}},e.onPauseEvent=function(t){this.resetContinuousViewEventTimingData(t)},e.onTickEvent=function(t){var e=ie(t);if(void 0!==e){var i=this.eventMap[e.id];if(void 0===i){i={timePlayedToMs:e.currentTimeMs};for(var n,a=et(oi);!(n=a()).done;){i[n.value]={timePlayedMs:0,visibilityWeightedTimePlayedMs:0,fired:!1}}this.eventMap[e.id]=i}t.isScrubbing?(i.timePlayedToMs=e.currentTimeMs,this.resetContinuousViewEventTimingData(t)):(this.updateTimingData(e,i,t),this.checkViewEvents(e,i,t)),this.checkPlayFromTap(i,t)}},e.updateTimingData=function(t,e,i){var n=t.currentTimeMs-e.timePlayedToMs;e.timePlayedToMs=t.currentTimeMs;var a=i.percentVisible;a>=1&&(e[jt].timePlayedMs+=n),a>=1?e[gt].timePlayedMs+=n:e[gt].timePlayedMs=0,a>=.5&&re(i)?e[ft].timePlayedMs+=n:e[ft].timePlayedMs=0,a>=.5?e[_t].timePlayedMs+=n:e[_t].timePlayedMs=0,a>=1&&!i.isMuted&&(e[lt].timePlayedMs+=n),a>=.5?e[Ut].timePlayedMs+=n:e[Ut].timePlayedMs=0,e[bt].timePlayedMs+=n,a>=.5&&(e[bt].visibilityWeightedTimePlayedMs+=a*n)},e.resetContinuousViewEventTimingData=function(t){var e=this.eventMap[t.currentTrackId];if(void 0!==e)for(var i,n=et(si);!(i=n()).done;){e[i.value].timePlayedMs=0}},e.checkViewEvents=function(t,e,i){var n;e[jt].timePlayedMs>=(!(n=t).isLive&&n.durationMs>0&&!n.shouldLoop?Math.min(n.durationMs-500,3e3):3e3)&&(this.emitOnce(jt,e,i),this.emitOnce(Bt,e,i)),e[gt].timePlayedMs>=1e3&&this.emitOnce(gt,e,i),e[lt].timePlayedMs>=function(t){return!t.isLive&&t.durationMs>0?.5*t.durationMs:Number.MAX_SAFE_INTEGER}(t)&&this.emitOnce(lt,e,i),e[ft].timePlayedMs>=2e3&&this.emitOnce(ft,e,i),e[_t].timePlayedMs>=2e3&&this.emitOnce(_t,e,i),e[Ut].timePlayedMs>=function(t){return!t.isLive&&t.durationMs>0?Math.min(.95*t.durationMs,1e4):1e4}(t)&&this.emitOnce(Ut,e,i);var a=e[bt];a.timePlayedMs>=function(t){return!t.isLive&&t.durationMs>0?Math.min(.95*t.durationMs,6e3):6e3}(t)&&a.visibilityWeightedTimePlayedMs>=function(t){return!t.isLive&&t.durationMs>0?Math.min(.5*t.durationMs,3e3):3e3}(t)&&this.emitOnce(bt,e,i)},e.checkPlayFromTap=function(t,e){e.isPlaying&&!e.isPreview&&(this.emitOnce(Et,t,e),this.emitOnce(Bt,t,e))},e.emitOnce=function(t,e,i){e[t].fired||(this.analytics.emit(t,i),e[t].fired=!0)},t}(),li=function(t){function e(e,i,n,a){var r;(r=t.call(this)||this).scribeListener=new Xe(p()(r),e,a),r.promotedLogListener=new Le(p()(r),i),r.tentpoleListener=new ii(p()(r)),r.viewListener=new ci(p()(r)),r.playbackLapseListener=new Ie(p()(r)),r.errorListener=new le(p()(r)),r.beaconListener=new se(p()(r)),r.rewindListener=new Re(p()(r)),r.heartbeatListener=new he(p()(r)),r.loopListener=new fe(p()(r)),r.intendToPlayListener=new ye(p()(r)),r.videoSessionListener=new ri(p()(r)),r.ctaImpressionListener=new ce(p()(r));var o=new Ee(n,a),s=new we(o);return r.lifecycleListener=new Se(p()(r),s),r}y()(e,t);var i=e.prototype;return i.onTickEvent=function(t){this.emit(xt,t)},i.onReplay=function(t){var e=ie(t);void 0!==e&&(e.shouldLoop||this.emit(Rt,t))},i.onTrackFinished=function(t){this.emit(Ft,t)},i.onIntendToPlay=function(t){this.emit(vt,t)},i.onPlay=function(t){this.emit(Tt,t)},i.onPause=function(t){this.emit(Pt,t)},i.onMute=function(t){this.emit(mt,t)},i.onUnmute=function(t){this.emit(Wt,t)},i.onFullScreen=function(t){this.emit(ct,t)},i.onShrink=function(t){this.emit(Vt,t)},i.onAdSkip=function(t){this.emit(nt,t)},i.onCtaImpression=function(t){this.emit(ot,t)},i.onCtaClick=function(t){this.emit(rt,t)},i.onConfigLoaded=function(t){this.emit(at,t)},i.onError=function(t,e){this.emit(st,t,e)},i.onTeardown=function(t){this.emit(Dt,t)},e}(Q.a),ui=i("Zl35"),di=i("9Xij"),hi=i("iOGT"),pi=i("mf9H"),vi=(i("2G9S"),i("gZV8")),yi=i("vF3p"),fi=i("S4UJ"),_i=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,_()(p()(e),"_handlePlacementChange",(function(t){e._updateAndNotify({placement:t},e.props.onChange)})),_()(p()(e),"_handleObstructionChange",(function(){var t=e.props,i=t.obstructionDetection,n=t.onChange;e._updateAndNotify({obstructions:i.getObstructions()},n)})),_()(p()(e),"_setPlacementRef",(function(t){var i=e.props.setAPI;e._placementRef=t,i(e._placementRef?{sample:function(t){return e.sample(t)}}:void 0)})),e}y()(e,t);var i=e.prototype;return i.sample=function(t){var e=this;this._placementRef&&this._placementRef.sample((function(i){e._updateAndNotify({placement:i},t)}))},i.render=function(){var t=this.props,e=t.children,i=t.style;return m.createElement(vi.a,{onPlacementChange:this._handlePlacementChange,ref:this._setPlacementRef,style:i},e)},i.componentDidMount=function(){var t=this.props.obstructionDetection;this._obstructionSubscription=t.subscribe(this._handleObstructionChange)},i.componentWillUnmount=function(){this._obstructionSubscription&&(this._obstructionSubscription.unsubscribe(),this._obstructionSubscription=void 0)},i._updateAndNotify=function(t,e){var i=this,n=t.placement,a=t.obstructions,r=this.props,o=r.layerId,s=r.obstructionDetection;this._placement=n||this._placement,this._obstructions=a||this._obstructions||s.getObstructions(),this._placement?e(new z(this._placement,this._obstructions,o)):this._placementRef&&this._placementRef.sample((function(t){i._placement=t,i._obstructions=i._obstructions||s.getObstructions(),e(new z(t,i._obstructions,o))}))},e}(m.Component);_()(_i,"defaultProps",{obstructionDetection:yi.a});var mi=Object(fi.a)(_i),gi=i("ZeN/"),bi=H.a.d58baa7e,Pi=new F.a({}),Ti=function(t){function e(e,i){var n;return n=t.call(this,e,i)||this,_()(p()(n),"_videoRef",m.createRef()),_()(p()(n),"_emitter",null),_()(p()(n),"_playerInternal",null),_()(p()(n),"_placementRef",null),_()(p()(n),"_isLooping",!1),_()(p()(n),"_instreamVideoEnabled",k.a.isTrue("responsive_web_instream_video_enabled")),_()(p()(n),"_renderLegacyPlayer",(function(t){var e=n.props,i=e.accessibilityLabel,a=e.analytics,r=e.source,o=r.contentId,s=r.eventId,c=r.videoId,u=r.vmapUrl,d=e.cta,h=e.displayOptions,p=e.durationMs,v=e.intentToPlayTime,y=e.videoEl,f=e.viewCount,_=e.includeBroadcastEventAssociation,g=e.showControls,b=e.geolocationPrompt,P=e.timecode,T=e.mediaAvailability,E=e.noAuthHttpClient,w=e.publisherId,M=e.twitterAuthedHttpClient,S=e.language,I=e.maxLoopCount,A=e.videoPlayer;return m.createElement(A,l()({accessibilityLabel:i,adProvider:n._tweetAdProvider(),analytics:a,contentId:o,controls:g,cta:d,customOverlay:n._deriveCustomOverlay(),disableHls:n._disableHls,displayOptions:h,durationMs:p,enableNativeFullscreen:n._enableNativeFullscreen,eventId:s,geolocationPrompt:b,httpClient:E,includeBroadcastEventAssociation:_,initiallyMutedCaptions:!0,intentToPlayTime:v,language:S,maxLoopCount:I,mediaAvailability:T,playbackSessionId:c.id,precache:n._precacheEnabled,publisherId:w,ref:g?void 0:n._videoRef,requestedTimecode:P,setPlayerApi:n._setPlayerApi,shortNumberFormatter:bi,twitterAuthedHttpClient:M,videoEl:y,videoId:c,viewCount:f,vmapUrl:u},t))})),_()(p()(n),"_renderHorizonPlayer",(function(t){var e=n.props,i=e.accessibilityLabel,a=e.analytics,r=e.source,o=r.contentId,s=r.eventId,c=r.videoId,u=r.vmapUrl,d=e.cta,h=e.displayOptions,p=e.durationMs,v=e.intentToPlayTime,y=e.videoEl,f=e.viewCount,_=e.includeBroadcastEventAssociation,g=e.showControls,b=e.geolocationPrompt,P=e.timecode,T=e.mediaAvailability,E=e.noAuthHttpClient,w=e.publisherId,M=e.twitterAuthedHttpClient,S=e.language,I=e.maxLoopCount,A=e.videoPlayer,C=e.uiStack;return m.createElement(ui.b,l()({accessibilityLabel:i,adProvider:n._tweetAdProvider(),analytics:a,basePlayerClass:A,contentId:o,cta:d,disableHls:n._disableHls,durationMs:p,enableNativeFullscreen:n._enableNativeFullscreen,eventId:s,geolocationPrompt:b,httpClient:E,includeBroadcastEventAssociation:_,initiallyMutedCaptions:!0,intentToPlayTime:v,language:S,maxLoopCount:I,mediaAvailability:T,objectFitVideo:h&&h.objectFitVideo,onApiReady:n._handleApiReady,playbackSessionId:c.id,precache:n._precacheEnabled,publisherId:w,ref:g?void 0:n._videoRef,requestedTimecode:P,twitterAuthedHttpClient:M,videoEl:y,videoId:c,viewCount:f,vmapUrl:u},t),C)})),_()(p()(n),"_setPlayerApi",(function(t){var e=n.props,i=e.onMuteChange;"function"==typeof e.customOverlay&&(n._playerInternal=t,n.forceUpdate()),i&&(t.on("unmute",(function(){return i({isPlayerMuted:!1})})),t.on("mute",(function(){return i({isPlayerMuted:!0})}))),t&&(t.on("fullscreenEntered",(function(){return n._handleFullscreenChange({isPlayerFullscreen:!0})})),t.on("fullscreenExited",(function(){return n._handleFullscreenChange({isPlayerFullscreen:!1})}))),n._setPlayerInternal(t)})),_()(p()(n),"_handleApiReady",n._setPlayerApi),_()(p()(n),"_deriveCustomOverlay",(function(){var t=n.props.customOverlay;return"function"==typeof t?n._playerInternal?t(n._playerInternal,n._containerRef):null:t})),_()(p()(n),"_getLoopingThreshold",(function(){var t=n.props,e=t.loopingThresholdMs,i=t.source.videoId;return e||"tweet"===i.type&&6e4||7e3})),_()(p()(n),"_handleAutoPlayRequest",(function(){var t=n.props.onAutoplay;n._playerInternal&&(n._playerInternal.playPreview(),t&&t())})),_()(p()(n),"_handlePauseRequest",(function(){var t=n.props.onAutopause;n._playerInternal&&(n._playerInternal.pause(),t&&t())})),_()(p()(n),"_handlePlacementChange",(function(t){n._emitter&&n._emitter.signalPlacementChange(t),n._playerInternal&&n._playerInternal.updatePosition(t.getPositionData())})),_()(p()(n),"_handlePlaybackComplete",(function(){n._emitter&&n._emitter.signalPlaybackFinish()})),_()(p()(n),"_handlePlaybackStarted",(function(){n._emitter&&n._emitter.signalPlay(),n.props.onPlaybackStarted&&n.props.onPlaybackStarted()})),_()(p()(n),"_handlePlaybackPaused",(function(){n._emitter&&n._emitter.signalPause()})),_()(p()(n),"_handlePlayerState",(function(t){var e=n.props,i=e.onPlayerState,a=e.onProgressChange;i&&i(t);var r=(t.tracks||[]).find((function(e){return e.id===t.currentTrackId}));if(r){var o=(r.currentTimeMs||0)/r.durationMs;a&&a(o,t.tracksFinished)}})),_()(p()(n),"_handleError",(function(t){var e=n.props.onError,i=t.error;i?(n._emitter&&(n._emitter.unregister(),n._emitter=void 0,n._hasInitialPlacementMeasurement=!1,n._lastPlayerError=i),t.errorInfo&&!t.errorInfo.canRetry&&(e&&e(),n._onErrorUnsubscribe&&n._onErrorUnsubscribe())):!n._emitter&&n._lastPlayerError&&(n._registerPlaybackCoordination(),n._submitInitialPlacement(),n._lastPlayerError=void 0)})),_()(p()(n),"_handleFullscreenChange",(function(t){var e=n.context.viewport;if(e&&(e.temporarilySuppressScrollListeners(2e3),q.a.isChrome()||q.a.isSafari()))if(t.isPlayerFullscreen)n._savedScrollPosition={y:e.scrollY(),x:e.scrollX()};else if(n._savedScrollPosition){var i=n._savedScrollPosition,a=i.x,r=i.y;n._savedScrollPosition=void 0,e.scrollTo(a,r)}var o=n.props.onFullscreenChange;o&&o(t)})),_()(p()(n),"_registerPlaybackCoordination",(function(){var t=n.props,e=t.autoplay,i=t.forwardPivotInfo,a=t.playbackCoordination,r={onAutoPlayRequest:n._handleAutoPlayRequest,onPauseRequest:n._handlePauseRequest,canAutoplay:Object(Y.a)(e,i),isLooping:n._isLooping};a&&(n._emitter=a.register(r))})),_()(p()(n),"_setPlayerInternal",(function(t){if(n._playerInternal=t,t){var e=n.props,i=e.onPlayerState,a=e.onProgressChange;(i||a)&&t.subscribe(n._handlePlayerState),n._onErrorUnsubscribe=t.subscribe(n._handleError),t.on("playbackComplete",n._handlePlaybackComplete),t.on("play",n._handlePlaybackStarted),t.on("pause",n._handlePlaybackPaused),n._registerPlaybackCoordination(),n._submitInitialPlacement()}if(n.props.setPlayer){var r=n._playerInternal&&{play:function(){n._playerInternal&&n._playerInternal.play()},pause:function(){n._playerInternal&&n._playerInternal.pause()},replay:function(){n._playerInternal&&n._playerInternal.replay()}};n.props.setPlayer(r)}})),_()(p()(n),"_setPlacementAPI",(function(t){n._placementRef=t,n._submitInitialPlacement()})),_()(p()(n),"_getTweetId",(function(){var t=n.props.source.videoId;if(t){if("tweet"===t.type)return t.id;if("broadcast"===t.type||"live_event"===t.type)return t.tweetId}})),_()(p()(n),"_tweetAdProvider",(function(){if(n._instreamVideoEnabled){var t=n._getTweetId();if(t)return function(){return n.props.tweetAdProvider(t)}}})),n._enableNativeFullscreen=k.a.isTrue("responsive_web_video_native_fullscreen_enabled"),n._disableHls=!(q.a.isDesktopOS()||q.a.isAndroid()&&k.a.isTrue("web_video_hls_android_mse_enabled")),n._precacheEnabled=!q.a.isMobileOS()&&k.a.hasValue("responsive_web_video_precaching_8507","precaching"),n}y()(e,t);var i=e.prototype;return i.componentDidMount=function(){if(!this._containerRef&&this._videoRef.current){var t=K.a.findDOMNode(this._videoRef.current);t instanceof HTMLElement&&(this._containerRef=t)}},i.componentDidUpdate=function(t){var e=this.props.heightsReady;!t.heightsReady&&e&&this._submitInitialPlacement()},i.render=function(){var t=this.props.aspectRatio;return m.createElement(di.a,{ratio:t,style:Ei.aspectRatio},m.createElement(mi,{onChange:this._handlePlacementChange,setAPI:this._setPlacementAPI,style:O.a.absoluteFill},this._renderPlayer()))},i.UNSAFE_componentWillReceiveProps=function(t){Object(U.a)(this.props.source,t.source)||this._emitter&&this._emitter.reset()},i.componentWillUnmount=function(){this._emitter&&(this._emitter.unregister(),this._emitter=null),this._onErrorUnsubscribe&&this._onErrorUnsubscribe()},i._renderPlayer=function(){var t=this.props,e=t.source.variants,i=t.durationMs,n=t.forceLoop,a=t.videoType,r=t.poster,o=t.promotedContent,s=t.dataSaverMode,c="animated_gif"===a,l="vine"===a,u=e&&e.length?c?"gif":"media_entity":"vmap";this._isLooping=!!(n||c||l||i&&i<=this._getLoopingThreshold());var d={bitrateCap:s?gi.a.MEDIUM:void 0,contentType:u,featureProvider:k.a,loop:this._isLooping,poster:r&&r.url,promotedContext:o&&(o.impression_id||o.disclosure_type)?{impressionId:o.impression_id,disclosureType:o.disclosure_type}:void 0,variants:e&&Object(S.e)(Object(hi.c)(e,s?hi.a.MEDIUM:hi.a.HIGH).map((function(t){return{src:t.url,type:t.content_type}})))};return m.createElement(x,null,Object(S.d)(this.props)?this._renderHorizonPlayer(d):this._renderLegacyPlayer(d))},i._submitInitialPlacement=function(){var t=this.props.heightsReady&&!this._hasInitialPlacementMeasurement;this._emitter&&this._placementRef&&t&&(this._placementRef.sample(this._handlePlacementChange),this._hasInitialPlacementMeasurement=!0)},e}(m.Component);_()(Ti,"contextTypes",{viewport:L.object}),_()(Ti,"defaultProps",{autoplay:R.b.Off,playbackCoordination:pi.b,showControls:!0,dataSaverMode:!1,geolocationPrompt:!0,heightsReady:!0,noAuthHttpClient:Pi,includeBroadcastEventAssociation:!1});var Ei=O.a.create({aspectRatio:{zIndex:void 0}}),wi=i("fs1G"),Mi=i("64vW"),Si=function(t){function e(e){var i;return i=t.call(this,e)||this,_()(p()(i),"_player",null),_()(p()(i),"_getBaseItem",(function(t){var e,n=i.props,a=n.analytics,r=n.includeBroadcastEventAssociation,o=n.source.videoId,s=a.contextualScribeData.event_id;return e="broadcast"===o.type&&o.tweetId?o.tweetId:"broadcast"===o.type&&r&&s?s:o.id,t.find((function(t){return t.id===e}))})),_()(p()(i),"_createAnalytics",(function(t){var e={log:i._scribeAction},n=i.props.analytics,a={log:k.a.isTrue("responsive_web_video_promoted_logging_enabled")?i._logPromotedVideoEvent:wi.a},r=n.contextualScribeNamespace,o=n.contextualScribeData,s=Array.isArray(o.items)?i._getBaseItem(o.items):void 0,c={scribeContext:Object.assign({},r),baseScribeItem:s};return new li(e,a,t,c)})),_()(p()(i),"_logPromotedVideoEvent",(function(t){var e=i.props.createLocalApiErrorHandler;i.props.logPromotedVideoEvent(t).catch(e())})),_()(p()(i),"_scribeAction",(function(t){var e=t.category,n=t.data,a=t.namespace,r=i.props.analytics;(null==a?void 0:a.action)&&r.scribe(Object.assign({},a,{data:Object.assign({},n,{_category_:e})}))})),_()(p()(i),"_setPlayer",(function(t){if(i._player=t,i.props.setPlayer){var e=i._player&&{play:function(){i._player&&i._player.play()},pause:function(){i._player&&i._player.pause()},replay:function(){i._player&&i._player.replay()}};i.props.setPlayer(e)}})),i._twitterAuthedHttpClient=e.getTwitterAuthedHttpClient(),i._analytics=i._createAnalytics(i._twitterAuthedHttpClient),i}return y()(e,t),e.prototype.render=function(){var t=this.props,e=(t.createLocalApiErrorHandler,t.getTwitterAuthedHttpClient,t.tweetAdProvider),i=d()(t,["createLocalApiErrorHandler","getTwitterAuthedHttpClient","tweetAdProvider"]),n=this.context.heightsReady;return m.createElement(Ti,l()({},i,{analytics:this._analytics,heightsReady:n,setPlayer:this._setPlayer,tweetAdProvider:e,twitterAuthedHttpClient:this._twitterAuthedHttpClient}))},e}(m.PureComponent);_()(Si,"contextType",Mi.a);var Ii=C(Si);e.default=Ii},"X/SR":function(t,e){for(var i=[],n=0;n<256;++n)i[n]=(n+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0,a=i;return[a[t[n++]],a[t[n++]],a[t[n++]],a[t[n++]],"-",a[t[n++]],a[t[n++]],"-",a[t[n++]],a[t[n++]],"-",a[t[n++]],a[t[n++]],"-",a[t[n++]],a[t[n++]],a[t[n++]],a[t[n++]],a[t[n++]],a[t[n++]]].join("")}},"YF1/":function(t,e,i){var n,a,r=i("fjNU"),o=i("X/SR"),s=0,c=0;t.exports=function(t,e,i){var l=e&&i||0,u=e||[],d=(t=t||{}).node||n,h=void 0!==t.clockseq?t.clockseq:a;if(null==d||null==h){var p=r();null==d&&(d=n=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==h&&(h=a=16383&(p[6]<<8|p[7]))}var v=void 0!==t.msecs?t.msecs:(new Date).getTime(),y=void 0!==t.nsecs?t.nsecs:c+1,f=v-s+(y-c)/1e4;if(f<0&&void 0===t.clockseq&&(h=h+1&16383),(f<0||v>s)&&void 0===t.nsecs&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=v,c=y,a=h;var _=(1e4*(268435455&(v+=122192928e5))+y)%4294967296;u[l++]=_>>>24&255,u[l++]=_>>>16&255,u[l++]=_>>>8&255,u[l++]=255&_;var m=v/4294967296*1e4&268435455;u[l++]=m>>>8&255,u[l++]=255&m,u[l++]=m>>>24&15|16,u[l++]=m>>>16&255,u[l++]=h>>>8|128,u[l++]=255&h;for(var g=0;g<6;++g)u[l+g]=d[g];return e||o(u)}},Yyzf:function(t,e,i){"use strict";i.d(e,"a",(function(){return f}));i("IAdD");var n=i("ERkP"),a=i("t62R"),r=i("/yvb"),o=i("3XMw"),s=i.n(o),c=i("svPC"),l=i.n(c),u=i("rHpw"),d=i("D4le"),h=i.n(d),p=i("3xO4"),v=i.n(p),y=s.a.a9edea48;function f(t){var e=t.displayBackgroundImage,i=void 0!==e&&e,o=t.errorMessage,s=t.iconPlayError,c=t.imageSrc,d=t.onReloadPress;return n.createElement(v.a,{style:[u.a.absoluteFill,i?null:_.blankOverlay]},i?n.createElement(n.Fragment,null,n.createElement(v.a,{style:_.backgroundImage},c&&n.createElement(h.a,{resizeMode:"cover",source:c,style:u.a.absoluteFill})),n.createElement(v.a,{style:_.overlay})):null,n.createElement(v.a,{style:_.errorContainer},n.createElement(v.a,null,s?n.createElement(l.a,{style:_.playErrorIcon}):null),n.createElement(v.a,{accessible:!0},n.createElement(a.c,{style:i?_.errorMsgTextWhite:_.errorMsgTextGray},o)),d?n.createElement(r.a,{onPress:d,style:_.buttonContainer,type:"primary"},y):null))}var _=u.a.create((function(t){return{backgroundImage:Object.assign({},u.a.absoluteFillObject,{filter:"blur(5px)"}),overlay:Object.assign({},u.a.absoluteFillObject,{backgroundColor:t.colors.translucentBlack77}),blankOverlay:{backgroundColor:t.colors.faintGray},buttonContainer:{justifyContent:"center",alignSelf:"center"},errorContainer:{justifyContent:"center",height:"100%",marginHorizontal:t.spaces.large},errorMsgTextWhite:{color:t.colors.white,textAlign:"center",marginBottom:t.spaces.medium},errorMsgTextGray:{color:t.colors.deepGray,textAlign:"center",marginBottom:t.spaces.medium},playErrorIcon:{fill:t.colors.deepGray,height:t.spaces.xxLarge,width:t.spaces.xxLarge,marginHorizontal:"auto",paddingBottom:t.spaces.medium,textAlignVertical:"middle"}}}))},"ZeN/":function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r}));var n={LOW:32e4,MEDIUM:832e3,HIGH:2176e3},a={EVENT:"event",VISIT:"url",WATCH:"watch",IMAGE:"image",WATCH_NOW:"watch_now"},r=["cover","contain"]},Zl35:function(t,e,i){"use strict";i.d(e,"a",(function(){return M}));i("2G9S"),i("IAdD");var n=i("97Jx"),a=i.n(n),r=i("LdEA"),o=i.n(r),s=i("1Pcy"),c=i.n(s),l=i("W/Kd"),u=i.n(l),d=i("KEM+"),h=i.n(d),p=i("ERkP"),v=i("9Xij"),y=(i("z84I"),i("mN6z"));function f(t){var e=_(t);return function(t){var i=_(t);return Object(y.a)(e,i)||(e=i),e}}function _(t){if(!t||"object"!=typeof t)return t;var e=JSON.parse(JSON.stringify(t));return delete e.dataUsageBytes,e.tracks=e.tracks.map((function(t){return"number"==typeof t.currentTimeMs&&delete t.currentTimeMs,t})),e}var m=i("Yyzf"),g=i("7nmT"),b=i.n(g),P=i("rHpw");i("7x/C"),i("JtPf");function T(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var E=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,h()(c()(e),"state",{playerApi:void 0,playerState:void 0,guestsState:void 0}),h()(c()(e),"_initializeState",(function(t){t&&(e._unsubscribe&&e._unsubscribe(),e.setState({playerApi:t}),e._unsubscribe=t.subscribe((function(t,i){return e.setState({playerState:t,guestsState:i})})))})),e}u()(e,t);var i=e.prototype;return i.componentDidMount=function(){this._initializeState(this.props.playerApi)},i.componentDidUpdate=function(t){var e=this.props.playerApi;e!==t.playerApi&&this._initializeState(e)},i.render=function(){return this.props.children(this.state)},e}(p.Component),w=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,h()(c()(e),"state",{players:{}}),h()(c()(e),"_mounted",!1),h()(c()(e),"_registerPlayer",(function(t,i){var n=new Promise((function(n){setTimeout((function(){e._mounted?e.setState((function(e){var n;return{players:Object.assign({},e.players,(n={},n[t]=i,n))}}),n):n()}))}));return function(){n.then((function(){return e._unregisterPlayer(t)}))}})),h()(c()(e),"_unregisterPlayer",(function(t){e._mounted&&e.setState((function(i){var n=e.state.players;n[t];return{players:o()(n,[t].map(T))}}))})),h()(c()(e),"_registrationContext",{registerPlayer:e._registerPlayer}),e}u()(e,t);var i=e.prototype;return i.componentDidMount=function(){this._mounted=!0},i.componentWillUnmount=function(){this._mounted=!1},i.render=function(){return p.createElement(e.RegistrationContext.Provider,{value:this._registrationContext},p.createElement(e.ProviderContext.Provider,{value:this.state},this.props.children))},e}(p.Component);function M(t){var e=t.periodic,i=t.children,n=e?S.PeriodicContext.Consumer:S.Context.Consumer;return p.createElement(n,null,(function(t){var e=t.guestsState,n=t.playerApi,a=t.playerState,r=t.containerRef;return n&&r&&a?i({guestsState:e,playerApi:n,playerState:a,containerRef:r}):null}))}h()(w,"MetadataSubscriber",(function(t){var e=t.playerId,i=t.children;return p.createElement(w.ProviderContext.Consumer,null,(function(t){var n=t.players;return p.createElement(E,{playerApi:n&&n[e]},i)}))})),h()(w,"RegistrationContext",p.createContext({registerPlayer:void 0})),h()(w,"ProviderContext",p.createContext({players:{}}));var S=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,h()(c()(e),"_cache",{stablePlayerState:f(null)}),h()(c()(e),"state",{hasError:null,guestsState:null,playerApi:null,playerState:null,stablePlayerState:null}),h()(c()(e),"_renderCustomOverlay",(function(){var t=e.props.children,i=e.state,n=i.guestsState,a=i.playerApi,r=i.stablePlayerState;return a&&t?"function"==typeof t?t({guestsState:n,playerApi:a,playerState:r,containerRef:e._containerRef}):t:null})),h()(c()(e),"_handleReload",(function(){return e.setState((function(){return{hasError:null}}))})),h()(c()(e),"_handlePlayerApi",(function(t){return function(i){var n=e.props.playerId;e.setState({playerApi:i}),e.props.onApiReady&&e.props.onApiReady(i),n&&t&&(e._unregister=t(n,i)),e._unsubscribe=i.subscribe((function(t,i){var n=e._cache.stablePlayerState(t);e.setState({stablePlayerState:n,playerState:t,guestsState:i}),e.props.onStateUpdate&&e.props.onStateUpdate(t,i)}))}})),e}u()(e,t);var i=e.prototype;return i.componentWillUnmount=function(){this._unregister&&this._unregister(),this._unsubscribe&&this._unsubscribe()},i.componentDidUpdate=function(){if(!this._containerRef){var t=b.a.findDOMNode(this);t&&t instanceof HTMLElement&&(this._containerRef=t)}},i.componentDidCatch=function(t,e){var i={error:t,info:e};this.setState((function(){return{hasError:i}}))},i.render=function(){var t=this,i=this.state,n=i.guestsState,r=i.playerApi,s=i.playerState,c=i.stablePlayerState,l=this.props,u=l.aspectRatio,d=(l.children,l.objectFitVideo),h=(l.onApiReady,l.onStateUpdate,l.playerId,l.basePlayerClass),y=l.size,f=o()(l,["aspectRatio","children","objectFitVideo","onApiReady","onStateUpdate","playerId","basePlayerClass","size"]),_={guestsState:n,playerApi:r,playerState:s,containerRef:this._containerRef},g=Object.assign({},_,{playerState:c}),b=Object.assign({},f,{customOverlay:this._renderCustomOverlay(),displayOptions:{objectFitVideo:d}});return p.createElement(v.a,{ratio:u||P.a.theme.aspectRatios.landscape,style:[I.root,I[y]]},this.state.hasError?p.createElement(m.a,{onReloadPress:this._handleReload}):p.createElement(e.Context.Provider,{value:g},p.createElement(e.PeriodicContext.Provider,{value:_},p.createElement(w.RegistrationContext.Consumer,null,(function(e){var i=e.registerPlayer;return p.createElement(h,a()({},b,{setPlayerApi:t._handlePlayerApi(i)}))})))))},e}(p.Component);h()(S,"Consumer",M),h()(S,"defaultProps",{size:"fill"}),h()(S,"Context",p.createContext({guestsState:null,playerApi:null,playerState:null,containerRef:null})),h()(S,"PeriodicContext",p.createContext({guestsState:null,playerApi:null,playerState:null,containerRef:null}));var I=P.a.create({root:{position:"relative"},fill:{width:"100%",height:"100%"},small:{width:480,height:270},medium:{width:640,height:360},large:{width:800,height:450}});e.b=S},aLgo:function(t,e,i){i("aokA")("iterator")},cARO:function(t,e,i){var n=i("uLp7"),a=Date.prototype,r=a.toString,o=a.getTime;new Date(NaN)+""!="Invalid Date"&&n(a,"toString",(function(){var t=o.call(this);return t==t?r.call(this):"Invalid Date"}))},fN3Q:function(t,e,i){var n=i("YF1/"),a=i("IC1n"),r=a;r.v1=n,r.v4=a,t.exports=r},fjNU:function(t,e){var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(i){var n=new Uint8Array(16);t.exports=function(){return i(n),n}}else{var a=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),a[e]=t>>>((3&e)<<3)&255;return a}}},kH1Z:function(t,e,i){i("ax0f")({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},mf9H:function(t,e,i){"use strict";i.d(e,"a",(function(){return l})),i.d(e,"b",(function(){return u}));i("LW0h"),i("hBpG"),i("jwue"),i("vrRf"),i("Ee2X"),i("6U7i"),i("yH/f"),i("+oxZ");var n=i("KEM+"),a=i.n(n),r=i("jHwr"),o=i("+d3d"),s=function(t,e){if(0!==t.length){for(var i=t[0],n=e(i),a=1;a<t.length;a++){var r=t[a],o=e(r);o<n&&(i=r,n=o)}return i}},c=Object.freeze({INITIAL:"initial",AUTO_PAUSED:"autoPaused",USER_PAUSED:"userPaused",AUTO_PLAYING:"autoPlaying",USER_PLAYING:"userPlaying",FINISHED:"finished"}),l=function(){function t(t){var e=this;void 0===t&&(t=.25),a()(this,"_players",[]),a()(this,"_setPlayerState",(function(t,e){t.previousPlaybackState=t.playbackState,t.playbackState=e})),a()(this,"_updatePlaybackStates",(function(){var t=e._players.find((function(t){return t.playbackState===c.USER_PLAYING}));t&&!e._canPlay(t)?(e._pausePlayer(t),e._triggerAutoplay()):t?e._stopAllExcept(t):e._triggerAutoplay()})),a()(this,"_scheduleUpdate",Object(o.a)(Object(r.a)(this._updatePlaybackStates,window.requestIdleCallback?function(t){return window.requestIdleCallback(t,{timeout:200})}:window.requestAnimationFrame),300,{leading:!1,trailing:!0})),this._minimumVisibilityForAutoplay=t}var e=t.prototype;return e.register=function(t){var e=this,i=t.canAutoplay,n=t.onAutoPlayRequest,a=t.onPauseRequest,r=t.isLooping,o={placement:void 0,playbackState:c.INITIAL,previousPlaybackState:c.INITIAL,commandHandlers:{onAutoPlayRequest:n,onPauseRequest:a},canAutoplay:i,isLooping:r};return this._players.push(o),{reset:function(){return e._handleReset(o)},signalPlacementChange:function(t){return e._handlePlacementChange(o,t)},signalPlay:function(){return e._handlePlay(o)},signalPause:function(){return e._handlePause(o)},signalPlaybackFinish:function(){return e._handlePlaybackFinished(o)},unregister:function(){return e._handleUnregister(o)}}},e._handlePlacementChange=function(t,e){var i=e.scrollY();t.placement=e,this._scrollY!==i&&(this._scrollY=i),t.playbackState===c.FINISHED&&0===e.visibleFraction()&&this._setPlayerState(t,c.INITIAL),this._scheduleUpdate()},e._handlePlay=function(t){t.playbackState!==c.AUTO_PLAYING&&(t.previousPlaybackState===c.AUTO_PLAYING&&t.isLooping?this._setPlayerState(t,c.AUTO_PLAYING):this._setPlayerState(t,c.USER_PLAYING)),this._stopAllExcept(t)},e._handlePause=function(t){t.playbackState!==c.AUTO_PAUSED&&this._setPlayerState(t,c.USER_PAUSED)},e._handlePlaybackFinished=function(t){this._setPlayerState(t,c.FINISHED)},e._handleReset=function(t){this._setPlayerState(t,c.INITIAL),this._scheduleUpdate()},e._handleUnregister=function(t){var e=this._players.indexOf(t);e>=0&&this._players.splice(e,1),this._scheduleUpdate()},e._triggerAutoplay=function(){var t=this,e=this._players.filter((function(e){return t._canAutoPlay(e)})),i=this._findBestAutoplayFit(e);i?(this._stopAllExcept(i),this._autoPlayVideo(i)):this._players.forEach((function(e){e.playbackState===c.AUTO_PLAYING&&t._pausePlayer(e)}))},e._canAutoPlay=function(t){var e=!!t.placement&&t.placement.visibleFraction()>=this._minimumVisibilityForAutoplay,i=t.playbackState===c.USER_PAUSED,n=t.playbackState===c.FINISHED;return t.canAutoplay&&e&&!i&&!n},e._canPlay=function(t){var e=!!t.placement&&t.placement.visibleFraction()>=this._minimumVisibilityForAutoplay,i=!!t.placement&&t.placement.visibleFraction()>0;return!t.placement||i||e},e._stopAllExcept=function(t){var e=this;this._players.forEach((function(i){i===t||i.playbackState!==c.USER_PLAYING&&i.playbackState!==c.AUTO_PLAYING||e._pausePlayer(i)}))},e._pausePlayer=function(t){var e=t.commandHandlers.onPauseRequest;this._setPlayerState(t,c.AUTO_PAUSED),e()},e._autoPlayVideo=function(t){var e=t.commandHandlers.onAutoPlayRequest;this._setPlayerState(t,c.AUTO_PLAYING),e()},e._findBestAutoplayFit=function(t){return 0===this._scrollY?s(t,this._getDistanceToTop):s(t,this._getDistanceToCenter)},e._getDistanceToCenter=function(t){return t.placement?t.placement.distanceToCenter():Number.MAX_VALUE},e._getDistanceToTop=function(t){return t.placement?t.placement.distanceToTop():Number.MAX_VALUE},t}(),u=new l},sVFb:function(t,e,i){var n=i("ax0f"),a=i("9JhN"),r=i("ZORK"),o=[].slice,s=function(t){return function(e,i){var n=arguments.length>2,a=n?o.call(arguments,2):void 0;return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,a)}:e,i)}};n({global:!0,bind:!0,forced:/MSIE .\./.test(r)},{setTimeout:s(a.setTimeout),setInterval:s(a.setInterval)})},ssvU:function(t,e,i){i("ax0f")({target:"Number",stat:!0},{isNaN:function(t){return t!=t}})},svPC:function(t,e,i){"use strict";i("IAdD"),e.__esModule=!0,e.default=void 0;var n=o(i("7DT3")),a=o(i("ERkP")),r=o(i("OkZJ"));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(t){return void 0===t&&(t={}),(0,n.default)("svg",Object.assign({},t,{style:[r.default.root,t.style],viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M15.644 11.58L10.43 8.26c-.155-.1-.35-.105-.51-.018-.16.088-.26.256-.26.438v6.64c0 .183.1.35.26.438.074.04.157.062.24.062.093 0 .187-.026.27-.078l5.214-3.32c.144-.09.23-.25.23-.42s-.086-.332-.23-.423zM2.5 22.25c-.192 0-.384-.073-.53-.22-.293-.293-.293-.768 0-1.06l5.25-5.25c.293-.294.768-.294 1.06 0s.294.767 0 1.06l-5.25 5.25c-.146.147-.338.22-.53.22zM15.208 9.542c-.192 0-.384-.073-.53-.22-.293-.293-.293-.768 0-1.06L20.97 1.97c.293-.293.768-.293 1.06 0s.294.768 0 1.06l-6.29 6.293c-.148.146-.34.22-.532.22z"}),a.default.createElement("path",{d:"M3.815 17.062c-.27 0-.53-.146-.664-.4C2.4 15.236 2 13.623 2 12 2 6.486 6.486 2 12 2c1.592 0 3.176.384 4.582 1.11.368.188.512.64.322 1.01-.19.368-.643.515-1.01.32-1.21-.624-2.52-.94-3.894-.94-4.687 0-8.5 3.813-8.5 8.5 0 1.38.338 2.75.978 3.96.193.367.053.82-.313 1.015-.112.06-.232.087-.35.087zM12 22c-1.59 0-3.175-.384-4.58-1.11-.37-.188-.513-.64-.323-1.01.19-.366.644-.514 1.01-.32 1.21.624 2.52.94 3.893.94 4.687 0 8.5-3.813 8.5-8.5 0-1.364-.33-2.72-.957-3.922-.19-.367-.05-.82.318-1.012.37-.19.82-.05 1.013.318C21.61 8.8 22 10.396 22 12c0 5.514-4.486 10-10 10z"})))};s.metadata={height:24,width:24};var c=s;e.default=c},zh11:function(t,e,i){"use strict";var n=i("hpdy"),a=i("dSaG"),r=[].slice,o={},s=function(t,e,i){if(!(e in o)){for(var n=[],a=0;a<e;a++)n[a]="a["+a+"]";o[e]=Function("C,a","return new C("+n.join(",")+")")}return o[e](t,i)};t.exports=Function.bind||function(t){var e=n(this),i=r.call(arguments,1),o=function(){var n=i.concat(r.call(arguments));return this instanceof o?s(e,n.length,n):e.apply(t,n)};return a(e.prototype)&&(o.prototype=e.prototype),o}}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/web_legacy/ondemand.InlinePlayer.c784ce24.js.map